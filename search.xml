<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[InnoDBä¸­çš„äº‹åŠ¡éš”ç¦»çº§åˆ«å’Œé”çš„å…³ç³»]]></title>
    <url>%2F2019%2F08%2F19%2F%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E4%B8%8E%E9%94%81%E7%9A%84%E5%85%B3%E7%B3%BB%2F</url>
    <content type="text"><![CDATA[InnoDBä¸­çš„äº‹åŠ¡éš”ç¦»çº§åˆ«å’Œé”çš„å…³ç³»ä¸€æ¬¡å°é”orä¸¤æ®µé”å› ä¸ºæœ‰å¤§é‡çš„é¢å¹¶å‘è®¿é—®ï¼Œä¸ºäº†é¢„é˜²æ­»é”ï¼Œä¸€èˆ¬åº”ç”¨ä¸­æ¨èä¸€æ¬¡å°é”æ³•ï¼Œå°±æ˜¯åœ¨æ–¹æ³•çš„å¼€å§‹é˜¶æ®µï¼Œå·²ç»é¢„å…ˆçŸ¥é“ä¼šç”¨åˆ°å“ªäº›æ•°æ®ï¼Œç„¶åå…¨éƒ¨é”ä½ï¼Œåœ¨æ–¹æ³•è¿è¡Œä¹‹åï¼Œå†å…¨éƒ¨è§£é”ã€‚è¿™ç§æ–¹å¼å¯ä»¥æœ‰æ•ˆçš„é¿å…å¾ªç¯æ­»é”ï¼Œä½†åœ¨æ•°æ®åº“ä¸­å´ä¸ä½¿ç”¨ï¼Œå› ä¸ºåœ¨äº‹åŠ¡å¼€å§‹é˜¶æ®µï¼Œæ•°æ®åº“å¹¶ä¸çŸ¥é“ä¼šç”¨åˆ°å“ªäº›æ•°æ®ã€‚ æ•°æ®åº“éµå¾ªçš„æ˜¯ä¸¤æ®µé”åè®®ï¼Œå°†äº‹åŠ¡åˆ†æˆä¸¤ä¸ªé˜¶æ®µï¼ŒåŠ é”å’Œè§£é”é˜¶æ®µï¼ˆå› æ­¤å«ä¸¤æ®µé”ï¼‰ï¼š åŠ é”é˜¶æ®µï¼šåœ¨è¯¥é˜¶æ®µå¯ä»¥è¿›è¡ŒåŠ é”æ“ä½œã€‚åœ¨å¯¹ä»»ä½•æ•°æ®è¿›è¡Œè¯»æ“ä½œä¹‹å‰å“Ÿå•Šç”³è¯·å¹¶è·å¾—Sé”ï¼ˆå…±äº«é”ï¼Œå…¶ä»–äº‹åŠ¡å¯ä»¥ç»§ç»­åŠ å…±äº«é”ï¼Œä½†ä¸èƒ½åŠ æ’å®ƒé”ï¼‰,åœ¨è¿›è¡Œå†™æ“ä½œä¹‹å‰è¦ç”³è¯·å¹¶è·å¾—Xé”ï¼ˆæ’ä»–é”ï¼Œå…¶ä»–äº‹åŠ¡ä¸èƒ½å†è·å¾—ä»»ä½•é”ï¼‰ã€‚åŠ é”ä¸æˆåŠŸï¼Œåˆ™äº‹åŠ¡è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼ŒçŸ¥é“åŠ é”æˆåŠŸæ‰ç»§ç»­æ‰§è¡Œã€‚ è§£é”é˜¶æ®µï¼šå½“äº‹åŠ¡é‡Šæ”¾äº†ä¸€ä¸ªå°é”ä¹‹åï¼Œäº‹åŠ¡è¿›å…¥è§£é”é˜¶æ®µï¼Œåœ¨è¯¥é˜¶æ®µåªèƒ½è¿›è¡Œè§£é”æ“ä½œä¸èƒ½å†è¿›è¡ŒåŠ é”æ“ä½œã€‚ äº‹åŠ¡ åŠ é”/è§£é”å¤„ç† begin; insert into testâ€¦ åŠ insertå¯¹åº”çš„é” update test setâ€¦ åŠ updateå¯¹åº”çš„é” delete from testâ€¦ åŠ deleteå¯¹åº”çš„é” commit äº‹åŠ¡æäº¤æ—¶ï¼ŒåŒæ—¶é‡Šæ”¾insertã€updateã€deleteå¯¹åº”çš„é” è¿™ç§æ–¹å¼è™½ç„¶æ— æ³•é¿å…æ­»é”ï¼Œä½†æ˜¯ä¸¤ç«¯é”åè®®å¯ä»¥ä¿è¯äº‹åŠ¡çš„å¹¶å‘è°ƒåº¦æ˜¯ä¸²è¡ŒåŒ–ï¼ˆä¸²è¡ŒåŒ–å¾ˆé‡è¦ï¼Œå°¤å…¶æ˜¯åœ¨æ•°æ®æ¢å¤å’Œå¤‡ä»½çš„æ—¶å€™ï¼‰ äº‹åŠ¡ä¸­çš„åŠ é”æ–¹å¼å››ç§éš”ç¦»çº§åˆ«åœ¨æ•°æ®åº“æ“ä½œä¸­ï¼Œä¸ºäº†æœ‰æ•ˆä¿è¯å¹¶å‘è¯»å–æ•°æ®çš„æ­£ç¡®æ€§ï¼Œæå‡ºçš„äº‹åŠ¡éš”ç¦»çº§åˆ«ã€‚æˆ‘ä»¬çš„æ•°æ®åº“é”ï¼Œä¹Ÿæ˜¯ä¸ºäº†æ„å»ºè¿™äº›éš”ç¦»çº§åˆ«å­˜åœ¨çš„ã€‚ é”çš„ç§ç±»MySQLä¸­å¸¸è§çš„æœ‰è¡¨é”å’Œè¡Œé”ï¼Œä¹Ÿæœ‰æ–°åŠ å…¥çš„Metadataç­‰ï¼Œè¡¨é”æ˜¯å¯¹ä¸€æ•´å¼ è¡¨åŠ é”è™½ç„¶å¯åˆ†ä¸ºè¯»é”å’Œå†™é”ï¼Œä½†æ¯•ç«Ÿæ˜¯é”ä½æ•´å¼ è¡¨ï¼Œä¼šå¯¼è‡´å¹¶å‘èƒ½åŠ›ä¸‹é™ï¼Œä¸€èˆ¬æ˜¯åšddlå¤„ç†æ—¶ä½¿ç”¨ã€‚ è¡Œé”åˆ™æ˜¯é”ä½æ•°æ®è¡Œï¼Œè¿™ç§åŠ é”æ–¹æ³•æ¯•ç«Ÿè¾…åŠ©ï¼Œä½†æ˜¯ç”±äºåªé”ä½æœ‰é™çš„æ•°æ®ï¼Œå¯¹äºå…¶ä»–æ•°æ®ä¸åŠ é™åˆ¶ï¼Œæ‰€ä»¥å¹¶å‘èƒ½åŠ›å¼ºï¼ŒMySQLä¸€èˆ¬éƒ½æ˜¯ç”¨è¡Œé”æ¥å¤„ç†æ•°æ®ï¼Œè¿™é‡Œä¸»è¦è®¨è®ºè¡Œé”ã€‚ Read Committedï¼ˆè¯»å–æäº¤å†…å®¹ï¼‰åœ¨RCçº§åˆ«ä¸­ï¼Œæ•°æ®çš„è¯»å–éƒ½æ˜¯ä¸åŠ é”çš„ï¼Œä½†æ˜¯æ•°æ®çš„å†™å…¥ã€ä¿®æ”¹æ˜¯éœ€è¦åŠ é”çš„ã€‚ ä¸ºäº†é˜²æ­¢å¹¶å‘è¿‡ç¨‹ä¸­çš„ä¿®æ”¹å†²çªï¼Œäº‹åŠ¡Aä¸­MySQLç»™teacher_id=1çš„æ•°æ®è¡ŒåŠ é”ï¼Œå¹¶ä¸€ç›´ä¸commitï¼ˆé‡Šæ”¾é”ï¼‰ï¼Œé‚£ä¹ˆäº‹åŠ¡Bä¹Ÿå°±ä¸€ç›´æ‹¿ä¸åˆ°è¯¥è¡Œé”ï¼Œwaitç›´åˆ°è¶…æ—¶ã€‚ ä½†æ˜¯æˆ‘ä»¬æ³¨æ„åˆ°ï¼Œteacher_idæ˜¯æœ‰ç´¢å¼•çš„ï¼Œå¦‚æœæ˜¯æ²¡æœ‰ç´¢å¼•çš„class_nameå‘¢ï¼Œé‚£ä¹ˆMySQLä¼šç»™æ•´å¼ è¡¨çš„æ‰€æœ‰æ•°æ®è¡ŒåŠ è¡Œé”ï¼Œè¿™å¬èµ·æ¥ä¼˜ç‚¹ä¸å¯æ€è®®ï¼Œä½†æ˜¯å½“SQLè¿è¡Œçš„è¿‡ç¨‹ä¸­ï¼ŒMySQLå¹¶ä¸çŸ¥é“å“ªäº›æ•°æ®è¡Œæ˜¯class_name=â€åˆä¸‰ä¸€ç­â€œï¼Œå¦‚æœä¸€ä¸ªæ¡ä»¶æ— æ³•é€šè¿‡ç´¢å¼•å¿«é€Ÿè¿‡æ»¤ï¼Œå­˜å‚¨å¼•æ“å±‚é¢å°±ä¼šå°†æ‰€æœ‰è®°å½•åŠ é”åè¿”å›ï¼Œå†ç”±MySQL_Serverå±‚è¿›è¡Œè¿‡æ»¤ã€‚ ä½†åœ¨å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼ŒMySQLåšäº†ä¸€äº›æ”¹è¿›ï¼Œåœ¨MySQL_Serverè¿‡æ»¤æ¡ä»¶ï¼Œå‘ç°ä¸æ»¡è¶³åï¼Œä¼šè°ƒç”¨unlock_rowæ–¹æ³•ï¼ŒæŠŠä¸æ»¡è¶³æ¡ä»¶çš„è®°å½•é‡Šæ”¾é”ï¼ˆè¿èƒŒäº†äºŒæ®µé”çš„çº¦æŸï¼‰,è¿™æ ·åšï¼Œä¿è¯äº†æœ€ååªæœ‰æŒæœ‰æ»¡è¶³æ¡ä»¶è®°å½•ä¸Šçš„é”ï¼Œä½†æ˜¯æ¯æ¡è®°å½•çš„åŠ é”æ“ä½œè¿˜æ˜¯ä¸èƒ½çœç•¥çš„ã€‚å¯è§å³ä½¿MySQLï¼Œä¸ºäº†æ•ˆç‡ä¹Ÿæ˜¯ä¼šè¿åè§„èŒƒçš„ã€‚ è¿™ç§æƒ…å†µåŒæ ·é€‚ç”¨äºMySQLçš„é»˜è®¤éš”ç¦»çº§åˆ«RRã€‚æ‰€ä»¥å¯¹ä¸€ä¸ªæ•°æ®é‡å¾ˆå¤§çš„è¡¨åšæ‰¹é‡ä¿®æ”¹çš„æ—¶å€™ï¼Œå¦‚æœæ— æ³•ä½¿ç”¨ç›¸åº”çš„ç´¢å¼•ï¼ŒMySQL Serverè¿‡æ»¤æ•°æ®çš„æ—¶å€™ç‰¹åˆ«æ…¢ï¼Œå°±ä¼šå‡ºç°è™½ç„¶æ²¡æœ‰ä¿®æ”¹æŸäº›è¡Œçš„æ•°æ®ï¼Œä½†æ˜¯å®ƒä»¬è¿˜æ˜¯è¢«é”ä½äº†çš„ç°è±¡ã€‚ Repeatable Read(å¯é‡è¯»)è¿™æ˜¯MySQLä¸­InnoDBé»˜è®¤çš„éš”ç¦»çº§åˆ«ã€‚æˆ‘ä»¬å§‘ä¸”åˆ†ä¸ºâ€è¯»â€œå’Œâ€å†™â€œä¸¤ä¸ªæ¨¡å—æ¥è®²è§£ã€‚ è¯»è¯»å°±æ˜¯å¯é‡è¯»ï¼Œå¯é‡è¯»è¿™ä¸ªæ¦‚å¿µæ˜¯ä¸€äº‹åŠ¡çš„å¤šä¸ªå®ä¾‹åœ¨å¹¶å‘è¯»å–æ•°æ®æ—¶ï¼Œä¼šçœ‹åˆ°ç›¸åŒçš„æ•°æ®è¡Œï¼Œæœ‰ç‚¹æŠ½è±¡ã€‚ ä¸å¯é‡å¤åº¦å’Œå¹»è¯»çš„åŒºåˆ«å¾ˆå¤šäººæä¸æ¸…æ¥šä¸å¯é‡å¤è¯»å’Œå¹»è¯»çš„åŒºåˆ«ï¼Œç¡®å®è¿™ä¸¤è€…æœ‰äº›ç›¸ä¼¼ã€‚ä½†ä¸å¯é‡å¤åº¦é‡ç‚¹åœ¨äºupdateå’Œdeleteï¼Œè€Œå¹»è¯»çš„é‡ç‚¹åœ¨äºinsertã€‚ å¦‚æœä½¿ç”¨é”æœºåˆ¶æ¥å®ç°è¿™ä¸¤ç§éš”ç¦»çº§åˆ«ï¼Œåœ¨å¯é‡å¤è¯»ä¸­ï¼Œè¯¥SQLç¬¬ä¸€æ¬¡è¯»å–åˆ°æ•°æ®åï¼Œå°±å°†è¿™äº›æ•°æ®åŠ é”ï¼Œå…¶ä»–äº‹åŠ¡æ— æ³•ä¿®æ”¹è¿™äº›æ•°æ®ï¼Œå°±å¯ä»¥å®ç°å¯é‡å¤è¯»äº†ã€‚ä½†è¿™ç§æ–¹æ³•å´æ— æ³•é”ä½insertçš„æ•°æ®ï¼Œæ‰€ä»¥å½“äº‹åŠ¡Aå…ˆå‰è¯»å–äº†æ•°æ®ï¼Œæˆ–è€…ä¿®æ”¹äº†å…¨éƒ¨æ•°æ®ï¼Œäº‹åŠ¡Bè¿˜æœ‰å¯ä»¥insertæ•°æ®æäº¤ï¼Œè¿™æ˜¯äº‹åŠ¡Aå°±ä¼šå‘ç°è«åå…¶å¦™å¤šäº†ä¸€æ¡è‡³ä»Šå•Šæ²¡æœ‰çš„æ•°æ®ï¼Œè¿™å°±æ˜¯å¹»è¯»ï¼Œä¸èƒ½é€šè¿‡è¡Œé”æ¥é¿å…ã€‚éœ€è¦Serializableéš”ç¦»çº§åˆ«ï¼Œè¯»ç”¨è¯»é”ï¼Œå†™ç”¨å†™é”ï¼Œè¯»é”å’Œå†™é”äº’æ–¥ï¼Œè¿™ä¹ˆåšå¯ä»¥æœ‰æ•ˆé¿å…å¹»è¯»ã€ä¸å¯é‡å¤è¯»ã€è„è¯»ç­‰ï¼Œä½†ä¼šæå¤§çš„é™ä½æ•°æ®åº“çš„å¹¶å‘èƒ½åŠ›ã€‚ æ‰€ä»¥è¯´ä¸å¯é‡å¤åº¦å’Œå¹»è¯»æœ€å¤§çš„åŒºåˆ«ï¼Œå°±åœ¨äºå¦‚ä½•é€šè¿‡é”æœºåˆ¶æ¥è§£å†³ä»–ä»¬äº§ç”Ÿçš„é—®é¢˜ã€‚ ä¸Šæ–‡è¯´çš„æ˜¯ï¼Œæ˜¯ä½¿ç”¨æ‚²è§‚é”æœºåˆ¶æ¥å¤„ç†è¿™ä¸¤ç§é—®é¢˜ï¼Œä½†æ˜¯MySQLã€ORACLEã€PostgreSQLç­‰æˆç†Ÿçš„æ•°æ®åº“ï¼Œå¤„äºæ€§èƒ½è€ƒè™‘ï¼Œéƒ½æ˜¯ä½¿ç”¨äº†ä»¥ä¹è§‚é”ä¸ºç†è®ºåŸºç¡€çš„MVCCï¼ˆå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼‰æ¥é¿å…è¿™ç§é—®é¢˜ã€‚ æ‚²è§‚é”å’Œä¹è§‚é” æ‚²è§‚é” æ­£å¦‚å…¶åï¼Œå®ƒæŒ‡çš„æ˜¯å¯¹å¤–ç•Œï¼ˆåŒ…æ‹¬æœ¬ç³»ç»Ÿå½“å‰çš„å…¶ä»–äº‹åŠ¡ï¼Œä»¥åŠæ¥è‡ªå¤–éƒ¨ç³»ç»Ÿçš„äº‹åŠ¡å¤„ç†ï¼‰ä¿®æ”¹æŒæŠ¥çº¸æ€åº¦ï¼Œå› æ­¤ï¼Œåœ¨æ•´ä¸ªæ•°æ®å¤„ç†è¿‡ç¨‹ä¸­ï¼Œå°†æ•°æ®å¤„äºé”å®šçŠ¶æ€ã€‚æ‚²è§‚é”çš„å®ç°ï¼Œå¾€å¾€ä¾é æ•°æ®åº“æä¾›çš„é”æœºåˆ¶ï¼ˆä¹Ÿåªæœ‰æ•°æ®åº“æä¾›çš„é”æœºåˆ¶ï¼‰æ‰èƒ½çœŸæ­£ä¿è¯æ•°æ®è®¿é—®çš„æ’ä»–æ€§ï¼Œå¦åˆ™ï¼Œå³ä½¿åœ¨æœ¬ç³»ç»Ÿä¸­å®ç°äº†åŠ é”æœºåˆ¶ï¼Œä¹Ÿæ— æ³•ä¿è¯å¤–éƒ¨ç³»ç»Ÿä¸ä¼šä¿®æ”¹æ•°æ®ï¼‰ã€‚ åœ¨æ‚²è§‚é”çš„æƒ…å†µä¸‹ï¼Œä¸ºäº†ä¿è¯äº‹åŠ¡çš„éš”ç¦»æ€§ï¼Œå°±éœ€è¦ä¸€è‡´æ€§é”å®šè¯»ã€‚è¯»å–æ•°æ®æ—¶ç»™åŠ é”ï¼Œå…¶ä»–äº‹åŠ¡æ— æ³•ä¿®æ”¹è¿™äº›æ•°æ®ã€‚ä¿®æ”¹åˆ é™¤æ•°æ®æ—¶ä¹Ÿè¦åŠ é”ï¼Œå…¶ä»–äº‹åŠ¡æ— æ³•å¤„è¯»å–è¿™äº›æ•°æ®ã€‚ ä¹è§‚é” ç›¸å¯¹æ‚²è§‚é”è€Œè¨€ï¼Œä¹è§‚é”é‡‡å–äº†æ›´åŠ å®½æ¾çš„åŠ é”æœºåˆ¶ã€‚æ‚²è§‚é”å¤§å¤šæ•°æƒ…å†µä¸‹ä¾é æ•°æ®çš„é”æœºåˆ¶å®ç°ï¼Œä»¥ä¿è¯æ“ä½œæœ€å¤§ç¨‹åº¦çš„ç‹¬å æ€§ã€‚ä½†éšç€è€Œæ¥å°±æ˜¯æ•°æ®åº“æ€§èƒ½çš„å¤§é‡å¼€é”€ï¼Œç‰¹åˆ«æ˜¯å¯¹é•¿äº‹åŠ¡è€Œè¨€ï¼Œè¿™æ ·çš„å¼€é”€å¾€å¾€æ— æ³•æ‰¿å—ã€‚ è€Œä¹è§‚é”æœºåˆ¶åœ¨ä¸€å®šç¨‹åº¦ä¸Šè§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚ä¹è§‚é”ï¼Œå¤§å¤šæ˜¯åŸºäºæ•°æ®ç‰ˆæœ¬çš„è®°å½•æœºåˆ¶å®ç°ã€‚ä½•è°“æ•°æ®ç‰ˆæœ¬ï¼Ÿå³ä¸ºæ•°æ®å¢åŠ ä¸€ä¸ªç‰ˆæœ¬æ ‡è¯†ï¼Œåœ¨åŸºäºæ•°æ®åº“è¡¨çš„ç‰ˆæœ¬è§£å†³æ–¹æ¡ˆä¸­ï¼Œä¸€èˆ¬æ˜¯é€šè¿‡ä¸ºæ•°æ®åº“è¡¨å¢åŠ ä¸€ä¸ªå­—æ®µâ€œversionâ€æ¥å®ç°ã€‚è¯»å–æ­¤æ•°æ®æ—¶ï¼Œå°†æ­¤ç‰ˆæœ¬å·ä¸€åŒè¯»å‡ºï¼Œä¹‹åæ›´æ–°æ—¶ï¼Œå¯¹æ­¤ç‰ˆæœ¬å·åŠ ä¸€ã€‚æ­¤æ—¶ï¼Œå°†æäº¤æ•°æ®çš„ç‰ˆæœ¬æ•°æ®ä¸æ•°æ®åº“è¡¨å¯¹åº”è®°å½•çš„å½“å‰ç‰ˆæœ¬ä¿¡æ¯è¿›è¡Œå¯¹æ¯”ï¼Œå¦‚æœæäº¤çš„ç‰ˆæœ¬å·å¤§äºæ•°æ®è¡¨å½“å‰ç‰ˆæœ¬å·ï¼Œåˆ™äºˆä»¥æ›´æ–°ï¼Œå¦åˆ™è®¤ä¸ºæ˜¯è¿‡æœŸæ•°æ®ã€‚ MVCCåœ¨MySQLçš„InnoDBä¸­çš„å®ç°åœ¨InnoDBä¸­ï¼Œä¼šåœ¨æ¯è¡Œæ•°æ®åæ·»åŠ ä¸¤ä¸ªé¢å¤–çš„éšè—çš„å€¼æ¥å®ç°MVCCï¼Œè¿™ä¸¤ä¸ªå€¼ä¸€ä¸ªè®°å½•è¿™è¡Œæ•°æ®ä½•æ—¶è¢«åˆ›å»ºï¼Œå¦å¤–ä¸€ä¸ªè®°å½•è¿™è¡Œæ•°æ®ä½•æ—¶è¿‡æœŸï¼ˆæˆ–è€…è¢«åˆ é™¤ï¼‰ã€‚åœ¨å®é™…æ“ä½œä¸­ï¼Œå­˜å‚¨çš„å¹¶ä¸æ˜¯æ—¶é—´ï¼Œè€Œæ˜¯äº‹åŠ¡çš„ç‰ˆæœ¬å·ï¼Œæ¯å¼€å¯ä¸€ä¸ªæ–°äº‹åŠ¡ï¼Œäº‹åŠ¡çš„ç‰ˆæœ¬å·å°±ä¼šé€’å¢ã€‚åœ¨å¯é‡è¯»Repeatable readsäº‹åŠ¡éš”ç¦»çº§åˆ«ä¸‹ï¼š SELECTæ—¶ï¼Œè¯»å–åˆ›å»ºç‰ˆæœ¬å·&lt;=å½“å‰äº‹åŠ¡ç‰ˆæœ¬å·ï¼Œåˆ é™¤ç‰ˆæœ¬å·ä¸ºç©ºå&gt;å½“å‰äº‹åŠ¡ç‰ˆæœ¬å· INSERTæ—¶ï¼Œä¿å­˜å½“å‰äº‹åŠ¡ç‰ˆæœ¬å·ä¸ºè¡Œçš„åˆ›å»ºç‰ˆæœ¬å· DELETEæ—¶ï¼Œä¿å­˜å½“å‰äº‹åŠ¡ç‰ˆæœ¬å·ä¸ºè¡Œçš„åˆ é™¤ç‰ˆæœ¬å· UPDATEæ—¶ï¼Œæ’å…¥ä¸€æ¡æ–°è®°å½•ï¼Œä¿å­˜å½“å‰äº‹åŠ¡ç‰ˆæœ¬å·ä¸ºè¡Œåˆ›å»ºç‰ˆæœ¬å·ï¼ŒåŒæ—¶ä¿å­˜å½“å‰äº‹åŠ¡ç‰ˆæœ¬å·åˆ°åŸæ¥è¡Œã€‚ é€šè¿‡MVCCï¼Œè™½ç„¶æ¯è¡Œè®°å½•éƒ½éœ€è¦é¢å¤–çš„å­˜å‚¨ç©ºé—´ï¼Œæ›´å¤šçš„è¡Œæ£€æŸ¥å·¥ä½œä»¥åŠä¸€äº›é¢å¤–çš„ç»´æŠ¤å·¥ä½œï¼Œä½†å¯ä»¥å‡å°‘é”çš„ä½¿ç”¨ï¼Œå¤§å¤šæ•°è¯»æ“ä½œéƒ½ä¸åŒåŠ é”ï¼Œè¯»æ•°æ®æ“ä½œå¾ˆç®€å•ï¼Œæ€§èƒ½å¾ˆå¥½ï¼Œå¹¶ä¸”ä¹Ÿèƒ½ä¿è¯åªä¼šè¯»å–åˆ°ç¬¦åˆæ ‡å‡†çš„è¡Œï¼Œä¹Ÿåªé”ä½å¿…è¦è¡Œã€‚ åœ¨æ•°æ®åº“æ–¹é¢çš„æ•™ç§‘ä¹¦å­¦åˆ°ï¼ŒPRæ˜¯å¯é‡å¤è¯»çš„ï¼Œä½†æ— æ³•è§£å†³å¹»è¯»ï¼Œè€Œåªæœ‰åœ¨Serializableçº§åˆ«æ‰èƒ½è§£å†³å¹»è¯»ã€‚ç»æµ‹è¯•ï¼Œåœ¨MySQLä¸­æ˜¯ä¸å­˜åœ¨è¿™ç§æƒ…å†µçš„ï¼Œåœ¨äº‹åŠ¡Cæäº¤åï¼Œäº‹åŠ¡Aè¿˜æ˜¯ä¸ä¼šè¯»åˆ°è¿™æ¡æ•°æ®ã€‚å¯è§åœ¨RRçº§åˆ«ä¸­ï¼Œæ˜¯è§£å†³äº†å¹»è¯»çš„é—®é¢˜çš„ã€‚ â€œè¯»â€å’Œâ€œè¯»â€çš„åŒºåˆ«äº‹åŠ¡çš„éš”ç¦»çº§åˆ«å…¶å®éƒ½æ˜¯å¯¹äºè¯»æ•°æ®çš„å®šä¹‰ï¼Œä½†åˆ°äº†è¿™é‡Œï¼Œå°±è¢«æ‹†æˆäº†è¯»å’Œå†™ä¸¤ä¸ªæ¨¡å—æ¥è®²è§£ã€‚è¿™ä¸»è¦æ˜¯å› ä¸ºMySQLä¸­çš„è¯»ï¼Œå’Œäº‹åŠ¡éš”ç¦»çº§åˆ«ä¸­çš„è¯»ï¼Œæ˜¯ä¸ä¸€æ ·çš„ã€‚ åœ¨RRçº§åˆ«ä¸­ï¼Œé€šè¿‡MVCCæœºåˆ¶ï¼Œè™½ç„¶è®©æ•°æ®å˜å¾—å¯é‡å¤è¯»ï¼Œä½†æˆ‘ä»¬è¯»åˆ°çš„å¯èƒ½æ˜¯å†å²æ•°æ®ï¼Œæ˜¯ä¸åŠæ—¶çš„æ•°æ®ï¼Œä¸æ˜¯æ•°æ®åº“å½“å‰çš„æ•°æ®ï¼è¿™åœ¨ä¸€äº›å¯¹äºæ•°æ®çš„æ—¶æ•ˆæ€§ç‰¹åˆ«æ•æ„Ÿçš„ä¸šåŠ¡ä¸­ï¼Œå°±å¾ˆå¯èƒ½å‡ºé—®é¢˜ã€‚ å¯¹äºè¿™ç§è¯»å–å†å²æ•°æ®çš„æ–¹å¼ï¼Œæˆ‘ä»¬å«å®ƒå¿«ç…§è¯»ï¼Œè€Œè¯»å–æ•°æ®åº“å½“å‰ç‰ˆæœ¬æ•°æ®çš„æ–¹å¼ï¼Œè¾ƒå½“å‰è¯»ã€‚å¾ˆæ˜¾ç„¶ï¼Œåœ¨MVCCä¸­ï¼š å¿«ç…§è¯»ï¼šå³SELECT å½“å‰è¯»ï¼šç‰¹æ®Šçš„è¯»æ“ä½œï¼Œæ’å…¥/æ›´æ–°/åˆ é™¤æ“ä½œï¼Œå±äºå½“å‰è¯»ï¼Œå¤„ç†çš„éƒ½æ˜¯å½“å‰çš„æ•°æ®ï¼Œéœ€è¦åŠ é”ã€‚ SELECT * from table where ï¼Ÿlock in share modes; SELECT * from table where ? for update; insertï¼› updateï¼› delete; äº‹åŠ¡çš„éš”ç¦»çº§åˆ«å®é™…ä¸Šéƒ½æ˜¯å®šä¹‰äº†å½“å‰è¯»çš„çº§åˆ«ï¼ŒMySQLä¸ºäº†å‡å°‘é”å¤„ç†ï¼ˆåŒ…æ‹¬ç­‰å¾…å…¶ä»–é”ï¼‰çš„æ—¶é—´ï¼Œæå‡å¹¶å‘èƒ½åŠ›ï¼Œå¼•å…¥äº†å¿«ç…§è¯»çš„æ¦‚å¿µï¼Œä½¿å¾—selectä¸ç”¨åŠ é”ã€‚è€Œupdateã€insertè¿™äº›â€œå½“å‰è¯»â€ï¼Œå°±éœ€è¦å¦å¤–çš„æ¨¡å—æ¥è§£å†³äº†ã€‚ å†™ï¼ˆâ€œå½“å‰è¯»â€ï¼‰äº‹åŠ¡çš„éš”ç¦»çº§åˆ«è™½ç„¶åªå®šä¹‰äº†è¯»æ•°æ®çš„è¦æ±‚ï¼Œå®é™…ä¸Šè¿™ä¹Ÿå¯ä»¥è¯´æ˜¯å†™æ•°æ®çš„è¦æ±‚ã€‚ä¸Šæ–‡çš„â€œè¯»â€,å®é™…ä¸Šè®²çš„å¿«ç…§è¯»ï¼Œè€Œè¿™é‡Œè¯´çš„â€œå†™â€å°±æ˜¯å½“å‰è¯»äº†ã€‚ ä¸ºäº†è§£å†³å½“å‰è¯»ä¸­çš„å¹»è¯»é—®é¢˜ï¼ŒMySQLäº‹åŠ¡ä½¿ç”¨äº†Next-Keyé”ã€‚ Next-Keyé”Next-keyé”æ˜¯è¡Œé”å’ŒGAPï¼ˆé—´éš™é”ï¼‰çš„åˆå¹¶ï¼Œè¡Œé”ä¸Šæ–‡å·²ç»ä»‹ç»äº†ï¼Œæ¥ä¸‹æ¥GAPé—´éš™é”ã€‚è¡Œé”å¯ä»¥é˜²æ­¢ä¸åŒäº‹åŠ¡ç‰ˆæœ¬çš„æ•°æ®ä¿®æ”¹æäº¤æ—¶é€ æˆæ•°æ®å†²çªçš„æƒ…å†µã€‚ä½†å¦‚ä½•é¿å…åˆ«çš„äº‹åŠ¡æ’å…¥æ•°æ®å°±æˆäº†é—®é¢˜ã€‚æˆ‘ä»¬å¯ä»¥çœ‹çœ‹RRçº§åˆ«å’ŒRCçº§åˆ«çš„å¯¹æ¯”ï¼š RRçº§åˆ«ä¸­ï¼Œäº‹åŠ¡Aåœ¨updateååŠ é”ï¼Œäº‹åŠ¡Bæ— æ³•æ’å…¥æ–°æ•°æ®ï¼Œè¿™æ ·äº‹åŠ¡Aåœ¨updateå‰åè¯»çš„æ•°æ®ä¿æŒä¸€è‡´ï¼Œé¿å…äº†å¹»è¯»ï¼Œè¿™ä¸ªé”ï¼Œå°±æ˜¯GAPé”ã€‚ ä¸ä»…ç”¨è¡Œé”é”ä½äº†ç›¸åº”çš„æ•°æ®è¡Œï¼ŒåŒæ—¶ä¹Ÿåœ¨ä¸¤è¾¹çš„åŒºé—´ï¼ŒåŠ å…¥äº†gapé”ï¼Œè¿™æ ·äº‹åŠ¡Bå°±æ— æ³•åœ¨è¿™ä¸¤ä¸ªåŒºé—´insertè¿›æ–°æ•°æ®ã€‚ å—é™äºè¿™ç§å®ç°æ–¹å¼ï¼ŒInnoDBå¾ˆå¤šæ—¶å€™ä¼šé”ä½ä¸éœ€è¦é”çš„åŒºé—´ã€‚ å¦‚æœä½¿ç”¨çš„æ˜¯æ²¡æœ‰ç´¢å¼•çš„å­—æ®µï¼Œé‚£ä¹ˆä¼šç»™å…¨è¡¨åŠ å…¥gapé”ã€‚åŒæ—¶ï¼Œå®ƒä¸èƒ½åƒä¸Šæ–‡ä¸­è¡Œé”ä¸€æ ·ç»è¿‡MySQL Serverè¿‡æ»¤è‡ªåŠ¨è§£é™¤ä¸æ»¡è¶³æ¡ä»¶çš„é”ï¼Œå› ä¸ºæ²¡ç”¨ç´¢å¼•ï¼Œåˆ™è¿™äº›å­—æ®µä¹Ÿå°±æ²¡æœ‰æ’åºï¼Œä¹Ÿå°±æ²¡æœ‰åŒºé—´ã€‚é™¤éè¯¥äº‹åŠ¡æäº¤ï¼Œå¦åˆ™å…¶ä»–äº‹åŠ¡æ— æ³•æ’å…¥ä»»ä½•æ•°æ®ã€‚ è¡Œé”é˜²æ­¢åˆ«çš„äº‹åŠ¡ä¿®æ”¹æˆ–åˆ é™¤ï¼ŒGAPé”é˜²æ­¢åˆ«çš„äº‹åŠ¡æ–°å¢ï¼Œè¡Œé”å’ŒGAPé”ç»“åˆå½¢æˆçš„Next-KEYé”å…±åŒè§£å†³äº†RRçº§åˆ«åœ¨å†™æ•°æ®æ—¶çš„å¹»è¯»é—®é¢˜ã€‚ Serializableè¿™ä¸ªçº§åˆ«å¾ˆç®€å•ï¼Œè¯»åŠ å…±äº«é”ï¼Œå†™åŠ æ’ä»–é”ï¼Œè¯»å†™äº’æ–¥ã€‚ä½¿ç”¨çš„æ‚²è§‚çš„ç†è®ºï¼Œå®ç°ç®€å•ï¼Œæ•°æ®æ›´åŠ å®‰å…¨ï¼Œä½†æ˜¯å¹¶å‘èƒ½åŠ›éå¸¸å·®ã€‚å¦‚æœä½ çš„ä¸šåŠ¡å¹¶å‘ç‰¹åˆ«å°‘æˆ–è€…æ²¡æœ‰å¹¶å‘ï¼ŒåŒæ—¶åˆè¦æ±‚æ•°æ®åŠæ—¶å¯é çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨è¿™ç§æ¨¡å¼ã€‚ æ³¨æ„ï¼Œä¸è¦çœ‹å¾—selectå°±è¯´ä¸ä¼šåŠ é”äº†ï¼Œåœ¨Serializableè¿™ä¸ªçº§åˆ«ï¼Œè¿˜æ˜¯ä¼šåŠ é”çš„ã€‚ å‚è€ƒèµ„æ–™[1] InnoDBä¸­çš„äº‹åŠ¡éš”ç¦»çº§åˆ«ä¸é”çš„å…³ç³»]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>äº‹åŠ¡éš”ç¦»</tag>
        <tag>é”</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HashMapå’ŒConcurrentHashMap]]></title>
    <url>%2F2019%2F08%2F13%2FHashMap%E5%92%8CConCurrentHashMap%2F</url>
    <content type="text"><![CDATA[HashMapæºç åˆ†æ Mapè¿™æ ·çš„Key Valueåœ¨è½¯ä»¶å¼€å‘ä¸­æ˜¯éå¸¸ç»å…¸çš„ç»“æ„ï¼Œå¸¸ç”¨äºåœ¨å†…å­˜ä¸­å­˜æ”¾æ•°æ®ã€‚ HashMapä¼—æ‰€å‘¨çŸ¥HashMapåº•å±‚æ˜¯åŸºäºæ•°ç»„+é“¾è¡¨ç»„æˆçš„ï¼Œä¸è¿‡jdk1.7å’Œ1.8ä¸­å®ç°ç¨æœ‰ä¸åŒï¼Œä¸ºäº†ä¾¿äºç†è§£ï¼Œä»¥ä¸‹æºç åˆ†æä»¥JDK1.7ä¸ºä¸» å­˜å‚¨ç»“æ„å†…éƒ¨åŒ…å«äº†ä¸€ä¸ªEntryç±»å‹çš„æ•°ç»„tableã€‚ 1transient Entry[] table; Entryå­˜å‚¨ç€é”®å€¼å¯¹ã€‚å®ƒåŒ…å«äº†å››ä¸ªå­—æ®µï¼Œä»nextå­—æ®µæˆ‘ä»¬å¯ä»¥çœ‹å‡ºæ¥Entryæ˜¯ä¸€ä¸ªé“¾è¡¨ã€‚å³æ•°ç»„ä¸­çš„æ¯ä¸ªä½ç½®è¢«å½“æˆä¸€ä¸ªåŒï¼Œä¸€ä¸ªæ¡¶å­˜æ”¾ä¸€ä¸ªé“¾è¡¨ã€‚HashMapä½¿ç”¨æ‹‰é“¾æ³•æ¥è§£å†³å†²çªï¼ŒåŒä¸€ä¸ªé“¾è¡¨å­˜æ”¾å“ˆå¸Œå€¼å’Œæ•£åˆ—æ¡¶å–æ¨¡è¿ç®—ç»“æœç›¸åŒçš„Entryã€‚ ä¸‹é¢æ˜¯1.7ä¸­çš„å®ç°ã€‚ 123456789101112131415161718192021222324252627282930313233343536static class Entry&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; &#123; final K key; V value; Entry&lt;K, V&gt; next; int hash; Entry(int h, K k, V v, Entry&lt;K,V&gt; n)&#123; value = v; key = k; next = n; hash = h; &#125; public final K getKey()&#123; return key; &#125; public final boolean equals(Object o)&#123; if (!(o instanceof Map.Entry)) return false; Map.Entry e = (Map.Entry)o; Object k1 = getKey(); Object k2 = e.getKey(); if(k1 == k2 || (k1 != null &amp;&amp; k1.equals(k2)))&#123; Object v1 = getValue(); Object v2 = e.getValue(); if(v1 == v2 || (v1 != null &amp;&amp; v1.equals(v2))) return true; &#125; return false; &#125; public final int hashCode()&#123; return Object.hashCode(getKey()) ^ Object.hashCode(getValue()); &#125; public final String toString() &#123; return getKey() + "=" + getValue(); &#125;&#125; æ‹‰é“¾æ³•çš„å·¥ä½œåŸç†1234HashMap&lt;String, String&gt; map = new HashMap&lt;&gt;();map.put("K1", "V1");map.put("K2", "V2");map.put("K3", "V3"); æ–°å»ºä¸€ä¸ªHashMapï¼Œé»˜è®¤å¤§å°ä¸º16ï¼› æ’å…¥&lt;K1, V1&gt;é”®å€¼å¯¹ï¼Œå…ˆè®¡ç®—K1çš„hashCodeä¸º115ï¼Œä½¿ç”¨é™¤ç•™ä½™æ•°æ³•å¾—åˆ°æ‰€åœ¨çš„æ¡¶ä¸‹æ ‡115%16=3 æ’å…¥&lt;K2, V2&gt;é”®å€¼å¯¹ï¼Œå…ˆè®¡ç®—K2çš„hashCodeä¸º118ï¼Œä½¿ç”¨é™¤ç•™ä½™æ•°æ³•è¾¾åˆ°æ‰€åœ¨çš„æ¡¶ä¸‹æ ‡118%16=6ï¼› æ’å…¥&lt;K3, V3&gt;é”®å€¼å¯¹ï¼Œè®¡ç®—K3çš„hashCodeä¸º118ï¼Œä½¿ç”¨é™¤ç•™ä½™æ•°æ³•å¾—åˆ°æ‰€åœ¨çš„æ¡¶ä¸‹æ ‡118%16=6ï¼Œæ’åœ¨&lt;K2,V2&gt;å‰é¢ã€‚ è¿™é‡Œåº”è¯¥æ³¨æ„åˆ°é“¾è¡¨çš„æ’å…¥æ˜¯ä»¥å¤´æ’æ³•è¿›è¡Œçš„ã€‚ä¾‹å¦‚ä¸Šé¢çš„&lt;K3,V3&gt;ä¸æ˜¯æ’åœ¨&lt;K2,V2&gt;åé¢ï¼Œè€Œæ˜¯æ’å…¥åœ¨é“¾è¡¨å¤´éƒ¨ã€‚ æŸ¥æ‰¾éœ€è¦åˆ†æˆä¸¤æ­¥è¿›è¡Œï¼š è®¡ç®—é”®å€¼æ‰€åœ¨çš„æ¡¶ åœ¨é“¾è¡¨ä¸Šå¾ªåºæŸ¥æ‰¾ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¾ç„¶ä¸é“¾è¡¨çš„é•¿åº¦æˆæ­£æ¯” HashMapæ ¸å¿ƒæˆå‘˜å˜é‡123456789101112131415static final int DEFAULT_INITIAL_CAPACITY = 1&lt;&lt;4;static final int MAXMUM_CAPACITY = 1&lt;&lt;30;static final float DEFAULT_LOAD_FACTOR = 0.75f;static final Entry&lt;?,?&gt; [] EMPTY_TABLE = &#123;&#125;;transient Entry&lt;K,V&gt;[] table = (Entry&lt;K,V&gt;[]) EMPTY_TABLE;transient int size;int threshold;final float loadFactor; åˆå§‹åŒ–æ¡¶å¤§å°ï¼Œå› ä¸ºåº•å±‚æ˜¯æ•°ç»„ï¼Œæ‰€ä»¥è¿™æ˜¯æ•°ç»„é»˜è®¤çš„å¤§å°ï¼Œ16(0-15); æ¡¶çš„æœ€å¤§å€¼ï¼Œ2^30 é»˜è®¤çš„è´Ÿè½½å› å­ï¼ˆ0.75ï¼‰ tableæ˜¯çœŸæ­£å­˜æ”¾æ•°æ®çš„æ•°ç»„ sizeæ˜¯Mapçš„çœŸå®å­˜æ”¾å…ƒç´ æ•°é‡ï¼Œ thresholdï¼Œæ¡¶å¤§å°å¯åœ¨åˆå§‹åŒ–æ—¶æ˜¾å¼æŒ‡å®š è´Ÿè½½å› å­ï¼Œå¯åœ¨åˆå§‹åŒ–æ—¶æ˜¾ç¤ºæŒ‡å®šã€‚ ç»™å®šçš„é»˜è®¤å®¹é‡ä¸º16ï¼Œè´Ÿè½½å› å­ä¸º0.75.Mapåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ä¸æ–­çš„å¾€é‡Œé¢å­˜æ”¾æ•°æ®ï¼Œå½“æ•°é‡è¾¾åˆ°äº†16*0.75=12æ—¶ï¼Œå°±éœ€è¦å°†å½“å‰16çš„å®¹é‡è¿›è¡Œæ‰©å®¹ã€‚è€Œæ‰©å®¹è¿™ä¸ªæ“ä½œè®¾è®¡rehashã€å¤åˆ¶æ•°æ®ç­‰æ“ä½œï¼Œæ‰€ä»¥éå¸¸æ¶ˆè€—æ€§èƒ½ã€‚ å› æ­¤é€šå¸¸å»ºè®®èƒ½æå‰é¢„ä¼°HashMapçš„å¤§å°ï¼Œå°½é‡çš„å‡å°‘æ‰©å®¹å¸¦æ¥çš„æ€§èƒ½æŸè€—ã€‚ çŸ¥æ™“äº†åŸºæœ¬ç»“æ„ï¼Œä¸‹é¢æ¥çœ‹çœ‹é‡è¦çš„putå’Œgetæ“ä½œã€‚ putæ“ä½œ1234567891011121314151617181920212223242526public V put(K key, V value)&#123; //åˆ¤æ–­å½“å‰æ•°ç»„æ˜¯å¦éœ€è¦åˆå§‹åŒ– if(table == EMPTY_TABLE)&#123; inflateTable(threshold); &#125; //é”®ä¸ºç©ºæ—¶å•ç‹¬å¤„ç† if(key == null) return putForNullKey(value); int hash = hash(key); //ç¡®å®šæ¡¶ä¸‹æ ‡ int i = indexFor(hash, table.length); // å…ˆæ‰¾å‡ºæ˜¯å¦å·²ç»å­˜åœ¨é”®ä¸ºkeyçš„é”®å€¼å¯¹ï¼Œå¦‚æœå­˜åœ¨çš„è¯å°±æ›´æ–°è¿™ä¸ªé”®å€¼å¯¹çš„å€¼ä¸ºvalueï¼Œå¹¶è¿”å›åŸæ¥çš„å€¼ for(Entry&lt;K, V&gt; e = table[i]; e != null; e=e.next)&#123; Object k; if(e.hash == hash &amp;&amp; ((k=e.key) == key || key.equals(k)))&#123; V oldValue = e.valu; e.value = value; e.recordAccess(this); return oldValue; &#125; &#125; modCount++; //æ’å…¥æ–°é”®å€¼å¯¹ addEntry(hash, key, value, i); return null;&#125; HashMapå…è®¸æ’å…¥é”®ä¸ºnullçš„é”®å€¼å¯¹ï¼Œä½†æ˜¯å› ä¸ºæ— æ³•è°ƒç”¨nullçš„hashCode()æ–¹æ³•ï¼Œä¹Ÿå°±æ— æ³•ç¡®å®šè¯¥é”®å€¼å¯¹çš„æ¡¶ä¸‹æ ‡ï¼Œåªèƒ½é€šè¿‡å¼ºåˆ¶æŒ‡å®šä¸€ä¸ªæ¡¶ä¸‹æ ‡æ¥å­˜æ”¾ã€‚HashMapä½¿ç”¨ç¬¬0ä¸ªæ¡¶å­˜æ”¾é”®ä¸ºnullçš„é”®å€¼å¯¹ã€‚ ä½¿ç”¨é“¾è¡¨çš„å¤´æ’æ³•ï¼Œä¹Ÿå°±æ˜¯æ–°çš„é”®å€¼å¯¹æ’åœ¨é“¾è¡¨çš„å¤´éƒ¨ï¼Œè€Œä¸æ˜¯é“¾è¡¨çš„å°¾éƒ¨ã€‚ 12345678910111213141516void addEntry(int hash, K key, V value, int bucketIndex)&#123; //åˆ¤æ–­æ˜¯å¦éœ€è¦æ‰©å®¹ if((size &gt;= threshold) &amp;&amp; (null != table[bucketIndex]))&#123; //å¦‚æœéœ€è¦å°±è¿›è¡Œä¸¤å€æ‰©å®¹ï¼Œå¹¶å°†å½“å‰çš„keyé‡æ–°hashå¹¶å®šä½ resize(2 * table.length); hash = (null != key)?hash(key):0; bucketIndex = indexFor(hash, table.length); &#125; createEntry(hash, key, value, buckeyIndex);&#125;void createEntry(int hash, K key, V value, int bucketIndex)&#123; Entry&lt;K,V&gt; e = table[bucketIndex]; //å¤´æ’æ³•ï¼Œé“¾è¡¨å¤´éƒ¨æŒ‡å‘æ–°çš„é”®å€¼å¯¹ï¼Œå°†å½“å‰ä½ç½®çš„æ¡¶ä¼ å…¥æ–°å»ºçš„æ¡¶ä¸­ã€‚ table[bucketIndex] = new Entry&lt;&gt;(hash, key, value, e); size++;&#125; getæ“ä½œ123456789101112131415161718192021public V get(Object key)&#123; if (key == null)&#123; return getForNullKey(); &#125; Entry&lt;K, V&gt; entry = getEntry(key); return null == entry ? null : entry.getValue();&#125;final Entry&lt;K,V&gt; getEntry(Object key)&#123; if(size == 0)&#123; return null; &#125; int hash = (key == null)? 0:hash(key); for (Entry&lt;K,V&gt; e = table[indexFor(hash, table.length)]; e != null; e = e.next)&#123; Object k; if(e.hash == hash &amp;&amp; ((k = e.key) == key) || (key != null) &amp;&amp; key.equals(k)) return e; &#125; return null;&#125; é¦–å…ˆæ ¹æ®keyè®¡ç®—å‡ºhashCodeï¼Œç„¶åå®šä½åˆ°å…·ä½“çš„æ¡¶ä¸­ï¼› åˆ¤æ–­è¯¥ä½ç½®æ˜¯å¦ä¸ºé“¾è¡¨ï¼› ä¸æ˜¯é“¾è¡¨å°±æ ¹æ®keyï¼Œkeyçš„hashCodeæ˜¯å¦ç›¸ç­‰æ¥è¿”å›å€¼ï¼› ä¸ºé“¾è¡¨åˆ™éœ€è¦éå†ç›´åˆ°keyåŠhashCodeç›¸ç­‰æ—¶å°±è¿”å›å€¼ å•¥éƒ½æ²¡å–åˆ°å°±ç›´æ¥è¿”å›nullã€‚ putæ“ä½œä¸­çš„ä¸€äº›å°å¿ƒæœºè®¡ç®—hashå€¼123456789101112131415final int hash(Object k)&#123; int h = hashSeed; if (0 != h &amp;&amp; k instaceof String)&#123; return sun.misc.Hashing.stringHash32((String) k); &#125; h ^= k.hashcode(); //ç±»ä¼¼äºæ‰°åŠ¨å‡½æ•° h ^= (h&gt;&gt;&gt;20) ^(h &gt;&gt;&gt; 12); return h ^ (h &gt;&gt;&gt; 7) ^(h &gt;&gt;&gt; 4);&#125;public final int hashCode()&#123; return Objects.hashCode(key) ^ Objects.hashCode(value);&#125; å–æ¨¡å¦x=1&lt;&lt;4,å³xä¸º2çš„å››æ¬¡æ–¹ï¼Œå®ƒå…·æœ‰ä»¥ä¸‹æ€§è´¨ï¼š 12x : 0001 0000x-1: 0000 1111 ä»¤ä¸€ä¸ªæ•°yä¸x-1åšä¸è¿ç®—ï¼Œå¯ä»¥å»é™¤yä½çº§è¡¨ç¤ºçš„ç¬¬å››ä½ä»¥ä¸Šæ•°ï¼š 123y : 1011 0010x-1 : 0000 1111y&amp;(x-1): 0000 0010 è¿™ä¸ªæ€§è´¨å’Œyå¯¹xå–æ¨¡æ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œä½è¿ç®—çš„ä»£ä»·æ¯”æ±‚æ¨¡è¿ç®—å°å¾—å¤šï¼Œå› æ­¤åœ¨è¿™ç§è®¡ç®—æ—¶ç”¨ä½è¿ç®—çš„è¯èƒ½å¸¦æ¥æ›´é«˜çš„æ€§èƒ½ã€‚ ç¡®å®šæ¡¶ä¸‹æ ‡çš„æœ€åä¸€æ­¥æ˜¯å°†keyçš„hashå€¼å¯¹æ¡¶ä¸ªæ•°å–æ¨¡ï¼šhash%capacityï¼Œå¦‚æœèƒ½ä¿è¯capacityä¸º2çš„næ¬¡æ–¹ï¼Œé‚£ä¹ˆå°±å¯ä»¥å°†è¿™ä¸ªæ“ä½œè½¬æ¢ä¸ºä½è¿ç®—ã€‚ 123static int indexFor(int h, int length)&#123; return h &amp; (length-1);&#125; æ‰©å®¹åŸºæœ¬åŸç†è®¾HashMapçš„tableé•¿åº¦ä¸ºMï¼Œéœ€è¦å­˜å‚¨çš„é”®å€¼å¯¹æ•°é‡ä¸ºNï¼Œå¦‚æœå“ˆå¸Œå‡½æ•°æ»¡è¶³å‡åŒ€æ€§çš„è¦æ±‚ï¼Œé‚£ä¹ˆæ¯æ¡é“¾è¡¨çš„é•¿åº¦å¤§çº¦ä¸ºN/Mï¼Œå› æ­¤å¹³å‡æŸ¥æ‰¾æ¬¡æ•°çš„å¤æ‚åº¦ä¸ºO(M/N). ä¸ºäº†è®©æŸ¥æ‰¾çš„æˆæœ¬é™ä½ï¼Œåº”è¯¥å°½å¯èƒ½ä½¿å¾—N/Må°½å¯èƒ½å°ï¼Œå› æ­¤éœ€è¦ä¿è¯Må°½å¯èƒ½å¤§ï¼Œä¹Ÿå°±æ˜¯è¯´tableè¦å°½å¯èƒ½å¤§ã€‚HashMapé‡‡ç”¨åŠ¨æ€æ‰©å®¹æ¥æ ¹æ®å½“å‰çš„Nå€¼æ¥è°ƒæ•´Må€¼ï¼Œä½¿å¾—ç©ºé—´æ•ˆç‡å’Œæ—¶é—´æ•ˆç‡éƒ½èƒ½å¾—åˆ°ä¿è¯ã€‚ å’Œæ‰©å®¹ç›¸å…³çš„å‚æ•°æœ‰ï¼šcapacityï¼Œsizeï¼Œthresholdå’Œload_factorã€‚ å‚æ•° å«ä¹‰ capacity tableçš„å®¹é‡å¤§å°ï¼Œé»˜è®¤ä¸º16ã€‚capacityå¿…é¡»ä¿è¯ä¸º2çš„næ¬¡æ–¹ size é”®å€¼å¯¹çš„æ•°é‡ threshold sizeçš„ä¸´ç•Œå€¼ï¼Œå½“sizeå¤§äºç­‰äºthresholdå°±å¿…é¡»è¿›è¡Œæ‰©å®¹æ“ä½œ load_factor è£…è½½å› å­ï¼Œtableèƒ½å¤Ÿä½¿ç”¨çš„æ¯”ä¾‹ï¼Œthreshold=capacity*load_factor å½“éœ€è¦æ‰©å®¹æ—¶ï¼Œä»¤capacityä¸ºåŸæ¥çš„ä¸¤å€ã€‚æ‰©å®¹ä½¿ç”¨resize()å®ç°ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ‰©å®¹æ“ä½œåŒæ ·éœ€è¦æŠŠoldTableçš„æ‰€æœ‰é”®å€¼å¯¹é‡æ–°æ’å…¥åˆ°newTableä¸­ï¼Œå› æ­¤è¿™ä¸€æ­¥æ˜¯éå¸¸è´¹æ—¶çš„ã€‚ 1234567891011121314151617181920212223242526272829void resize(int newCapacity)&#123; Entry[] oldTable = table; int oldCapacity = oldTable.length; if(oldCapacity == MAXIMUM_CAPACITY)&#123; threshold = Integer.MAX_VALUE; return; &#125; Entry[] newTable = new Entry[newCapacity]; transfer(newTable); table = newTable; threshold = (int)(newCapacity * loadFactor);&#125;void transfer(Entry[] newTable)&#123; Entry[] src = table; int newCapacity = newTable.length; for(int j=0; j&lt;src.length; j++)&#123; Entry&lt;K,V&gt; e = src[j]; if(e != null)&#123; src[j] = null; do&#123; Entry&lt;K,V&gt; next = e.next; int i = indexFor(e.hash, newCapacity); e.next = newTable[i]; newTable[i] = e; e = next; &#125;while(e != null); &#125; &#125;&#125; æ‰©å®¹-é‡æ–°è®¡ç®—æ¡¶ä¸‹æ ‡åœ¨è¿›è¡Œæ‰©å®¹æ—¶ï¼Œéœ€è¦æŠŠé”®å€¼å¯¹é‡æ–°æ”¾åˆ°å¯¹åº”çš„æ¡¶ä¸Šã€‚HashMapä½¿ç”¨äº†ä¸€ä¸ªç‰¹æ®Šçš„æœºåˆ¶ã€‚å¯ä»¥é™ä½é‡æ–°è®¡ç®—æ¡¶ä¸‹æ ‡çš„æ“ä½œã€‚å‡è®¾æºæ•°ç»„é•¿åº¦ä¸ºcapacityä¸º16ï¼Œæ‰©å®¹ä¹‹ånew capacityä¸º32. 12capacity : 0001 0000newCapacity: 0010 0000 å¯¹äºä¸€ä¸ªkeyï¼Œ å¦‚æœå®ƒçš„å“ˆå¸Œå€¼å¦‚æœåœ¨ç¬¬äº”ä½ä¸Šä¸ºé›¶ï¼Œé‚£ä¹ˆå–æ¨¡å¾—åˆ°çš„ç»“æœå’Œä¹‹å‰ä¸€æ ·ã€‚ å¦‚æœä¸º1ï¼Œé‚£ä¹ˆå¾—åˆ°çš„ç»“æœä¸ºåŸæ¥çš„ç»“æœ+16. è®¡ç®—æ•°ç»„å®¹é‡HashMapæ„é€ å‡½æ•°å…è®¸ç”¨æˆ·ä¼ å…¥çš„å®¹é‡ä¸æ˜¯2çš„næ¬¡æ–¹ï¼Œå› ä¸ºå®ƒå¯ä»¥è‡ªåŠ¨åœ°å°†ä¼ å…¥çš„å®¹é‡è½¬æ¢ä¸º2çš„næ¬¡æ–¹ã€‚å…ˆè€ƒè™‘å¦‚ä½•æ±‚ä¸€ä¸ªæ•°çš„æ©ç ï¼Œå¯¹äº10010000ï¼Œå®ƒçš„æ©ç ä¸º11111111ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•å¾—åˆ°ï¼š 123mask |= mask &gt;&gt; 1 1101 1000mask |= mask &gt;&gt; 2 1111 1110mask |= mask &gt;&gt; 4 1111 1111 mask+1æ˜¯å¤§äºåŸå§‹æ•°å­—çš„æœ€å°çš„2çš„næ¬¡æ–¹ã€‚ 12num 1001 0000mask+1 1000 0000 ä¸€ä¸‹æ˜¯HashMapä¸­è®¡ç®—æ•°ç»„å®¹é‡çš„ä»£ç ï¼š 12345678910static final int tableSizeFor(int cap)&#123; //ä¸ºäº†é¿å…capæœ¬æ¥å°±æ˜¯2çš„næ¬¡æ–¹çš„æƒ…å†µ int n = cap -1; n |= n &gt;&gt;&gt; 1; n |= n &gt;&gt;&gt; 2; n |= n &gt;&gt;&gt; 4; n |= n &gt;&gt;&gt; 8; n |= n &gt;&gt;&gt; 16; return (n&lt;0) ? 1 : (n &gt;= MAXIMUM_CAPACITY) ? MAXIMUM_CAPACITY : n +1;&#125; Base 1.81.7æœ‰ä¸€ä¸ªå¾ˆæ˜æ˜¾éœ€è¦ä¼˜åŒ–çš„ç‚¹ï¼Œå½“Hashå†²çªä¸¥é‡æ—¶ï¼Œåœ¨æ¡¶ä¸Šå½¢æˆçš„é“¾è¡¨ä¼šå˜å¾—è¶Šæ¥è¶Šé•¿ï¼Œè¿™æ ·åœ¨æŸ¥è¯¢æ—¶çš„æ•ˆç‡å°±ä¼šè¶Šæ¥è¶Šä½ï¼›æ—¶é—´å¤æ‚åº¦ä¸ºO(N). å› æ­¤1.8ä¸­é‡ç‚¹ä¼˜åŒ–äº†è¿™ä¸ªæŸ¥è¯¢æ•ˆç‡ å’Œ1.7å¤§ä½“ä¸Šéƒ½å·®ä¸å¤šï¼Œæœ‰å‡ ä¸ªé‡è¦çš„åŒºåˆ«ï¼š TREEIFY_THRESHOLD = 8, ç”¨äºåˆ¤æ–­æ˜¯å¦éœ€è¦å°†é“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘çš„é˜ˆå€¼ï¼› HashEntryä¿®æ”¹ä¸ºNodeã€‚ Nodeçš„æ ¸å¿ƒç»„æˆå’ŒHashEntryä¸€æ ·ï¼Œå­˜æ”¾çš„éƒ½æ˜¯key value hashCode nextç­‰æ•°æ®ã€‚ å…¶putæ“ä½œè¦æ¯”1.7å¤æ‚ä¸€äº›ï¼š åˆ¤æ–­å½“å‰æ¡¶æ˜¯å¦ä¸ºç©ºï¼Œ ç©ºçš„å°±éœ€è¦åˆå§‹åŒ–ï¼ˆresizeä¸­ä¼šåˆ¤æ–­æ˜¯å¦è¿›è¡Œåˆå§‹åŒ–ï¼‰ æ ¹æ®å½“å‰keyçš„hashCodeå®šä½åˆ°å…·ä½“çš„æ¡¶å¹¶åˆ¤æ–­æ˜¯å¦ä¸ºç©ºï¼Œä¸ºç©ºè¡¨æ˜æ²¡æœ‰Hashå†²çªå°±ç›´æ¥åœ¨å½“å‰ä½ç½®åˆ›å»ºä¸€ä¸ªæ–°æ¡¶å³å¯ã€‚ å¦‚æœå½“å‰æ¡¶æœ‰å€¼ï¼ˆHashå†²çªï¼‰ï¼Œé‚£ä¹ˆå°±è¦æ¯”è¾ƒå½“å‰æ¡¶ä¸­çš„keyã€keyçš„hashCodeäºå†™å…¥çš„keyæ˜¯å¦ç›¸ç­‰ï¼Œç›¸ç­‰å°±å¤åˆ¶ç»™eï¼Œç„¶åç»Ÿä¸€è¿”å›ã€‚ å¦‚æœå½“å‰æ¡¶ä¸ºçº¢é»‘æ ‘ï¼Œé‚£ä¹ˆä¹…æŒ‰ç…§çº¢é»‘æ ‘çš„æ–¹å¼å†™å…¥æ•°æ®ã€‚ å¦‚æœæ˜¯ä¸ªé“¾è¡¨ï¼Œå°±éœ€è¦å°†å½“å‰çš„keyã€valueå°è£…æˆä¸€ä¸ªæ–°èŠ‚ç‚¹å†™å…¥åˆ°å½“å‰æ¡¶çš„åé¢ï¼ˆå½¢æˆé“¾è¡¨ï¼‰ã€‚ï¼ˆ1.7æ˜¯å¤´æ’æ³•ï¼‰ æ¥ç€åˆ¤æ–­å½“å‰é“¾è¡¨çš„å¤§å°æ˜¯å¦å¤§äºé¢„è®¾çš„é˜ˆå€¼ï¼Œå¤§äºæ—¶å°±è¦è½¬æ¢ä¸ºçº¢é»‘æ ‘ã€‚ å¦‚æœåœ¨éå†è¿‡ç¨‹ä¸­æ‰¾åˆ°keyç›¸åŒæ—¶ç›´æ¥é€€å‡ºéå† å¦‚æœe != null å°±ç›¸å½“äºå­˜åœ¨ç›¸åŒçš„keyï¼Œé‚£å°±éœ€è¦å°†å€¼è¦†ç›–ã€‚ æœ€ååˆ¤æ–­æ˜¯å¦éœ€è¦è¿›è¡Œæ‰©å®¹ã€‚ getæ–¹æ³•ï¼š é¦–å…ˆå°†key hashä¹‹åå–å¾—æ‰€å®šä½çš„æ¡¶ã€‚ å¦‚æœæ¡¶ä¸ºç©ºç›´æ¥è¿”å›nullã€‚ å¦åˆ™åˆ¤æ–­æ¡¶çš„ç¬¬ä¸€ä¸ªä½ç½®ï¼ˆæœ‰å¯èƒ½æ˜¯é“¾è¡¨ã€çº¢é»‘æ ‘ï¼‰çš„keyæ˜¯å¦ä¸ºæŸ¥è¯¢çš„keyï¼Œæ˜¯å°±ç›´æ¥è¿”å›valueã€‚ å¦‚æœç¬¬ä¸€ä¸ªä¸åŒ¹é…ï¼Œåˆ™åˆ¤æ–­å®ƒçš„ä¸‹ä¸€ä¸ªæ˜¯çº¢é»‘æ ‘è¿˜æœ‰é“¾è¡¨ã€‚ çº¢é»‘æ ‘å°±æŒ‰ç…§æ ‘çš„æŸ¥æ‰¾æ–¹æ³•è¿”å›å€¼ã€‚ ä¸ç„¶å°±æŒ‰ç…§é“¾è¡¨çš„æ–¹å¼éå†åŒ¹é…è¿”å›å€¼ã€‚ ä»è¿™ä¸¤ä¸ªæ ¸å¿ƒæ–¹æ³•å¯ä»¥çœ‹å‡º1.8å¯¹å¤§é“¾è¡¨åšäº†ä¼˜åŒ–ï¼Œä¿®æ”¹ä¸ºçº¢é»‘æ ‘ä¹‹åæŸ¥è¯¢æ•ˆç‡ç›´æ¥æé«˜åˆ°äº†O(logn). ä½†æ˜¯HashMapåŸæœ‰çš„é—®é¢˜ä¹Ÿéƒ½å­˜åœ¨ï¼Œæ¯”å¦‚åœ¨å¹¶å‘åœºæ™¯ä¸‹ä½¿ç”¨å®¹æ˜“å‡ºç°æ­»å¾ªç¯ã€‚ 123456789final HashMap&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();for(int i=0; i &lt; 1000; i++)&#123; new Thread(new Runnable()&#123; @Override public void run()&#123; map.put(UUID.randomUUID().toString(), ""); &#125; &#125;).start();&#125; åœ¨HashMapæ‰©å®¹æ—¶ä¼šè°ƒç”¨resize()æ–¹æ³•ï¼Œè¿™é‡Œçš„å¹¶å‘æ“ä½œå®¹æ˜“åœ¨ä¸€ä¸ªæ¡¶ä¸Šå½¢æˆç¯å½¢é“¾è¡¨ï¼›è¿™æ ·å½“è·å–ä¸€ä¸ªkeyæ—¶ï¼Œè®¡ç®—å‡ºçš„indexæ­£å¥½æ˜¯ç¯å½¢é“¾è¡¨çš„ä¸‹æ ‡å°±ä¼šå‡ºç°æ­»å¾ªç¯ã€‚ éå†æ–¹å¼HashMapæœ‰ä»¥ä¸‹å‡ ç§éå†æ–¹å¼ï¼š 1234567891011Iterator&lt;Map.Entry&lt;String, String&gt;&gt; entryIterator = map.entryset().iterator();while(entryIterator.hasNext())&#123; Map.Entry&lt;String,String&gt; next = entryItreator.next(); System.out.println("key="+next.getKey() + " value="+next.getValue());&#125;Iterator&lt;String&gt; iterator = map.keySet().iterator();while(iterator.hasNext())&#123; String key = iterator.next(); System.out.printlln("key=" + key + " value="+map.get(key));&#125; å¼ºçƒˆå»ºè®®ä½¿ç”¨ç¬¬ä¸€ç§EntrySetè¿›è¡Œéå†ã€‚ç¬¬ä¸€ç§å¯ä»¥æŠŠkey valueåŒæ—¶å–å‡ºï¼Œç¬¬äºŒç§è¿˜å¾—éœ€è¦é€šè¿‡keyå»ä¸€æ¬¡valueï¼Œæ•ˆç‡è¾ƒä½ã€‚ æ€»ç»“ï¼šæ— è®ºæ˜¯ 1.7 è¿˜æ˜¯ 1.8 å…¶å®éƒ½èƒ½çœ‹å‡º JDK æ²¡æœ‰å¯¹å®ƒåšä»»ä½•çš„åŒæ­¥æ“ä½œï¼Œæ‰€ä»¥å¹¶å‘ä¼šå‡ºé—®é¢˜ï¼Œç”šè‡³ 1.7 ä¸­å‡ºç°æ­»å¾ªç¯å¯¼è‡´ç³»ç»Ÿä¸å¯ç”¨ï¼ˆ1.8 å·²ç»ä¿®å¤æ­»å¾ªç¯é—®é¢˜ï¼‰ã€‚ ä¸‹é¢å°±å¯ä»¥å¼•å…¥ConcurrentHashMapäº†ã€‚ ConcurrentHashMapæºç åˆ†æBase1.71.å­˜å‚¨ç»“æ„123456static final class HashEntry&lt;K,V&gt; &#123; final int hash; final K key; volatile V value; volatile HashEntry&lt;K,V&gt; next;&#125; ConcurrentHashMapå’ŒHashMapå®ç°ä¸Šç±»ä¼¼ï¼Œæ ¸å¿ƒæ•°æ®å¦‚valueï¼Œä»¥åŠé“¾è¡¨éƒ½æ˜¯ç”±volatileä¿®é¥°ï¼Œä¿è¯äº†è·å–æ—¶çš„å¯è§æ€§ã€‚æœ€ä¸»è¦çš„å·®åˆ«æ˜¯ConcurrentHashMapé‡‡ç”¨äº†åˆ†æ®µé”(Segment)ï¼Œæ¯ä¸ªåˆ†æ®µé”ç»´æŠ¤è€…å‡ ä¸ªæ¡¶ï¼ˆHashEntryï¼‰ï¼Œå¤šä¸ªçº¿ç¨‹å¯ä»¥åŒæ—¶è®¿é—®ä¸åŒåˆ†æ®µé”ä¸Šçš„æ¡¶ï¼Œä»è€Œä½¿å…¶å¹¶å‘åº¦æ›´é«˜ï¼ˆå¹¶å‘åº¦å°±æ˜¯Segmentçš„ä¸ªæ•°ï¼‰ã€‚ä¸€ä¸ªçº¿ç¨‹å ç”¨æ‰€è®¿é—®ä¸€ä¸ªSegmentæ—¶ï¼Œä¸ä¼šå½±å“åˆ°å…¶å®ƒçš„Segmentã€‚ Segmentç»§æ‰¿è‡ªReentrantLockã€‚ 12345678910111213static final class Segment&lt;K, V&gt; extends ReentrantLock implements Serializable&#123; private static final long serialVersionUID = xxxxxxx; static final int MAX_SCAN_RETRIES = Runtime.getRuntime().availableProcessors() &gt; 1?64:1; transient volatile HashEntry&lt;K,V&gt;[] table; transient int count; transient int modCount; transient int threshold; final float loadFactor;&#125;final Segment&lt;K,V&gt;[] segments;static final int DEFAULT_CONCURRENCY_LEVEL = 16; é»˜è®¤çš„å¹¶å‘çº§åˆ«ä¸º16ï¼Œä¹Ÿå°±æ˜¯è¯´é»˜è®¤åˆ›å»º16ä¸ªSegmentã€‚ 2. ç”¨åˆ†ç¦»é”å®ç°å¤šä¸ªçº¿ç¨‹é—´çš„å¹¶å‘å†™æ“ä½œåœ¨ConcurrentHashMapä¸­ï¼Œçº¿ç¨‹å¯¹æ˜ å°„è¡¨åšè¯»æ“ä½œæ—¶ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¸éœ€è¦åŠ é”å°±å¯ä»¥å®Œæˆã€‚å¯¹å®¹å™¨åšç»“æ„æ€§ä¿®æ”¹çš„æ“ä½œæ‰éœ€è¦åŠ é”ã€‚ä»¥putæ“ä½œä¸ºä¾‹ï¼š é¦–å…ˆæ ¹æ®keyè®¡ç®—å‡ºå¯¹åº”çš„hashå€¼ï¼š 1234567public V put(K key, V value)&#123; int (value == null)&#123; throw new NullPointerException(); &#125; int hash = hash(key.hashCode()); return segmentFor(hash).put(key, hash, value, false);&#125; ç„¶åï¼Œæ ¹æ®hashå€¼æ‰¾åˆ°å¯¹åº”çš„Segmentå¯¹è±¡ã€‚ 12345678//ä½¿ç”¨ key çš„æ•£åˆ—ç æ¥å¾—åˆ° segments æ•°ç»„ä¸­å¯¹åº”çš„ Segmentfinal Segment&lt;K,V&gt; segmentFor(int hash)&#123; //å°†æ•£åˆ—å€¼å³ç§»SegmentShiftä½ï¼Œå¹¶åœ¨é«˜ä½å¡«å……0 //ç„¶åæŠŠå¾—åˆ°çš„å€¼ä¸SegmentMaskåšä¸è¿ç®— //ä»è€Œå¾—åˆ°hashå€¼å¯¹åº”çš„Segmentæ•°ç»„çš„ä¸‹æ ‡å€¼ //æœ€åæ ¹æ®ä¸‹æ ‡å€¼è¿”å›æ•£åˆ—ç å¯¹åº”çš„Segmentå¯¹è±¡ return segments[(hash&gt;&gt;&gt; segmentShift) &amp; segmentMask]; &#125; æœ€åï¼Œåœ¨è¿™ä¸ªSegmentä¸­æ‰§è¡Œå…·ä½“çš„putæ“ä½œï¼š 123456789101112131415161718192021222324252627282930313233343536373839V put(K key, int hash, V value, boolean onlyIfAbsent)&#123; //åŠ é”ï¼Œè¿™é‡Œæ˜¯é”å®šæŸä¸ªSegmentè€Œéæ•´ä¸ªConcurrentHashMap lock(); try &#123; int c = count; //å¦‚æœè¶…è¿‡å†æ•£åˆ—çš„é˜ˆå€¼ï¼Œæ‰§è¡Œå†æ•£åˆ—ï¼Œtableæ•°ç»„çš„é•¿åº¦æ‰©å……ä¸€å€ if(c++ &gt; threshold)&#123; rehash(); &#125; HashEntry&lt;K,V&gt;[] tab = table; // æŠŠæ•£åˆ—ç å€¼ä¸ table æ•°ç»„çš„é•¿åº¦å‡ 1 çš„å€¼ç›¸â€œä¸â€ // å¾—åˆ°è¯¥æ•£åˆ—ç å¯¹åº”çš„ table æ•°ç»„çš„ä¸‹æ ‡å€¼ int index = hash &amp; (tab.length-1); //æ‰¾åˆ°æ•£åˆ—ç å¯¹åº”çš„å…·ä½“çš„é‚£ä¸ªæ¡¶ HashEntry&lt;K, V&gt; first = tab[index]; HashEntry&lt;K,V&gt; e = first; while (e != null &amp;&amp; (e.hash != hash || !key.equals(e.key)))&#123; e = e.next; &#125; V oldValue; if(e != null)&#123; //å¦‚æœé”®å€¼å¯¹å·²ç»å­˜åœ¨ oldValue = e.value; if(!onlyIfAbsent)&#123; e.value = value; &#125; &#125;else&#123; oldValue = null; // è¦æ·»åŠ æ–°èŠ‚ç‚¹åˆ°é“¾è¡¨ä¸­ï¼Œæ‰€ä»¥ modCont è¦åŠ  1 ++modCount; tab[index] = new HashEntry&lt;K,V&gt;(key, hash, first, value); count = c; &#125; return oldValue; &#125;finally &#123; unlock(); //è§£é” &#125; &#125; æ³¨æ„ï¼š è¿™é‡Œçš„åŠ é”æ“ä½œæ˜¯çœŸçš„ï¼ˆé”®çš„hashå€¼å¯¹åº”çš„ï¼‰æŸä¸ªå…·ä½“çš„Segmentï¼Œé”å®šçš„æ˜¯è¯¥Segmentè€Œä¸æ˜¯æ•´ä¸ªConcurrentHashMapã€‚å› ä¸ºæ’å…¥é”®å€¼å¯¹æ“ä½œåªæ˜¯åœ¨SegmentåŒ…å«çš„æŸä¸ªæ¡¶ä¸­å®Œæˆï¼Œä¸éœ€è¦é”å®šæ•´ä¸ªConcurrentHashMapã€‚æ­¤æ—¶å…¶ä»–å†™çº¿ç¨‹å¯¹å¦å¤–15ä¸ªSegmentçš„åŠ é”å¹¶ä¸ä¼šå› ä¸ºå½“å‰çº¿ç¨‹å¯¹è¿™ä¸ªSegmentçš„åŠ é”è€Œé˜»å¡ã€‚åŒæ—¶ï¼Œæ‰€æœ‰è¯»çº¿ç¨‹å‡ ä¹ä¸ä¼šå› ä¸ºæœ¬çº¿ç¨‹çš„åŠ é”è€Œé˜»å¡ï¼ˆé™¤éè¯»çº¿ç¨‹åˆšå¥½è¯»åˆ°è¿™ä¸ª Segment ä¸­æŸä¸ª HashEntry çš„ value åŸŸçš„å€¼ä¸º nullï¼Œæ­¤æ—¶éœ€è¦åŠ é”åé‡æ–°è¯»å–è¯¥å€¼ï¼‰ã€‚ å¯¹æ¯”HashTableå’Œç”±åŒæ­¥å™¨åŒ…è£…çš„HashMapæ¯æ¬¡åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œè¯»æˆ–å†™æ“ä½œï¼ŒConCurrentHashMapåœ¨å¹¶å‘è®¿é—®æ€§èƒ½ä¸Šæœ‰äº†è´¨çš„æé«˜ã€‚åœ¨ç†æƒ³çŠ¶æ€ä¸‹ï¼ŒConCurrentHashMapå¯ä»¥æ”¯æŒ16ä¸ªçº¿ç¨‹æ‰§è¡Œå¹¶å‘å†™æ“ä½œï¼ˆå¦‚æœå¹¶å‘çº§åˆ«è®¾ç½®ä¸º16ï¼‰ï¼ŒåŠä»»æ„æ•°é‡çº¿ç¨‹çš„è¯»æ“ä½œã€‚ getæ–¹æ³•1234567891011121314151617public V get(Object key)&#123; Segment&lt;K,V&gt; s; HashEntry&lt;K,V&gt;[] tab; int h = hash(key); long u = (((h &gt;&gt;&gt; segmentShift) &amp; segmentMask &lt;&lt; SSHIFT) + SBASE); if (( s = (Segment&lt;K,V&gt;)UNSAFE.getObjectVolatile(segments, u)) != null &amp;&amp; (tab.s.table) != null)&#123; for (HashEntry&lt;K,V&gt; e = (HashEntry&lt;K,V&gt;) UNSAFE.getObjectVolatile (tab, ((long)(((tab.length-1) &amp; h)&lt;&lt; TSHIFT)+TBASE); e != null; e=e.next))&#123; K k; if((k = e.key) == key || (e.hash == h &amp;&amp; key.equals(k))) return e.value; &#125; &#125; return null;&#125; geté€»è¾‘æ¯”è¾ƒç®€å•ï¼Œåªéœ€è¦å°†keyé€šè¿‡Hashä¹‹åå®šä½åˆ°å…·ä½“çš„Segmentï¼Œå†é€šè¿‡ä¸€æ¬¡Hashå®šä½åˆ°å…·ä½“çš„å…ƒç´ ä¸Šã€‚ç”±äºHashEntryä¸­valueå±æ€§æ˜¯ç”¨volatileå…³é”®è¯ä¿®é¥°çš„ï¼Œä¿è¯äº†å†…å­˜å¯è§æ€§ï¼Œæ‰€ä»¥æ¯æ¬¡è·å–åˆ°çš„éƒ½æ˜¯æœ€æ–°å€¼ã€‚ ConCurrentHashMapçš„getæ–¹æ³•æ˜¯éå¸¸é«˜æ•ˆçš„ï¼Œå› ä¸ºæ•´ä¸ªè¿‡ç¨‹éƒ½ä¸éœ€è¦åŠ é”ã€‚ Base 1.81.7å·²ç»è§£å†³äº†å¹¶å‘é—®é¢˜ï¼Œå¹¶ä¸”èƒ½æ”¯æŒNä¸ªSegmentçš„å¹¶å‘åº¦ï¼Œä½†æ˜¯ä¾ç„¶å­˜åœ¨HashMapåœ¨1.7ç‰ˆæœ¬ä¸­çš„é—®é¢˜ï¼Œå³æŸ¥è¯¢éå†é“¾è¡¨æ•ˆç‡å¤ªä½ã€‚å› æ­¤1.8åšäº†ä¸€äº›æ•°æ®ç»“æ„ä¸Šçš„è°ƒæ•´ã€‚ åº•å±‚çš„æ•°æ®ç»“æ„ï¼š åŒæ—¶æŠ›å¼ƒäº†åŸæœ‰çš„Segmentåˆ†æ®µé”ï¼Œè€Œé‡‡ç”¨äº†CAS+synchronizedæ¥ä¿è¯å¹¶å‘å®‰å…¨æ€§ã€‚ putæ–¹æ³• æ ¹æ®keyè®¡ç®—å‡ºhashCodeï¼› åˆ¤æ–­æ˜¯å¦éœ€è¦è¿›è¡Œåˆå§‹åŒ– få³ä¸ºå½“å‰keyå®šä½å‡ºçš„Nodeï¼Œå¦‚æœä¸ºç©ºè¡¨ç¤ºå½“å‰ä½ç½®å¯ä»¥å†™å…¥æ•°æ®ï¼Œåˆ©ç”¨CASå°è¯•å†™å…¥ï¼Œå¤±è´¥åˆ™è‡ªæ—‹ä¿è¯æˆåŠŸï¼› å¦‚æœå½“å‰ä½ç½®çš„hashCode == MOVED == -1ï¼Œåˆ™éœ€è¦è¿›è¡Œæ‰©å®¹ã€‚ å¦‚æœéƒ½ä¸æ»¡è¶³ï¼Œåˆ™åˆ©ç”¨synchronizedé”å†™å…¥æ•°æ®ã€‚ å¦‚æœæ•°é‡å¤§äºTREEIFY_THRESHOLDåˆ™è¦è½¬æ¢ä¸ºçº¢é»‘æ ‘ã€‚ getæ–¹æ³• æ ¹æ®è®¡ç®—å‡ºæ¥hashCodeå¯»å€ï¼Œå¦‚æœå°±åœ¨æ¡¶ä¸Šé‚£ä¹ˆå°±ç›´æ¥è¿”å›å€¼ã€‚ å¦‚æœæ˜¯çº¢é»‘æ ‘é‚£ä¹ˆæŒ‰ç…§æ ‘çš„é¢æ–¹å¼è·å–å€¼ã€‚ éƒ½ä¸æ»¡è¶³å°±æŒ‰ç…§é“¾è¡¨çš„æ–¹å¼éå†è·å–å€¼ã€‚ 1.8åœ¨1.7çš„æ•°æ®ç»“æ„ä¸Šåšäº†å¤§çš„æ”¹åŠ¨ï¼Œé‡‡ç”¨çº¢é»‘æ ‘ä¹‹åå¯ä»¥ä¿è¯æŸ¥è¯¢æ•ˆç‡O(logn),ç”šè‡³å–æ¶ˆäº†ReentrantLockæ”¹ä¸ºäº†synchronizedï¼Œè¿™æ ·å¯ä»¥çœ‹å‡ºåœ¨æ–°ç‰ˆçš„JDKä¸­å¯¹synchronizedä¼˜åŒ–æ˜¯å¾ˆåˆ°ä½çš„ã€‚ å‚è€ƒèµ„æ–™[1] HashMap? ConcurrentHashMap? ç›¸ä¿¡çœ‹å®Œè¿™ç¯‡æ²¡äººèƒ½éš¾ä½ä½ ! [2] æŠ€æœ¯é¢è¯•å¿…å¤‡åŸºç¡€çŸ¥è¯† ) [3] æ¢ç´¢ ConcurrentHashMap é«˜å¹¶å‘æ€§çš„å®ç°æœºåˆ¶]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>HashMap</tag>
        <tag>ConcurrentHashMap</tag>
        <tag>æºç </tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å­—èŠ‚è·³åŠ¨18å¹´åç«¯æ–¹å‘ç¬”è¯•çœŸé¢˜]]></title>
    <url>%2F2019%2F08%2F12%2F%E5%AD%97%E8%B7%B318%E5%B9%B4%E7%9C%9F%E9%A2%98%2F</url>
    <content type="text"><![CDATA[å­—è·³18å¹´åç«¯æ–¹å‘ğŸ¥‡ç”¨æˆ·å–œå¥½é¢˜ç›®æè¿° ä¸ºäº†ä¸æ–­ä¼˜åŒ–æ¨èæ•ˆæœï¼Œä»Šæ—¥å¤´æ¡æ¯å¤©è¦å­˜å‚¨å’Œå¤„ç†æµ·é‡æ•°æ®ã€‚å‡è®¾æœ‰è¿™æ ·ä¸€ç§åœºæ™¯ï¼šæˆ‘ä»¬å¯¹ç”¨æˆ·æŒ‰ç…§å®ƒä»¬çš„æ³¨å†Œæ—¶é—´å…ˆåæ¥æ ‡å·ï¼Œå¯¹äºä¸€ç±»æ–‡ç« ï¼Œæ¯ä¸ªç”¨æˆ·éƒ½æœ‰ä¸åŒçš„å–œå¥½å€¼ï¼Œæˆ‘ä»¬ä¼šæƒ³çŸ¥é“æŸä¸€æ®µæ—¶é—´å†…æ³¨å†Œçš„ç”¨æˆ·ï¼ˆæ ‡å·ç›¸è¿çš„ä¸€æ‰¹ç”¨æˆ·ï¼‰ä¸­ï¼Œæœ‰å¤šå°‘ç”¨æˆ·å¯¹è¿™ç±»æ–‡ç« å–œå¥½å€¼ä¸ºkã€‚å› ä¸ºä¸€äº›ç‰¹æ®Šçš„åŸå› ï¼Œä¸ä¼šå‡ºç°ä¸€ä¸ªæŸ¥è¯¢çš„ç”¨æˆ·åŒºé—´å®Œå…¨è¦†ç›–å¦ä¸€ä¸ªæŸ¥è¯¢çš„ç”¨æˆ·åŒºé—´(ä¸å­˜åœ¨L1&lt;=L2&lt;=R2&lt;=R1)ã€‚ è¾“å…¥æè¿° è¾“å…¥ï¼š ç¬¬1è¡Œä¸ºnä»£è¡¨ç”¨æˆ·çš„ä¸ªæ•° ç¬¬2è¡Œä¸ºnä¸ªæ•´æ•°ï¼Œç¬¬iä¸ªä»£è¡¨ç”¨æˆ·æ ‡å·ä¸ºiçš„ç”¨æˆ·å¯¹æŸç±»æ–‡ç« çš„å–œå¥½åº¦ ç¬¬3è¡Œä¸ºä¸€ä¸ªæ­£æ•´æ•°qä»£è¡¨æŸ¥è¯¢çš„ç»„æ•° ç¬¬4è¡Œåˆ°ç¬¬ï¼ˆ3+qï¼‰è¡Œï¼Œæ¯è¡ŒåŒ…å«3ä¸ªæ•´æ•°l,r,kä»£è¡¨ä¸€ç»„æŸ¥è¯¢ï¼Œå³æ ‡å·ä¸ºl&lt;=i&lt;=rçš„ç”¨æˆ·ä¸­å¯¹è¿™ç±»æ–‡ç« å–œå¥½å€¼ä¸ºkçš„ç”¨æˆ·çš„ä¸ªæ•°ã€‚ æ•°æ®èŒƒå›´n &lt;= 300000,q&lt;=300000 kæ˜¯æ•´å‹ è¾“å…¥æè¿° è¾“å‡ºï¼šä¸€å…±qè¡Œï¼Œæ¯è¡Œä¸€ä¸ªæ•´æ•°ä»£è¡¨å–œå¥½å€¼ä¸ºkçš„ç”¨æˆ·çš„ä¸ªæ•° é—®é¢˜åˆ†æè¿™é¢˜çš„é¢˜ç›®å¾ˆé•¿ï¼Œå®¹æ˜“æŠŠäººå¼„æ™•ã€‚ç»™äº†ä¸€ä¸ªæ•°ç»„ï¼Œå…¶ä¸­ç´¢å¼•iå¯¹åº”çš„å€¼ä»£è¡¨å‘˜å·¥ç¼–å·ä¸ºiçš„å–œå¥½å€¼valï¼›ç„¶åç»™ä¸€ä¸ªæŸ¥è¯¢æ¡ä»¶ï¼Œå‘˜å·¥ç¼–å·çš„èŒƒå›´[l, r],ä»¥åŠå–œå¥½å€¼kï¼Œåˆ¤æ–­åœ¨è¿™ä¸ªèŒƒå›´å†…æœ‰å¤šå°‘å–œå¥½å€¼ä¸ºkçš„å‘˜å·¥ã€‚æˆ‘ä»¬è¾“å‡ºæ‰“å°å‘˜å·¥çš„äººæ•°å³å¯ã€‚ çœ‹åˆ°è¿™é¢˜ï¼Œå°±è§‰å¾—ç®€ç›´ä¸èƒ½æ›´ç®€å•äº†å¥½ä¹ˆï¼ç”¨ä¸€ä¸ªæ•°ç»„æŠŠå‘˜å·¥çš„å–œå¥½å€¼å­˜èµ·æ¥ï¼Œå†ç”¨ä¸€ä¸ªforå¾ªç¯éå†ç´¢å¼•ä¸º[left,right]ä¸­çš„å–œå¥½å€¼å³å¯ã€‚æ— å¥ˆç†æƒ³å¾ˆä¸°æ»¡ï¼Œç°å®å¾ˆéª¨æ„Ÿï¼Œä¸€æäº¤è¿è¡Œå°±ç»™ä½ ä¸€ä¸ª50%çš„é€šè¿‡ç‡ï¼ŒåŸå› æ˜¯è¶…æ—¶ã€‚å¯èƒ½æ˜¯å‘˜å·¥çš„äººæ•°è¿‡å¤šï¼Œä½†å–œå¥½å€¼å‘¢ï¼Œæ˜¯ä¸€ä¸ªæ¯”è¾ƒå›ºå®šçš„èŒƒå›´ã€‚ å› æ­¤æƒ³åŠæ³•æ”¹è¿›ï¼Œå¾ˆç›´è§‚çš„æ–¹æ³•æ˜¯ç”¨ä¸€ä¸ªmapæŠŠå–œå¥½å’Œå‘˜å·¥ç¼–å·å¯¹åº”èµ·æ¥ï¼Œæ¯æ¬¡æŸ¥è¯¢æ‰¾åˆ°å–œå¥½å€¼ä¸ºkçš„æ‰€æœ‰å‘˜å·¥ï¼Œå‘˜å·¥çš„ç¼–å·æ˜¯æœ‰åºçš„ï¼ŒäºŒåˆ†æŸ¥æ‰¾æ‰€æœ‰åœ¨èŒƒå›´å†…çš„å‘˜å·¥å³å¯ã€‚äºŒåˆ†æŸ¥æ‰¾æ—¶ï¼Œæ‰¾åˆ°å¤§äºç­‰äºå‘˜å·¥ç¼–å·å·¦è¾¹ç•Œçš„æœ€å°å€¼ï¼Œå’Œå°äºç­‰äºå‘˜å·¥ç¼–å·çš„æœ€å¤§å€¼ï¼Œæ ¹æ®äºŒè€…çš„å·®å€¼æ±‚å‡ºå‘˜å·¥æ•°ç›®ã€‚ ä»£ç å¦‚ä¸‹ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576import java.util.*;/** * @author zhen */public class Main &#123; public static void main(String[] args) &#123; Scanner in = new Scanner(System.in); int N = in.nextInt(); HashMap&lt;Integer, List&lt;Integer&gt;&gt; map = new HashMap&lt;&gt;(); //å°†å–œå¥½ä¸ºkçš„å‘˜å·¥æ”¾åœ¨ä¸€èµ· for(int i=1; i&lt;=N; i++)&#123; int k = in.nextInt(); //è¿™ç§è¾“å…¥æ–¹æ³•å¯ä»¥è®°ä¸€ä¸‹ï¼Œä¸€ä¸ªkeyå¯¹åº”ä¸€ä¸ªåˆ—è¡¨çš„æƒ…å†µ List&lt;Integer&gt; tmp = map.getOrDefault(k, new ArrayList&lt;&gt;()); tmp.add(i); map.put(k, tmp); &#125; int q = in.nextInt(); int res = 0; for(int i=0;i&lt;q;i++)&#123; int left = in.nextInt(); int right = in.nextInt(); int target = in.nextInt(); if(map.containsKey(target))&#123; List&lt;Integer&gt; list = map.get(target); //æŠŠIntegerç±»å‹ä¼ è¿›å» Integer[] array = list.toArray(Integer[0]); int start = lowerBound(array, target); int end = upperBound(array, target); if(start != -1 &amp;&amp; end != -1)&#123; res = end - start +1; &#125; &#125;else&#123; res = 0; &#125; System.out.println(res); &#125; &#125; //æ‰¾åˆ°å¤§äºç­‰äºtargetçš„æœ€å°å€¼ private static int lowerBound(Integer[] array, int target)&#123; int l = 0; int r = array.length-1; while(l &lt;= r)&#123; int mid = (r-l)/2+l; if(target &lt;= array[mid])&#123; r = mid-1; &#125;else&#123; l = mid+1; &#125; &#125; if(l &lt; array.length &amp;&amp; array[l] &gt;= target)&#123; return l; &#125;else&#123; return -1; &#125; &#125; //æ‰¾åˆ°å°äºç­‰äºtargetçš„æœ€å¤§å€¼ private static int upperBound(Integer[] array, int target)&#123; int l = 0; int r = array.length-1; while(l &lt;= r)&#123; int mid = (r-l)/2+l; if(target &gt;= array[mid])&#123; l = mid+1; &#125;else&#123; r = mid-1; &#125; &#125; if(r &gt;= 0 &amp;&amp; array[r] &lt;= target)&#123; return r; &#125;else&#123; return -1; &#125; &#125;&#125; ğŸ¥ˆæ‰‹ä¸²é¢˜ç›®æè¿° ä½œä¸ºä¸€ä¸ªæ‰‹ä¸²è‰ºäººï¼Œæœ‰é‡‘ä¸»å‘ä½ è®¢è´­äº†ä¸€æ¡åŒ…å«nä¸ªæ‚è‰²ä¸²ç çš„æ‰‹ä¸²â€”â€”æ¯ä¸ªä¸²ç è¦ä¹ˆæ— è‰²ï¼Œè¦ä¹ˆæ¶‚äº†è‹¥å¹²ç§é¢œè‰²ã€‚ä¸ºäº†ä½¿æ‰‹ä¸²çš„è‰²å½©çœ‹èµ·æ¥ä¸é‚£ä¹ˆå•è°ƒï¼Œé‡‘ä¸»è¦æ±‚ï¼Œæ‰‹ä¸²ä¸Šçš„ä»»æ„ä¸€ç§é¢œè‰²ï¼ˆä¸åŒ…å«æ— è‰²ï¼‰ï¼Œåœ¨ä»»æ„è¿ç»­çš„mä¸ªä¸²ç é‡Œè‡³å¤šå‡ºç°ä¸€æ¬¡ï¼ˆæ³¨æ„è¿™é‡Œæ‰‹ä¸²æ˜¯ä¸€ä¸ªç¯å½¢ï¼‰ã€‚æ‰‹ä¸²ä¸Šçš„é¢œè‰²ä¸€å…±æœ‰cç§ã€‚ç°åœ¨æŒ‰é¡ºæ—¶é’ˆåºå‘Šè¯‰ä½ nä¸ªä¸²ç çš„æ‰‹ä¸²ä¸Šï¼Œæ¯ä¸ªä¸²ç ç”¨æ‰€åŒ…å«çš„é¢œè‰²åˆ†åˆ«æœ‰å“ªäº›ã€‚è¯·ä½ åˆ¤æ–­è¯¥æ‰‹ä¸²ä¸Šæœ‰å¤šå°‘ç§é¢œè‰²ä¸ç¬¦åˆè¦æ±‚ã€‚å³è¯¢é—®æœ‰å¤šå°‘ç§é¢œè‰²åœ¨ä»»æ„è¿ç»­mä¸ªä¸²ç ä¸­å‡ºç°äº†è‡³å°‘ä¸¤æ¬¡. è¾“å…¥æè¿° ç¬¬ä¸€è¡Œè¾“å…¥nï¼Œmï¼Œcä¸‰ä¸ªæ•°ï¼Œç”¨ç©ºæ ¼éš”å¼€ã€‚(1 &lt;= n &lt;= 10000, 1 &lt;= m &lt;= 1000, 1 &lt;= c &lt;= 50) æ¥ä¸‹æ¥nè¡Œæ¯è¡Œçš„ç¬¬ä¸€ä¸ªæ•°num_i(0 &lt;= num_i &lt;= c)è¡¨ç¤ºç¬¬ié¢—ç å­æœ‰å¤šå°‘ç§é¢œè‰²ã€‚æ¥ä¸‹æ¥ä¾æ¬¡è¯»å…¥num_iä¸ªæ•°å­—ï¼Œæ¯ä¸ªæ•°å­—xè¡¨ç¤ºç¬¬ié¢—æŸ±å­ä¸ŠåŒ…å«ç¬¬xç§é¢œè‰²(1 &lt;= x &lt;= c) è¾“å‡ºæè¿° ä¸€ä¸ªéè´Ÿæ•´æ•°ï¼Œè¡¨ç¤ºè¯¥æ‰‹é“¾ä¸Šæœ‰å¤šå°‘ç§é¢œè‰²ä¸ç¬¦éœ€æ±‚ã€‚ é—®é¢˜åˆ†æè¿™ä¸ªé¢˜ç›®ä¹Ÿå¾ˆç»•ï¼Œæå¾—äººçœ‹ä¸æ˜ç™½å°±å¯¹äº†ã€‚æˆ‘ä¸€åº¦è§‰å¾—è‡ªå·±æ™ºå•†æœ‰é—®é¢˜ã€‚ç»™ä¸€ä¸ªæ‰‹ä¸²ï¼Œæ‰‹ä¸²ä¸Šæœ‰nä¸ªç å­ï¼Œæ€»å…±æœ‰cç§é¢œè‰²ï¼Œæ¯ä¸ªç å­å¯èƒ½ç”±0ç§æˆ–å¤šç§é¢œè‰²ç»„æˆï¼Œè§„åˆ™ä¸ºè¿ç»­mä¸ªç å­ä¸­å‡ºç°äº†è‡³å°‘ä¸¤æ¬¡åˆ™è¿™ç§é¢œè‰²ä¸ç¬¦åˆè¦æ±‚ã€‚ æˆ‘ä»¬æŠŠé¢˜ç›®è½¬æ¢ä¸€ä¸‹ï¼Œæœ‰ä¸€ä¸ªæ•°ç»„ï¼Œç´¢å¼•iæŒ‡çš„æ˜¯é¢œè‰²iï¼Œæ¯ä¸ªé‡Œé¢æ”¾çš„æ˜¯æ‰€æœ‰å‡ºç°äº†çš„ç å­ä½ç½®ï¼Œç„¶ååˆ¤æ–­æ¯ä¸ªé¢œè‰²é‡Œé¢çš„ç å­æ˜¯å¦æ˜¯ç¬¦åˆè¦æ±‚çš„ã€‚ æ³¨æ„ï¼šè¿™é‡Œè¦è¾“å‡ºçš„æ˜¯æœ‰å¤šå°‘ç§é¢œè‰²ä¸ç¬¦åˆéœ€æ±‚ï¼Œå› æ­¤æ¯ç§é¢œè‰²åªè¦å‡ºç°äº†ä¸€ç»„ä¸ç¬¦åˆè¦æ±‚çš„ä½ç½®å°±å¯ä»¥é€€å‡ºäº†ã€‚ ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738import java.util.ArrayList;import java.util.LinkedList;import java.util.List;import java.util.Scanner;public class Main &#123; public static void main(String[] args) &#123; Scanner in = new Scanner(System.in); int N = in.nextInt(); int M = in.nextInt(); int C = in.nextInt(); List&lt;Integer&gt;[] position = new List&lt;&gt;[C+1]; for(int i=1;i&lt;=C;i++)&#123; position[i] = new ArrayList&lt;&gt;(); &#125; for(int i=0; i&lt;N;i++)&#123; int c= in.nextInt(); for(int j=0; j&lt;c;j++)&#123; position[j].add(i); &#125; &#125; int count = 0; for(int i=1 ; i&lt;=C;i++)&#123; //æ‰‹é“¾æ˜¯ç¯å½¢ if(position[i].get(0)+N-position[position[i].size()-1] &lt; M)&#123; count++; continue; &#125; for(int j=0;j&lt;position[i].size()-1;i++)&#123; if(position[i].get(j+1) - position[i].get[j] &lt; M)&#123; count++; break; &#125; &#125; &#125; System.out.println(count); &#125;&#125;]]></content>
      <categories>
        <category>ç¬”è¯•</category>
      </categories>
      <tags>
        <tag>å­—èŠ‚è·³åŠ¨</tag>
        <tag>çœŸé¢˜</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç´¢å¼•åŠå…¶èƒŒåçš„æ•°æ®ç»“æ„æ”¯æŒ]]></title>
    <url>%2F2019%2F08%2F11%2F%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B4%A2%E5%BC%95%E5%8F%8A%E5%85%B6%E7%AE%97%E6%B3%95%2F</url>
    <content type="text"><![CDATA[ç´¢å¼•åŠå…¶èƒŒåçš„æ•°æ®ç»“æ„æ”¯æŒç´¢å¼•ç´¢å¼•æ˜¯å­˜å‚¨å¼•æ“ç”¨äºå¿«é€Ÿæ‰¾åˆ°è®°å½•çš„ä¸€ç§æ•°æ®ç»“æ„ã€‚ç´¢å¼•å¯¹äºè‰¯å¥½çš„æ€§èƒ½éå¸¸å…³é”®ï¼Œå°¤å…¶æ˜¯å½“è¡¨ä¸­çš„æ•°æ®é‡è¶Šæ¥è¶Šå¤§æ—¶ã€‚ æ•°æ®åº“æŸ¥è¯¢æ˜¯æ•°æ®åº“æœ€ä¸»è¦çš„åŠŸèƒ½ä¹‹ä¸€. å¦‚æœæƒ³è¦ç†è§£MySQLä¸­ç´¢å¼•æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œæœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯å»çœ‹çœ‹ä¸€æœ¬ä¹¦çš„â€œç›®å½•â€éƒ¨åˆ†ï¼šå¦‚æœæƒ³åœ¨ä¸€æœ¬ä¹¦ä¸­æ‰¾åˆ°æŸä¸ªç´¢å¼•ï¼Œä¸€èˆ¬ä¼šå…ˆçœ‹ä¹¦çš„â€œç›®å½•â€ï¼Œæ‰¾åˆ°å¯¹åº”çš„é¡µç ã€‚ B-Treeå’ŒB+Treeç›®å‰å¤§éƒ¨åˆ†æ•°æ®åº“ç³»ç»ŸåŠæ–‡ä»¶ç³»ç»Ÿéƒ½é‡‡ç”¨B-Treeæˆ–è€…B+Treeä½œä¸ºç´¢å¼•ç»“æ„ã€‚è¿™æ˜¯æœ‰ä¸€å®šåŸå› çš„ã€‚é¦–å…ˆä»‹ç»å…¶æ•°æ®ç»“æ„ã€‚ B-Treeä¸ºäº†æè¿°B-Treeï¼Œé¦–å…ˆå®šä¹‰ä¸€æ¡æ•°æ®è®°å½•ä¸ºä¸€ä¸ªäºŒå…ƒç»„[keyï¼Œdata]ï¼Œkeyä¸ºè®°å½•çš„é”®å€¼ï¼Œå¯¹åº”ä¸åŒçš„æ•°æ®è®°å½•ï¼Œkeyæ˜¯äº’ä¸ç›¸åŒçš„ã€‚dataä¸ºæ•°æ®è®°å½•å‡ºkeyå¤–çš„æ•°æ®ã€‚é‚£ä¹ˆB-Treeæ˜¯æ»¡è¶³ä¸‹åˆ—æ¡ä»¶çš„æ•°æ®ç»“æ„ï¼š dä¸ºå¤§äº1çš„ä¸€ä¸ªæ­£æ•´æ•°ï¼Œç§°ä¸ºB-Treeçš„åº¦ã€‚ hä¸ºä¸€ä¸ªæ­£æ•´æ•°ï¼Œç§°ä¸ºB-Treeçš„é«˜åº¦ã€‚ æ¯ä¸ªéå¶å­èŠ‚ç‚¹ç”±n-1ä¸ªkeyå’Œnä¸ªæŒ‡é’ˆç»„æˆï¼Œå…¶ä¸­d&lt;=n&lt;=2d. æ¯ä¸ªå¶å­èŠ‚ç‚¹æœ€å°‘åŒ…å«ä¸€ä¸ªkeyå’Œä¸¤ä¸ªæŒ‡é’ˆï¼Œæœ€å¤šåŒ…å«2n-1ä¸ªkeyå’Œ2dä¸ªæŒ‡é’ˆï¼Œå¶èŠ‚ç‚¹çš„æŒ‡é’ˆå‡ä¸ºnullã€‚ æ‰€æœ‰å¶èŠ‚ç‚¹å…·æœ‰ç›¸åŒçš„æ·±åº¦ï¼Œç­‰äºæ ‘é«˜hã€‚ keyå’ŒæŒ‡é’ˆäº’ç›¸é—´éš”ï¼ŒèŠ‚ç‚¹ä¸¤ç«¯æ˜¯æŒ‡é’ˆã€‚ ä¸€ä¸ªèŠ‚ç‚¹ä¸­çš„keyä»å·¦åˆ°å³éé€’å‡æ’åˆ—[éä¸¥æ ¼é€’å¢]ã€‚ æ‰€æœ‰èŠ‚ç‚¹ç»„æˆæ ‘ç»“æ„ã€‚ æ¯ä¸ªæŒ‡é’ˆè¦ä¹ˆä¸ºnullï¼Œè¦ä¹ˆæŒ‡å‘å¦å¤–ä¸€ä¸ªèŠ‚ç‚¹ã€‚ å¦‚æœæŸä¸ªæŒ‡é’ˆåœ¨èŠ‚ç‚¹nodeæœ€å·¦è¾¹ä¸”ä¸ä¸ºnullï¼Œåˆ™å…¶æŒ‡å‘èŠ‚ç‚¹çš„æ‰€æœ‰keyå°äºvï¼ˆkey1ï¼‰ï¼Œå…¶ä¸­v(key1)ä¸ºnodeçš„ç¬¬ä¸€ä¸ªkeyçš„å€¼ã€‚(éšéšæœ‰ç‚¹åƒäºŒå‰æœç´¢æ ‘ï¼Œå·¦è¾¹æ¯”æ ¹èŠ‚ç‚¹å°ã€‚å³è¾¹æ¯”æ ¹èŠ‚ç‚¹å¤§) å¦‚æœæŸä¸ªæŒ‡é’ˆåœ¨èŠ‚ç‚¹nodeçš„æœ€å³è¾¹ä¸”ä¸ä¸ºnullï¼Œåˆ™å…¶æŒ‡å‘èŠ‚ç‚¹çš„æ‰€æœ‰keyå¤§äºvï¼ˆkeymï¼‰ï¼Œå…¶ä¸­v(keym)ä¸ºnodeçš„æœ€åä¸€ä¸ªkeyçš„å€¼ã€‚ å¦‚æœæŸä¸ªæŒ‡é’ˆåœ¨èŠ‚ç‚¹nodeçš„å·¦å³ç›¸é‚»keyåˆ†åˆ«æ˜¯keyiå’Œkeyi+1ä¸”ä¸ä¸ºnullï¼Œåˆ™å…¶æŒ‡å‘èŠ‚ç‚¹çš„æ‰€æœ‰keyå°äºv(keyi+1)ä¸”å¤§äºv(keyi)ï¼› å›¾ä¸ºä¸€ä¸ªd=2çš„B-Treeç¤ºæ„å›¾ï¼Œdä¸º2æŒ‡çš„æ˜¯æ¯ä¸ªæŒ‡é’ˆæœ‰ä¸¤ä¸ªæ•°æ®ï¼Œ20ï¼Œ49æ˜¯å¤§äº15ä¸”å°äº56çš„ã€‚ B+TreeMySQLæ™®éä½¿ç”¨B+Treeå®ç°å…¶ç´¢å¼•ç»“æ„ã€‚ä¸B-Treeç›¸æ¯”ï¼ŒB+treeæœ‰ä»¥ä¸‹ä¸åŒç‚¹ï¼š æ¯ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆä¸Šé™ä¸º2dè€Œä¸æ˜¯2d+1 å†…èŠ‚ç‚¹ä¸å­˜å‚¨dataï¼Œåªå­˜å‚¨keyï¼›å¶å­èŠ‚ç‚¹ä¸å­˜å‚¨æŒ‡é’ˆï¼› ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•B+Treeç¤ºæ„ï¼š ç”±äºå¹¶ä¸æ˜¯æ‰€æœ‰èŠ‚ç‚¹éƒ½å…·æœ‰ç›¸åŒçš„åŸŸï¼Œå› æ­¤B+Treeä¸­å¶èŠ‚ç‚¹å’Œå†…èŠ‚ç‚¹ä¸€èˆ¬å¤§å°ä¸åŒã€‚è¿™ç‚¹ä¸B-Treeä¸­ä¸åŒèŠ‚ç‚¹å­˜æ”¾çš„keyå’ŒæŒ‡é’ˆå¯èƒ½æ•°é‡ä¸ä¸€è‡´ï¼Œä½†æ˜¯æ¯ä¸ªèŠ‚ç‚¹çš„åŸŸå’Œä¸Šé™æ˜¯ä¸€è‡´çš„ï¼Œæ‰€ä»¥åœ¨å®ç°ä¸­B-Treeå¾€å¾€å¯¹æ¯ä¸ªèŠ‚ç‚¹ç”³è¯·åŒç­‰å¤§å°çš„ç©ºé—´ã€‚ ä¸€èˆ¬æ¥è¯´ï¼ŒB+Treeæ¯”B-Treeæ›´é€‚åˆå¤–å­˜å‚¨ç´¢å¼•ç»“æ„ï¼Œå…·ä½“åŸå› ä¸å¤–å­˜å‚¨å™¨åŸç†åŠè®¡ç®—æœºå­˜å–åŸç†æœ‰å…³ã€‚ å¸¦æœ‰é¡ºåºè®¿é—®æŒ‡é’ˆçš„B+Treeä¸€èˆ¬åœ¨æ•°æ®åº“ç³»ç»Ÿæˆ–æ–‡ä»¶ç³»ç»Ÿä¸­ä½¿ç”¨çš„B+Treeç»“æ„éƒ½åœ¨ç»å…¸B+Treeçš„åŸºç¡€ä¸Šè¿›è¡Œäº†ä¼˜åŒ–ï¼Œå¢åŠ äº†é¡ºåºè®¿é—®æŒ‡é’ˆã€‚ å¦‚å›¾æ‰€ç¤ºï¼Œåœ¨B+Treeä¸­çš„æ¯ä¸ªå¶å­èŠ‚ç‚¹å¢åŠ ä¸€ä¸ªæŒ‡å‘ç›¸é‚»å¶å­èŠ‚ç‚¹çš„æŒ‡é’ˆï¼Œè¿™æ ·å°±å½¢æˆäº†å¸¦æœ‰é¡ºåºè®¿é—®æŒ‡é’ˆçš„B+Treeã€‚åšè¿™ä¸ªä¼˜åŒ–çš„ç›®çš„æ˜¯ä¸ºäº†æé«˜åŒºé—´è®¿é—®çš„æ€§èƒ½ï¼Œä¾‹å¦‚å›¾4è¦æŸ¥è¯¢keyä»18åˆ°49é¡¶ç‚¹æ‰€æœ‰æ•°æ®è®°å½•ï¼Œå½“æ‰¾åˆ°18åï¼Œåªéœ€é¡ºç€èŠ‚ç‚¹å’ŒæŒ‡é’ˆé¡ºåºéå†å°±å¯ä»¥ä¸€æ¬¡æ€§è®¿é—®åˆ°æ‰€æœ‰æ•°æ®èŠ‚ç‚¹ï¼Œæå¤§æé«˜äº†åŒºé—´æŸ¥è¯¢æ•ˆç‡ã€‚ ä¸ºä»€ä¹ˆä½¿ç”¨B+Treeçº¢é»‘æ ‘ç­‰æ•°æ®ç»“æ„ä¹Ÿå¯ä»¥ç”¨æ¥å®ç°ç´¢å¼•ï¼Œä½†æ˜¯æ–‡ä»¶ç³»ç»ŸåŠæ•°æ®åº“ç³»ç»Ÿæ™®éé‡‡ç”¨B-/+Treeä½œä¸ºç´¢å¼•ç»“æ„ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ ä¸€èˆ¬æ¥è¯´ï¼Œç´¢å¼•æœ¬èº«ä¹Ÿå¾ˆå¤§ï¼Œä¸å¯èƒ½å…¨éƒ¨å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œå› æ­¤ç´¢å¼•å¾€å¾€ä»¥ç´¢å¼•æ–‡ä»¶çš„å½¢å¼å­˜å‚¨åœ¨ç£ç›˜ä¸Šã€‚è¿™æ ·çš„è¯ï¼Œç´¢å¼•æŸ¥æ‰¾è¿‡ç¨‹ä¸­ä¸­å°±è¦äº§ç”Ÿç£ç›˜IOæ¶ˆè€—ï¼Œç›¸å¯¹äºå†…å­˜å­˜å–ï¼ŒIOå­˜å–çš„æ¶ˆè€—è¦é«˜å‡ ä¸ªæ•°é‡çº§ï¼Œæ‰€ä»¥è¯„ä»·ä¸€ä¸ªæ•°æ®ç»“æ„ä½œä¸ºç´¢å¼•çš„ä¼˜åŠ£æœ€é‡è¦çš„æŒ‡æ ‡å°±æ˜¯æŸ¥æ‰¾è¿‡ç¨‹ä¸­ç£ç›˜IOæ“ä½œæ¬¡æ•°ã€‚ æ ¹æ®B-Treeçš„å®šä¹‰ï¼Œå¯çŸ¥æ£€ç´¢ä¸€æ¬¡æœ€å¤šéœ€è¦è®¿é—®hä¸ªèŠ‚ç‚¹ï¼Œæ•°æ®åº“ç³»ç»Ÿçš„è®¾è®¡è€…å·§å¦™åˆ©ç”¨äº†ç£ç›˜é¢„è¯»åŸç†ï¼Œå°†ä¸€ä¸ªèŠ‚ç‚¹çš„å¤§å°è®¾ä¸ºç­‰äºä¸€ä¸ªé¡µï¼Œè¿™æ ·æ¯ä¸ªèŠ‚ç‚¹åªéœ€è¦ä¸€æ¬¡IOå°±å¯ä»¥å®Œå…¨è½½å…¥äº†ã€‚ä¸ºäº†è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œåœ¨å®é™…å®ç°ä¸­è¿˜éœ€è¦å¦‚ä¸‹æŠ€å·§ï¼š æ¯æ¬¡æ–°å»ºèŠ‚ç‚¹æ—¶ï¼Œç›´æ¥ç”³è¯·ä¸€ä¸ªé¡µçš„ç©ºé—´ï¼Œè¿™æ ·å°±ä¿è¯ä¸€ä¸ªèŠ‚ç‚¹ç‰©ç†ä¸Šä¹Ÿå­˜å‚¨åœ¨ä¸€ä¸ªé¡µé‡Œï¼ŒåŠ ä¹‹è®¡ç®—æœºå­˜å‚¨åˆ†é…éƒ½æ˜¯æŒ‰é¡µå¯¹é½çš„ï¼Œå°±å®ç°äº†ä¸€ä¸ªnodeåªéœ€ä¸€æ¬¡IOï¼› B-Treeä¸­ä¸€æ¬¡ç´¢å¼•æœ€å¤šéœ€è¦h-1æ¬¡IOï¼Œæ ¹èŠ‚ç‚¹å¸¸é©»å†…å­˜ï¼Œæ¸è¿›å¤æ‚åº¦O(h)=O(logdN).ä¸€èˆ¬å®é™…åº”ç”¨ä¸­ï¼Œå‡ºåº¦dæ˜¯éå¸¸å¤§çš„æ•°å­—ï¼Œé€šå¸¸è¶…è¿‡100ï¼Œå› æ­¤héå¸¸å°ï¼Œé€šå¸¸ä¸è¶…3. ç»¼ä¸Šæ‰€è¿°ï¼Œç”¨B-Treeä½œä¸ºç´¢å¼•ç»“æ„æ•ˆç‡æ˜¯éå¸¸é«˜çš„ã€‚ è€Œçº¢é»‘æ ‘è¿™ç§ç»“æ„ï¼Œhæ˜æ˜¾è¦æ·±å¾—å¤šã€‚ç”±äºé€»è¾‘ä¸Šå¾ˆè¿‘çš„èŠ‚ç‚¹ï¼ˆçˆ¶å­ï¼‰ç‰©ç†ä¸Šå¯èƒ½å¾ˆè¿œï¼Œæ— æ³•åˆ©ç”¨æ•°æ®çš„å±€éƒ¨æ€§ï¼Œæ‰€ä»¥çº¢é»‘æ ‘çš„IOæ¸è¿›å¤æ‚åº¦ä¸ºO(h),æ•ˆç‡æ˜æ˜¾æ¯”B-Treeå·®å¾ˆå¤šã€‚ é™¤æ­¤ä¹‹å¤–ï¼ŒB+Treeæ›´é€‚åˆå¤–å­˜ç´¢å¼•ï¼ŒåŸå› å’Œå†…èŠ‚ç‚¹å‡ºåº¦dæœ‰å…³ã€‚ç”±ä¸Šé¢åˆ†æå¯ä»¥çœ‹åˆ°ï¼Œdè¶Šå¤§ç´¢å¼•çš„æ€§èƒ½è¶Šå¥½ï¼Œè€Œå‡ºåº¦çš„ä¸Šé™å–å†³äºèŠ‚ç‚¹å†…keyå’Œdataçš„å¤§å°ã€‚ ç”±äºB+Treeå†…èŠ‚ç‚¹å»æ‰äº†dataåŸŸï¼Œå› æ­¤å¯ä»¥æ‹¥æœ‰æ›´å¤§çš„å‡ºåº¦ï¼Œæ‹¥æœ‰æ›´å¥½çš„æ€§èƒ½ã€‚ MySQLç´¢å¼•å®ç°ä¸åŒå­˜å‚¨å¼•èµ·å¯¹ç´¢å¼•çš„å®ç°æ–¹å¼æ˜¯ä¸åŒçš„ï¼Œè¿™é‡Œä¸»è¦ä»‹ç»MyISAMå’ŒInnoDBä¸¤ä¸ªå­˜å‚¨å¼•æ“çš„ç´¢å¼•å®ç°æ–¹å¼ã€‚ MyISAMç´¢å¼•å®ç°MyISAMå¼•æ“ä½¿ç”¨B+Treeä½œä¸ºç´¢å¼•ç»“æ„ï¼Œå¶èŠ‚ç‚¹çš„dataåŸŸå­˜æ”¾çš„æ˜¯æ•°æ®è®°å½•çš„åœ°å€ã€‚ä¸‹å›¾æ˜¯MyISAMç´¢å¼•çš„åŸç†å›¾ï¼š è¿™é‡Œå‡è®¾è¡¨ä¸€å…±æœ‰ä¸‰åˆ—ï¼Œå‡è®¾æˆ‘ä»¬ä»¥col1ä¸ºä¸»é”®ï¼Œåˆ™å›¾8æ˜¯ä¸€ä¸ªMyISAMè¡¨çš„ä¸»ç´¢å¼•ç¤ºæ„ã€‚å¯ä»¥çœ‹å‡ºï¼ŒMyISAMçš„ç´¢å¼•æ–‡ä»¶ä»…ä»…ä¿å­˜æ•°æ®è®°å½•çš„åœ°å€ã€‚åœ¨MyISAMä¸­ï¼Œä¸»ç´¢å¼•å’Œè¾…åŠ©ç´¢å¼•åœ¨ç»“æ„ä¸Šæ²¡æœ‰ä»»ä½•åŒºåˆ«ï¼Œåªæ˜¯ä¸»ç´¢å¼•è¦æ±‚keyæ˜¯å”¯ä¸€çš„ï¼Œè€Œè¾…åŠ©ç´¢å¼•çš„keyå¯ä»¥é‡å¤ã€‚å¦‚æœæˆ‘ä»¬åœ¨col2ä¸Šå»ºç«‹ä¸€ä¸ªè¾…åŠ©ç´¢å¼•ï¼Œåˆ™æ­¤ç´¢å¼•çš„ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š æ³¨æ„çœ‹è¾…åŠ©ç´¢å¼•çš„å’Œä¸»ç´¢å¼•çš„å·®åˆ«ï¼Œè¾…åŠ©ç´¢å¼•å¶å­èŠ‚ç‚¹å­˜æ”¾çš„keyæ˜¯è¾…åŠ©å­—æ®µçš„å€¼ï¼Œè€Œä¸»ç´¢å¼•å¶å­èŠ‚ç‚¹å­˜æ”¾çš„keyæ˜¯ä¸»é”®çš„å€¼ã€‚ å› æ­¤MyISAMä¸­ç´¢å¼•æ£€ç´¢çš„ç®—æ³•é¦–å…ˆæŒ‰ç…§B+Treeæœç´¢ç®—æ³•æœç´¢ç´¢å¼•ï¼Œå¦‚æœæŒ‡å®šçš„keyå­˜åœ¨ï¼Œåˆ™å–å‡ºå…¶dataåŸŸçš„å€¼ï¼Œç„¶åä»¥dataåŸŸçš„å€¼ä¸ºåœ°å€ï¼Œè¯»å–ç›¸åº”çš„æ•°æ®è®°å½•ã€‚ MyISAMçš„ç´¢å¼•æ–¹å¼ä¹Ÿå«åšéèšé›†ç´¢å¼•ã€‚ InnoDBç´¢å¼•å®ç°è™½ç„¶InnoDBä¹Ÿä½¿ç”¨B+Treeä½œä¸ºç´¢å¼•ç»“æ„ï¼Œä½†å®ç°æ–¹å¼å´ä¸MyISAMæˆªç„¶ä¸åŒã€‚ ç¬¬ä¸€ä¸ªé‡å¤§åŒºåˆ«å°±æ˜¯InnoDBçš„æ•°æ®æ–‡ä»¶æœ¬èº«å°±æ˜¯ç´¢å¼•æ–‡ä»¶ã€‚ä»ä¸Šæ–‡çŸ¥é“ï¼ŒMyISAMç´¢å¼•æ–‡ä»¶å’Œæ•°æ®æ–‡ä»¶æ˜¯åˆ†ç¦»çš„ï¼Œç´¢å¼•æ–‡ä»¶ä»…ä¿å­˜æ•°æ®æ–‡ä»¶çš„åœ°å€ã€‚è€Œåœ¨InnoDBä¸­ï¼Œè¡¨æ•°æ®æ–‡ä»¶æœ¬èº«å°±æ˜¯æŒ‰B+treeç»„ç»‡çš„ä¸€ä¸ªç´¢å¼•ç»“æ„ã€‚è¿™é¢—æ ‘çš„å¶èŠ‚ç‚¹dataåŸŸä¿å­˜äº†å®Œæ•´çš„æ•°æ®è®°å½•ï¼Œè¿™ä¸ªç´¢å¼•çš„keyæ˜¯æ•°æ®è¡¨çš„ä¸»é”®ã€‚ å›¾10æ˜¯InnoDBä¸»ç´¢å¼•(åŒæ—¶ä¹Ÿæ˜¯æ•°æ®æ–‡ä»¶)çš„ç¤ºæ„å›¾ï¼Œå¯ä»¥çœ‹åˆ°å¶èŠ‚ç‚¹åŒ…å«äº†å®Œæ•´çš„æ•°æ®è®°å½•ã€‚è¿™ç§ç´¢å¼•å«åšèšé›†ç´¢å¼•ã€‚å› ä¸ºInnoDBæœ¬èº«è¦æŒ‰ä¸»é”®èšé›†ï¼Œæ‰€ä»¥InnoDBè¦æ±‚è¡¨å¿…é¡»æœ‰ä¸»é”®ï¼ˆMyISAMå¯ä»¥æ²¡æœ‰ï¼‰ï¼Œå¦‚æœæ²¡æœ‰æ˜¾å¼æŒ‡å®šï¼Œåˆ™MySQLç³»ç»Ÿä¼šè‡ªåŠ¨é€‰æ‹©ä¸€ä¸ªå¯ä»¥å”¯ä¸€æ ‡è¯†æ•°æ®è®°å½•çš„åˆ—ä½œä¸ºä¸»é”®ã€‚å¦‚æœä¸å­˜åœ¨è¿™ç§åˆ—ï¼Œåˆ™MySQLè‡ªåŠ¨ä¸ºInnoDBè¡¨ç”Ÿæˆä¸€ä¸ªéšå«å­—æ®µä½œä¸ºä¸»é”®ï¼Œè¿™ä¸ªå­—æ®µé•¿åº¦ä¸º6ä¸ªå­—èŠ‚ï¼Œç±»å‹ä¸ºé•¿æ•´å‹ã€‚ ç¬¬äºŒä¸ªä¸MyISAMç´¢å¼•ä¸åŒçš„æ˜¯InnoDBçš„è¾…åŠ©ç´¢å¼•dataåŸŸå­˜å‚¨ç›¸åº”è®°å½•ä¸»é”®çš„å€¼è€Œä¸æ˜¯åœ°å€ã€‚æ¢å¥è¯è¯´ï¼ŒInnoDBçš„æ‰€æœ‰è¾…åŠ©ç´¢å¼•éƒ½å¼•ç”¨ä¸»é”®ä½œä¸ºdataåŸŸã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š èšé›†ç´¢å¼•è¿™ç§å®ç°æ–¹å¼ä½¿å¾—æŒ‰ä¸»é”®æœç´¢ååˆ†é«˜æ•ˆï¼Œä½†æ˜¯è¾…åŠ©ç´¢å¼•æœç´¢éœ€è¦æ£€ç´¢ä¸¤éç´¢å¼•ï¼šé€šè¿‡è¾…åŠ©ç´¢å¼•è·å¾—ä¸»é”®ï¼Œç„¶åç”¨ä¸»é”®åˆ°ä¸»ç´¢å¼•ä¸­æ£€ç´¢è·å¾—è®°å½•ã€‚ äº†è§£ä¸åŒå­˜å‚¨å¼•æ“çš„ç´¢å¼•å®ç°å¯¹äºæ­£ç¡®ä½¿ç”¨å’Œä¼˜åŒ–ç´¢å¼•éƒ½éå¸¸æœ‰å¸®åŠ©ï¼Œä¾‹å¦‚çŸ¥é“äº†InnoDBçš„ç´¢å¼•å®ç°åï¼Œå°±å¾ˆå®¹æ˜“æ˜ç™½ä¸ºä»€ä¹ˆä¸å»ºè®®ä½¿ç”¨è¿‡é•¿çš„å­—æ®µä½œä¸ºä¸»é”®ï¼Œå› ä¸ºæ‰€æœ‰è¾…åŠ©ç´¢å¼•éƒ½å¼•ç”¨ä¸»ç´¢å¼•ï¼Œè¿‡é•¿çš„ä¸»ç´¢å¼•ä¼šä»¤è¾…åŠ©ç´¢å¼•å˜å¾—è¿‡å¤§ã€‚å†ä¾‹å¦‚ï¼Œç”¨éå•è°ƒçš„å­—æ®µä½œä¸ºä¸»é”®åœ¨InnoDBä¸­ä¸æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ï¼Œå› ä¸ºInnoDBæ•°æ®æœ¬é—´æœ¬èº«æ˜¯ä¸€é¢—B+Treeï¼Œéå•è°ƒçš„ä¸»é”®ä¼šé€ æˆåœ¨æ’å…¥æ–°è®°å½•æ—¶æ•°æ®æ–‡ä»¶ä¸ºäº†ç»´æŒB+Treeçš„ç‰¹æ€§è€Œé¢‘ç¹çš„åˆ†è£‚è°ƒæ•´ï¼Œååˆ†ä½æ•ˆï¼Œè€Œä½¿ç”¨è‡ªå¢å­—æ®µä½œä¸ºä¸»é”®åˆ™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚ ç´¢å¼•ä½¿ç”¨ç­–ç•¥åŠä¼˜åŒ–MySQLçš„ä¼˜åŒ–ä¸»è¦åˆ†ä¸ºç»“æ„ä¼˜åŒ–å’ŒæŸ¥è¯¢ä¼˜åŒ–ã€‚æœ¬ç« è®¨è®ºçš„é«˜æ€§èƒ½ç´¢å¼•ç­–ç•¥ä¸»è¦å±äºç»“æ„åŒ–ä¼˜åŒ–èŒƒå›´ã€‚ æœ€é•¿å‰ç¼€åŸç†ä¸ç›¸å…³ä¼˜åŒ–é«˜æ•ˆä½¿ç”¨ç´¢å¼•çš„é¦–è¦æ¡ä»¶æ˜¯çŸ¥é“ä»€ä¹ˆæ ·çš„æŸ¥è¯¢ä¼šä½¿ç”¨åˆ°ç´¢å¼•ï¼Œè¿™ä¸ªé—®é¢˜å’ŒB+Treeä¸­çš„â€œæœ€å·¦å‰ç¼€åŸç†â€æœ‰å…³ã€‚ä¸»é”®æœ‰ä¸‰ä¸ªemp_no, title, from_date. æƒ…å†µä¸€ï¼šå…¨åˆ—åŒ¹é…å¾ˆæ˜æ˜¾ï¼Œå½“æŒ‰ç…§ç´¢å¼•ä¸­çš„æ‰€æœ‰åˆ—è¿›è¡Œç²¾ç¡®åŒ¹é…ï¼ˆè¿™é‡Œç²¾ç¡®åŒ¹é…æŒ‡â€œ=â€æˆ–â€œINâ€åŒ¹é…ï¼‰æ—¶ï¼Œç´¢å¼•å¯ä»¥è¢«ç”¨åˆ°ã€‚ç†è®ºä¸Šç´¢å¼•å¯¹é¡ºåºä½¿æ•æ„Ÿçš„ï¼Œä½†æ˜¯ç”±äºMySQLçš„æŸ¥è¯¢ä¼˜åŒ–å™¨ä¼šè‡ªåŠ¨è°ƒæ•´whereå­å¥çš„æ¡ä»¶é¡ºåºä»¥ä½¿ç”¨é€‚åˆçš„ç´¢å¼•ã€‚ æƒ…å†µäºŒï¼šæœ€å·¦å‰ç¼€åŒ¹é…å½“æŸ¥è¯¢æ¡ä»¶ç²¾ç¡®åŒ¹é…ç´¢å¼•çš„å·¦è¾¹è¿ç»­ä¸€ä¸ªæˆ–å‡ ä¸ªåˆ—æ—¶ï¼Œç´¢å¼•å¯ä»¥è¢«ç”¨åˆ°ï¼Œä½†æ˜¯åªç”¨åˆ°ä¸€éƒ¨åˆ†ï¼Œå³æ¡ä»¶æ‰€ç»„æˆçš„æœ€å·¦å‰ç¼€ã€‚ æƒ…å†µä¸‰ï¼šæŸ¥è¯¢æ¡ä»¶ç”¨åˆ°äº†ç´¢å¼•ä¸­åˆ—çš„ç²¾ç¡®åŒ¹é…ï¼Œä½†æ˜¯ä¸­é—´æŸä¸ªæ¡ä»¶æœªæä¾›ã€‚æ­¤æ—¶ç´¢å¼•ä½¿ç”¨æƒ…å†µå’Œæƒ…å†µäºŒç›¸åŒï¼Œå› ä¸ºtitleæœªæä¾›ï¼Œæ‰€ä»¥æŸ¥è¯¢åªç”¨åˆ°äº†ç´¢å¼•çš„ç¬¬ä¸€åˆ—ï¼Œè€Œåé¢çš„from_dateè™½ç„¶ä¹Ÿåœ¨ç´¢å¼•ä¸­ï¼Œä½†æ˜¯ç”±äºtitleä¸å­˜åœ¨è€Œæ— æ³•å’Œå·¦å‰ç¼€è¿æ¥ï¼Œå› æ­¤éœ€è¦å¯¹ç»“æœè¿›è¡Œæ‰«æè¿‡æ»¤from_dateï¼ˆè¿™é‡Œç”±äºemp_noå”¯ä¸€ï¼Œæ‰€ä»¥ä¸å­˜åœ¨æ‰«æï¼‰ã€‚å¦‚æœæƒ³è®©from_dateä¹Ÿä½¿ç”¨ç´¢å¼•è€Œä¸æ˜¯whereè¿‡æ»¤ï¼Œå¯ä»¥å¢åŠ ä¸€ä¸ªè¾…åŠ©ç´¢å¼•&lt;emp_no, from_date&gt;ï¼Œæ­¤æ—¶ä¸Šé¢çš„æŸ¥è¯¢ä¼šä½¿ç”¨è¿™ä¸ªç´¢å¼•ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ä¸€ç§ç§°ä¹‹ä¸ºâ€œéš”ç¦»åˆ—â€çš„ä¼˜åŒ–æ–¹æ³•ï¼Œå°†emp_noä¸from_dateä¹‹é—´çš„â€œå‘â€å¡«ä¸Šã€‚ â€œå¡«å‘â€åæ€§èƒ½æå‡äº†ä¸€ç‚¹ã€‚å¦‚æœç»è¿‡emp_noç­›é€‰åä½™ä¸‹å¾ˆå¤šæ•°æ®ï¼Œåˆ™åè€…æ€§èƒ½ä¼˜åŠ¿ä¼šæ›´åŠ æ˜æ˜¾ã€‚å½“ç„¶ï¼Œå¦‚æœtitleçš„å€¼å¾ˆå¤šï¼Œç”¨å¡«å‘å°±ä¸åˆé€‚äº†ï¼Œå¿…é¡»å»ºç«‹è¾…åŠ©ç´¢å¼•ã€‚ æƒ…å†µå››ï¼šæŸ¥è¯¢æ¡ä»¶æ²¡æœ‰æŒ‡å®šç´¢å¼•ç¬¬ä¸€åˆ—ç”±äºä¸æ˜¯æœ€å·¦å‰ç¼€ï¼Œç´¢å¼•è¿™æ ·çš„æŸ¥è¯¢æ˜¾ç„¶ç”¨ä¸åˆ°ç´¢å¼•ã€‚ æƒ…å†µäº”ï¼šåŒ¹é…æŸåˆ—çš„å‰ç¼€å­—ç¬¦ä¸²EXPLAIN SELECT * FROM employees.titles WHERE emp_no=&#39;10001&#39; AND title LIKE &#39;Senior%&#39;; å¦‚æœé€šé…ç¬¦%ä¸å‡ºç°åœ¨å¼€å¤´ï¼Œåˆ™å¯ä»¥ç”¨åˆ°ç´¢å¼•ï¼Œä½†æ ¹æ®å…·ä½“æƒ…å†µä¸åŒå¯èƒ½åªä¼šç”¨å…¶ä¸­ä¸€ä¸ªå‰ç¼€ã€‚ æƒ…å†µå…­ï¼šèŒƒå›´æŸ¥è¯¢èŒƒå›´åˆ—å¯ä»¥ç”¨åˆ°ç´¢å¼•ï¼ˆå¿…é¡»æ˜¯æœ€å·¦å‰ç¼€ï¼‰ï¼Œä½†æ˜¯èŒƒå›´åˆ—åé¢çš„åˆ—æ— æ³•ç”¨åˆ°ç´¢å¼•ã€‚åŒæ—¶ï¼Œç´¢å¼•æœ€å¤šç”¨äºä¸€ä¸ªèŒƒå›´åˆ—ï¼Œå› æ­¤å¦‚æœæŸ¥è¯¢æ¡ä»¶ä¸­æœ‰ä¸¤ä¸ªèŒƒå›´åˆ—åˆ™æ— æ³•å…¨ç”¨åˆ°ç´¢å¼•ã€‚ æƒ…å†µä¸ƒï¼šæŸ¥è¯¢æ¡ä»¶ä¸­å«æœ‰å‡½æ•°æˆ–è¡¨è¾¾å¼å¾ˆä¸å¹¸ï¼Œå¦‚æœæŸ¥è¯¢æ¡ä»¶ä¸­å«æœ‰å‡½æ•°æˆ–è¡¨è¾¾å¼ï¼Œåˆ™MySQLä¸ä¼šä¸ºè¿™åˆ—ä½¿ç”¨ç´¢å¼•(è™½ç„¶æŸäº›åœ¨æ•°å­¦æ„ä¹‰ä¸Šå¯ä»¥ä½¿ç”¨)ã€‚ç”±äºæŸ¥è¯¢æ¡ä»¶æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼ŒMySQLæ— æ³•ä¸ºå…¶ä½¿ç”¨ç´¢å¼•ã€‚çœ‹æ¥MySQLè¿˜æ²¡æœ‰æ™ºèƒ½åˆ°è‡ªåŠ¨ä¼˜åŒ–å¸¸é‡è¡¨è¾¾å¼çš„ç¨‹åº¦ï¼Œå› æ­¤åœ¨å†™æŸ¥è¯¢è¯­å¥æ—¶å°½é‡é¿å…è¡¨è¾¾å¼å‡ºç°åœ¨æŸ¥è¯¢ä¸­ï¼Œè€Œæ˜¯å…ˆæ‰‹å·¥ç§ä¸‹ä»£æ•°è¿ç®—ï¼Œè½¬æ¢ä¸ºæ— è¡¨è¾¾å¼çš„æŸ¥è¯¢è¯­å¥ã€‚ ç´¢å¼•é€‰æ‹©æ€§ä¸å‰ç¼€ç´¢å¼•æ—¢ç„¶ç´¢å¼•å¯ä»¥åŠ å¿«æŸ¥è¯¢é€Ÿç‡ï¼Œæ˜¯ä¸æ˜¯åªè¦æ˜¯æŸ¥è¯¢è¯­å¥å°±å»ºä¸Šç´¢å¼•ï¼Ÿç­”æ¡ˆæ˜¯å¦å®šçš„ï¼Œå› ä¸ºç´¢å¼•è™½ç„¶åŠ å¿«äº†æŸ¥è¯¢é€Ÿåº¦ï¼Œä½†ç´¢å¼•ä¹Ÿæ˜¯æœ‰ä»£ä»·çš„ï¼šç´¢å¼•æ–‡ä»¶æœ¬èº«è¦æ¶ˆè€—å­˜å‚¨ç©ºé—´ï¼ŒåŒæ—¶ç´¢å¼•ä¼šåŠ é‡æ’å…¥ã€åˆ é™¤å’Œä¿®æ”¹è®°å½•æ—¶çš„è´Ÿæ‹…ï¼Œå¦å¤–ï¼ŒMySQLåœ¨è¿è¡Œä¸­ä¹Ÿè¦æ¶ˆè€—èµ„æºç»´æŠ¤ç´¢å¼•ï¼Œå› æ­¤ç´¢å¼•å¹¶ä¸æ˜¯è¶Šå¤šè¶Šå¥½ã€‚ä¸€èˆ¬ä¸¤ç§æƒ…å†µä¸‹ä¸å»ºè®®å»ºç´¢å¼•ï¼š ç¬¬ä¸€ç§æƒ…å†µæ˜¯è¡¨è®°å½•æ¯”è¾ƒå°‘ï¼Œä¾‹å¦‚ä¸€ä¸¤åƒæ¡ç”šè‡³åªæœ‰å‡ ç™¾æ¡è®°å½•çš„è¡¨ï¼Œæ²¡å¿…è¦å»ºç´¢å¼•ï¼Œè®©æŸ¥è¯¢åšå…¨è¡¨æ‰«æå¥½äº†ã€‚è‡³äºå¤šå°‘æ¡è®°å½•æ‰ç®—å¤šï¼Œè¿™ä¸ªäººæœ‰ä¸ªäººçš„çœ‹æ³•ï¼Œè®°å½•æ•°ä¸è¶…è¿‡2000å¯ä»¥è€ƒè™‘ä¸å»ºç´¢å¼•ï¼Œè¶…è¿‡2000æ¡æ‰å¯ä»¥é…Œæƒ…è€ƒè™‘ç´¢å¼•ã€‚ å¦ä¸€ç§ä¸å»ºè®®å»ºç´¢å¼•çš„æƒ…å†µæ˜¯ç´¢å¼•çš„é€‰æ‹©æ€§è¾ƒä½ã€‚æ‰€è°“ç´¢å¼•çš„é€‰æ‹©æ€§æ˜¯æŒ‡ä¸é‡å¤çš„ç´¢å¼•å€¼ä¸è¡¨è®°å½•æ•°çš„æ¯”å€¼ã€‚æ˜¾ç„¶é€‰æ‹©æ€§çš„å–å€¼èŒƒå›´ä¸º(0,1],é€‰æ‹©æ€§è¶Šé«˜çš„ç´¢å¼•ä»·å€¼è¶Šå¤§ï¼Œè¿™æ˜¯ç”±B+Treeçš„æ€§è´¨å†³å®šã€‚ æœ‰ä¸€ç§ä¸ç´¢å¼•é€‰æ‹©æ€§æœ‰å…³çš„ç´¢å¼•ä¼˜åŒ–ç­–ç•¥å«åšå‰ç¼€ç´¢å¼•ï¼Œå°±æ˜¯ç”¨åˆ—çš„å‰ç¼€ä»£æ›¿æ•´ä¸ªåˆ—ä½œä¸ºç´¢å¼•keyï¼Œå½“å‰ç¼€é•¿åº¦åˆé€‚æ—¶ï¼Œå¯ä»¥åšåˆ°æ—¢ä½¿å¾—å‰ç¼€ç´¢å¼•çš„é€‰æ‹©æ€§æ¥è¿‘å…¨åˆ—ç´¢å¼•ï¼ŒåŒæ—¶åº”ä¸ºç´¢å¼•keyå˜çŸ­è€Œå‡å°‘äº†ç´¢å¼•æ–‡ä»¶çš„å¤§å°å’Œç»´æŠ¤å¼€é”€ã€‚ å‰ç¼€ç´¢å¼•å…¼é¡¾ç´¢å¼•å¤§å°å’ŒæŸ¥è¯¢é€Ÿåº¦ï¼Œä½†æ˜¯å…¶ç¼ºç‚¹æ˜¯ä¸èƒ½ç”¨äºORDER BYå’ŒGROUP BYæ“ä½œï¼Œä¹Ÿä¸èƒ½ç”¨äºCovering indexï¼ˆå³å½“ç´¢å¼•æœ¬èº«åŒ…å«æŸ¥è¯¢æ‰€éœ€å…¨éƒ¨æ•°æ®æ—¶ï¼Œä¸å†è®¿é—®æ•°æ®æ–‡ä»¶æœ¬èº«ï¼‰ InnoDBçš„ä¸»é”®é€‰æ‹©ä¸æ’å…¥ä¼˜åŒ–åœ¨ä½¿ç”¨InnoDBå­˜å‚¨å¼•æ“æ—¶ï¼Œå¦‚æœæ²¡æœ‰ç‰¹åˆ«çš„éœ€è¦ï¼Œè¯·æ°¸è¿œä½¿ç”¨ä¸€ä¸ªä¸ä¸šåŠ¡æ— å…³çš„è‡ªå¢å­—æ®µä½œä¸ºä¸»é”®ã€‚ ä¸Šæ–‡è®¨è®ºè¿‡InnoDBçš„ç´¢å¼•å®ç°ï¼ŒInnoDBä½¿ç”¨èšé›†ç´¢å¼•ï¼Œæ•°æ®è®°å½•æœ¬èº«è¢«å­˜äºä¸»ç´¢å¼•çš„å¶å­èŠ‚ç‚¹ä¸Šã€‚è¿™å°±è¦æ±‚åŒä¸€ä¸ªå¶å­èŠ‚ç‚¹å†…ï¼ˆå¤§å°ä¸ºä¸€ä¸ªå†…å­˜é¡µæˆ–ç£ç›˜é¡µï¼‰çš„å„æ¡æ•°æ®è®°å½•æŒ‰ä¸»é”®é¡ºåºå­˜æ”¾ï¼Œå› æ­¤æ¯å½“æœ‰ä¸€æ¡æ–°çš„è®°å½•æ’å…¥æ—¶ï¼ŒMySQLä¼šæ ¹æ®å…¶ä¸»æœºé‚£å°†å…¶æ’å…¥åˆ°é€‚å½“çš„èŠ‚ç‚¹å’Œä½ç½®ï¼Œå¦‚æœé¡µé¢åˆ°è¾¾è£…è½½å› å­ï¼ˆInnoDBé»˜è®¤ä¸º15/16ï¼‰ï¼Œåˆ™å¼€è¾Ÿä¸€ä¸ªæ–°çš„é¡µï¼ˆèŠ‚ç‚¹ï¼‰ã€‚ å¦‚æœè¡¨ä½¿ç”¨è‡ªå¢ä¸»é”®ï¼Œé‚£ä¹ˆæ¯æ¬¡æ’å…¥æ–°çš„è®°å½•ï¼Œè®°å½•å°±ä¼šé¡ºåºæ·»åŠ åˆ°å½“å‰ç´¢å¼•èŠ‚ç‚¹çš„åç»­ä½ç½®ï¼Œå½“ä¸€é¡µå†™æ»¡ï¼Œå°±ä¼šè‡ªåŠ¨å¼€è¾Ÿä¸€ä¸ªæ–°çš„é¡µã€‚ è¿™æ ·å°±ä¼šå½¢æˆä¸€ä¸ªç´§å‡‘çš„ç´¢å¼•ç»“æ„ï¼Œè¿‘ä¼¼é¡ºåºå¡«æ»¡ã€‚ç”±äºæ¯æ¬¡æ’å…¥æ—¶ä¹Ÿä¸éœ€è¦ç§»åŠ¨å·²æœ‰æ•°æ®ï¼Œå› æ­¤æ•ˆç‡å¾ˆé«˜ï¼Œä¹Ÿä¸ä¼šå¢åŠ å¾ˆå¤šå¼€é”€åœ¨ç»´æŠ¤ç´¢å¼•ä¸Šã€‚ å¦‚æœä½¿ç”¨éè‡ªå¢ä¸»é”®ï¼ˆå¦‚èº«ä»½è¯æˆ–å­¦å·ç­‰ï¼‰ç”±äºæ¯æ¬¡æ’å…¥ä¸»é”®çš„å€¼è¿‘ä¼¼äºéšæœºï¼Œå› æ­¤æ¯æ¬¡æ–°è®°å½•éƒ½è¦è¢«æ’åˆ°ç°æœ‰ç´¢å¼•é¡µçš„ä¸­é—´æŸä¸ªä½ç½®ã€‚ å› æ­¤MySQLä¸å¾—ä¸ä¸ºäº†å°†æ–°è®°å½•æ’åˆ°åˆé€‚ä½ç½®è€Œç§»åŠ¨æ•°æ®ï¼Œç”šè‡³ç›®æ ‡é¡µé¢å¯èƒ½è¢«å›å†™åˆ°ç£ç›˜ä¸Šè€Œä»ç¼“å­˜ä¸­æ¸…æ‰ï¼Œæ­¤æ—¶åˆè¦ä»ç£ç›˜ä¸­è¯»å›æ¥ã€‚è¿™å¢åŠ äº†å¾ˆå¤šå¼€é”€ï¼ŒåŒæ—¶é¢‘ç¹çš„ç§»åŠ¨ã€åˆ†é¡µæ“ä½œé€ æˆäº†å¤§é‡çš„ç¢ç‰‡ï¼Œå¾—åˆ°äº†ä¸å¤Ÿç´§å‡‘çš„ç´¢å¼•ç»“æ„ï¼Œåç»­ä¸å¾—ä¸é€šè¿‡OPTIMIZE TABLEæ¥é‡å»ºè¡¨å¹¶ä¼˜åŒ–å¡«å……é¡µé¢ã€‚ å› æ­¤ï¼Œåªè¦å¯ä»¥ï¼Œè¯·å°½é‡åœ¨InnoDBä¸Šé‡‡ç”¨è‡ªå¢å­—æ®µä½œä¸ºä¸»é”®ã€‚ å‚è€ƒæ–‡çŒ®[1] MySQLç´¢å¼•èƒŒåçš„æ•°æ®ç»“æ„åŠç®—æ³•åŸç†]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>ç´¢å¼•</tag>
        <tag>B+æ ‘</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å•ä¾‹æ¨¡å¼]]></title>
    <url>%2F2019%2F07%2F24%2F%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%2F</url>
    <content type="text"><![CDATA[å•ä¾‹Singletonç¡®ä¿ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›è¯¥å®ä¾‹çš„å…¨å±€è®¿é—®ç‚¹ã€‚Singletoné€šå¸¸è¢«ç”¨æ¥ä»£è¡¨é‚£äº›æœ¬è´¨ä¸Šå”¯ä¸€çš„ç³»ç»Ÿç»„ä»¶ï¼Œæ¯”å¦‚çª—å£ç®¡ç†å™¨æˆ–è€…æ–‡ä»¶ç³»ç»Ÿã€‚ ä½¿ç”¨ä¸€ä¸ªç§æœ‰æ„é€ å‡½æ•°ï¼Œä¸€ä¸ªç§æœ‰é™æ€å˜é‡ä»¥åŠä¸€ä¸ªå…¬æœ‰é™æ€å‡½æ•°æ¥å®ç°ã€‚ç§æœ‰æ„é€ å‡½æ•°ä¿è¯äº†ä¸èƒ½é€šè¿‡æ„é€ å‡½æ•°æ¥åˆ›å»ºå¯¹è±¡å®ä¾‹ï¼Œåªèƒ½é€šè¿‡å…¬æœ‰é™æ€å‡½æ•°è¿”å›å”¯ä¸€çš„ç§æœ‰é™æ€å˜é‡ã€‚ æœ€ç®€å•çš„å•ä¾‹å®ç°ï¼šé¥¿æ±‰æ¨¡å¼12345678910public class Singleton &#123; //ç±»è£…è½½çš„æ—¶å€™å·²ç»åˆå§‹åŒ– private static final Singleton instance = new Singleton(); //æ„é€ å™¨ç§æœ‰åŒ– private Singleton()&#123; &#125; //æä¾›å…¬æœ‰çš„è·å–æ–¹æ³• public static Singleton getInstance()&#123; return instance; &#125;&#125; è¿™ç§å®ç°æ–¹å¼è™½ç„¶ä¸æ˜¯æœ€å¥½çš„å®ç°æ–¹å¼ï¼Œä½†æ˜¯æ˜¯æœ€å¸¸ç”¨çš„å•ä¾‹çš„å®ç°æ–¹å¼ã€‚å› ä¸ºç±»ä¸€å¼€å§‹å³è¢«è£…è½½ï¼Œæ‰€ä»¥ä¸ç”¨æ‹…å¿ƒçº¿ç¨‹å®‰å…¨çš„é—®é¢˜ã€‚ä½†æ˜¯ç¼ºç‚¹å°±æ˜¯å¦‚æœä¸ä½¿ç”¨è¿™ä¸ªç±»ï¼Œå°±ä¼šå†…å­˜æµªè´¹çš„é—®é¢˜ã€‚ çº¿ç¨‹å®‰å…¨ï¼šåŒé‡æ£€æŸ¥æ¨¡å¼åŠ é”æ“ä½œåªéœ€è¦å¯¹å®ä¾‹åŒ–éƒ¨åˆ†çš„ä»£ç è¿›è¡Œï¼Œåªæœ‰å½“instanceæ²¡æœ‰è¢«å®ä¾‹åŒ–æ—¶ï¼Œæ‰éœ€è¦è¿›è¡ŒåŠ é”ã€‚ 1234567891011121314151617public class Singleton &#123; //volatileçš„ç”Ÿå‘½ä½œç”¨æ˜¯å†…å­˜å˜é‡å…±äº«ï¼Œå’Œç¦æ­¢æŒ‡ä»¤é‡æ’åº private static volatile Single instance; //æ„é€ å™¨ç§æœ‰åŒ– private Singleton()&#123;&#125; //æä¾›å…¬æœ‰çš„è·å–æ–¹æ³• public static Singleton getInstance()&#123; if(instance == null)&#123; synchronized (Singleton.class)&#123; if(instance == null)&#123; instance = new Singleton(); &#125; &#125; &#125; return instance; &#125;&#125; ä¸ºä»€ä¹ˆåœ¨é”çš„å†…éƒ¨è¿˜æœ‰å†åŠ ä¸€å±‚ifåˆ¤æ–­å‘¢ï¼Œå¦‚æœåªæœ‰ä¸€ä¸ªifè¯­å¥ï¼Œåœ¨instance==nullçš„æƒ…å†µä¸‹ï¼Œå¦‚æœä¸¤ä¸ªçº¿ç¨‹éƒ½è¿›å…¥äº†ifè¯­å¥å—ä¸­ï¼Œè™½ç„¶åœ¨ifè¯­å¥å—ä¸­æœ‰åŠ é”æ“ä½œï¼Œä½†ä¸¤ä¸ªçº¿ç¨‹éƒ½ä¼šæ‰§è¡Œå®ä¾‹åŒ–instance= new Singleton()è¿™æ¡è¯­å¥ï¼Œåªæ˜¯æ—¶é—´é—®é¢˜ã€‚é‚£ä¹ˆå°±ä¼šè¿›è¡Œä¸¤æ¬¡å®ä¾‹åŒ–ã€‚ç ´è¯äº†å•ä¾‹æ¨¡å¼ã€‚å› æ­¤éœ€è¦ä¸¤ä¸ªifè¯­å¥ï¼šç¬¬ä¸€ä¸ªè¯­å¥ç”¨æ¥é¿å…instanceå·²ç»è¢«å®ä¾‹åŒ–åçš„åŠ é”æ“ä½œï¼Œç¬¬äºŒä¸ªifè¯­å¥è¿›è¡Œäº†åŠ é”ï¼Œåªæœ‰ä¸€ä¸ªçº¿ç¨‹è¿›å…¥ï¼Œä¸ä¼šå‡ºç°å¤šæ¬¡å®ä¾‹åŒ–çš„æƒ…å†µã€‚ é™æ€å†…éƒ¨ç±»å®ç°å½“Singletonç±»è¢«åŠ è½½æ—¶ï¼Œé™æ€å†…éƒ¨ç±»SingletonHolderæ²¡æœ‰è¢«ä¸‹è½½è¿›å†…å­˜ã€‚åªæœ‰å½“è°ƒç”¨getInstance()æ–¹æ³•æ—¶ä»è€Œè§¦å‘SingletonHolder.instanceæ—¶SingletonHolderæ‰ä¼šè¢«åŠ è½½ã€‚æ­¤æ—¶åˆå§‹åŒ–INSTANCEè§†åŠ›ï¼Œå¹¶ä¸”JVMç¡®ä¿INSTANCEåªèƒ½è¢«å®ä¾‹åŒ–ä¸€æ¬¡ã€‚ è¿™ç§æ–¹å¼ä¸ä»…å…·æœ‰å»¶è¿Ÿåˆå§‹åŒ–çš„å¥½å¤„ï¼Œè€Œä¸”ç”±JVMæä¾›äº†å¯¹çº¿ç¨‹å®‰å…¨çš„æ”¯æŒã€‚ 1234567891011public class Singleton &#123; private Singleton()&#123;&#125; //é™æ€å†…éƒ¨ç±»ä¸ä¼šåœ¨ä¸€å¼€å§‹è¢«è£…è½½ï¼Œæ‰€ä»¥æ²¡æœ‰å†…å­˜æ¶ˆè€—çš„é—®é¢˜ //JVMåœ¨è£…è½½é™æ€å†…éƒ¨ç±»æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œåªæœ‰åœ¨ä½¿ç”¨å†…éƒ¨ç±»æ‰ä¼šå»è£…è½½ï¼Œæ‰€ä»¥çº¿ç¨‹æ˜¯å®‰å…¨çš„ private static class SingletonHolder &#123; private static final Singleton INSTNCE = new Singleton(); &#125; public static Singleton getInstance()&#123; return SingletonHolder.INSTANCE; &#125;&#125; JVMè£…è½½å†…éƒ¨ç±»å¹¶ä¸æ˜¯ç¨‹åºå¯åŠ¨å°±è£…è½½ï¼Œè€Œä¸”è£…è½½å†…éƒ¨ç±»æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚æ‰€ä»¥è¿™ä¸ªå•ä¾‹æ¨¡å¼çœŸæ­£æ„ä¹‰ä¸Šå®ç°äº†æ‡’åŠ è½½ä¸çº¿ç¨‹å®‰å…¨ä¸”èŠ‚çœäº†å†…å­˜ã€‚ æšä¸¾å®ç°å®ç°å•ä¾‹æ¨¡å¼åªéœ€ç¼–å†™ä¸€ä¸ªåŒ…å«å•ä¸ªå…ƒç´ çš„æšä¸¾ç±»å‹ï¼š 12345public enum Singleton &#123; INSTANCE; public void updateInstance()&#123; &#125;&#125; ç®€æ´ï¼Œä¸”æ— å¿åœ°æä¾›äº†åºåˆ—åŒ–æœºåˆ¶ï¼Œç»å¯¹é˜²æ­¢å¤šæ¬¡å®ä¾‹åŒ–ï¼Œå³ä½¿æ˜¯åœ¨é¢å¯¹å¤æ‚çš„åºåˆ—åŒ–æˆ–è€…åå°„æ”»å‡»çš„æ—¶å€™ã€‚å¯ä»¥é˜²æ­¢åå°„æ”»å‡»ï¼Œé˜²æ­¢ååºåˆ—åŒ–é‡æ–°åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚ å‚è€ƒèµ„æ–™[1] Effective Java ä¸­æ–‡ç‰ˆ [2] æŠ€æœ¯é¢è¯•å¿…å¤‡åŸºç¡€çŸ¥è¯† [3] CodeSheepå•ä¾‹æ¨¡å¼]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>å•ä¾‹æ¨¡å¼</tag>
        <tag>è®¾è®¡æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[éƒ¨ç½²Javaé¡¹ç›®]]></title>
    <url>%2F2019%2F06%2F28%2FJava%E9%83%A8%E7%BD%B2%E8%87%AA%E5%B7%B1%E7%9A%84%E9%A1%B9%E7%9B%AE%E5%9C%A8%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%2F</url>
    <content type="text"><![CDATA[å¦‚ä½•éƒ¨ç½²è‡ªå·±çš„é¡¹ç›®åœ¨æœåŠ¡å™¨ä¸Š ä¸»è¦æ˜¯ç‚¹æ¥ç‚¹å»çš„ã€‚ ä¸€ã€ç™»å½•æœåŠ¡å™¨ç‚¹å‡»IDEAèœå•æ çš„tools-&gt;Deplmentï¼Œè¾“å…¥æœåŠ¡å™¨çš„è´¦å·å’Œå¯†ç ï¼Œæµ‹è¯•ä¸€ä¸‹ï¼ŒæŸ¥çœ‹æ˜¯å¦è¿æ¥æˆåŠŸã€‚è¿™é‡Œè¿æ¥é“åº·æœåŠ¡å™¨ï¼Œä¹‹å‰å·²ç»è¾“å…¥è¿‡è´¦å·å’Œå¯†ç ï¼Œè¿æ¥æˆåŠŸã€‚ tools-&gt;start SSH session,ç»ˆç«¯è¿›å…¥é“åº·æœåŠ¡å™¨ã€‚ è¾“å…¥æŒ‡ä»¤ps aux | grep visualcensusè¿‡æ»¤æŸ¥æ‰¾ä¹‹å‰è¿è¡Œçš„è¿›ç¨‹å·ã€‚ æ€æ­»ä¹‹å‰çš„é‚£ä¸ªè¿›ç¨‹kill 1215ï¼Œ1215ä¸ºä¸Šé¢æŸ¥æ‰¾çš„è¿›ç¨‹idã€‚ äºŒã€æ‰“åŒ…å½“ç„¶è¦é…åˆæ•°æ®åº“ï¼Œä½†æ˜¯å› ä¸ºç”·ç¥æ“ä½œå¤ªå¿«ï¼Œè¿™é‡Œå°±æ²¡èƒ½è®°å½•ä¸‹æ¥ã€‚ å³ä¾§è¾¹çŠ¶æ€æ ï¼Œç‚¹å‡»Mavenï¼Œåœ¨Lifecycleä¸­ç‚¹å‡»packageï¼Œå°†æ•´ä¸ªé¡¹ç›®æ‰“åŒ…ã€‚ç­‰å¾…æ‰“åŒ…å®Œæˆã€‚ ä¸‰ã€ä¸Šä¼ ç›´æ¥å°†æ‰“åŒ…å¥½çš„é¢targetåŒ…ä¸‹é¢çš„.jaræ–‡ä»¶ç”¨é¼ æ ‡æ‹–åˆ°Remote Hostä¸­çš„visualcensusä¸­ï¼Œåœ¨å‘½ä»¤è¡Œè¾“å…¥nohup java -jar visualcensusserver-0.0.1-SNAPSHOT.jar &gt; /dev/null 2&gt;&amp;1 &amp;yè¿è¡Œjavaå·¥ç¨‹ã€‚]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>deployment</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[24é¢˜ä¸€ç»„æ•°æ®äº¤æ¢ç›¸é‚»èŠ‚ç‚¹]]></title>
    <url>%2F2019%2F03%2F01%2F24%E9%A2%98%E4%B8%80%E7%BB%84%E6%95%B0%E6%8D%AE%E4%BA%A4%E6%8D%A2%E7%9B%B8%E9%82%BB%E8%8A%82%E7%82%B9%2F</url>
    <content type="text"><![CDATA[äº¤æ¢ç›¸é‚»èŠ‚ç‚¹ éš¾åº¦ï¼šä¸­ç­‰ æ€è·¯ï¼šé€’å½’ ä¸€ã€é¢˜ç›®æè¿°ç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œä¸¤ä¸¤äº¤æ¢å…¶ä¸­ç›¸é‚»çš„èŠ‚ç‚¹ï¼Œå¹¶è¿”å›äº¤æ¢åçš„é“¾è¡¨ã€‚ ä½ ä¸èƒ½åªæ˜¯å•çº¯çš„æ”¹å˜èŠ‚ç‚¹å†…éƒ¨çš„å€¼ï¼Œè€Œæ˜¯éœ€è¦å®é™…çš„è¿›è¡ŒèŠ‚ç‚¹äº¤æ¢ã€‚ ç¤ºä¾‹: 1ç»™å®š 1-&gt;2-&gt;3-&gt;4, ä½ åº”è¯¥è¿”å› 2-&gt;1-&gt;4-&gt;3. äºŒã€é—®é¢˜åˆ†æé“¾è¡¨ä¸­èŠ‚ç‚¹çš„äº¤æ¢æ˜¯ä¼ ç»Ÿé—®é¢˜ï¼Œä¸¤ä¸ªæŒ‡é’ˆè§£å†³é—®é¢˜ï¼Œå”¯ä¸€è¦æ³¨æ„çš„æ˜¯ä¸èƒ½åœ¨äº¤æ¢è¿‡ç¨‹ä¸­æŠŠé“¾è¡¨ç»™æ–­å¼€äº†ï¼Œå¦åˆ™å²‚ä¸æ˜¯å¾—ä¸å¿å¤±ï¼Ÿæš´åŠ›æ³•æœ¬å¯ä»¥è§£å†³ä¸€åˆ‡ï¼Œä½†æ˜¯ä¼˜é›…çš„æ–¹æ³•æ˜¯é€’å½’ï¼ŒæŠŠç›¸é‚»èŠ‚ç‚¹çš„äº¤æ¢æå®šï¼Œç„¶åé€’å½’æŠŠæ‰€æœ‰çš„èŠ‚ç‚¹ä¸²èµ·æ¥ï¼Œç®€ç›´æ˜¯ç¾æ»‹æ»‹å•Šã€‚ ä¸‰ã€ä»£ç åˆ†æ12345678910111213141516171819class Solution: def swapPairs(self, head): # é˜²æ­¢åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹æˆ–æ²¡æœ‰èŠ‚ç‚¹æ—¶æŠ¥é”™ if head and head.next: p = head q = head.next head = q # ç¬¬ä¸€æ¬¡äº¤æ¢ä¸éœ€è¦è€ƒè™‘ä¸å‰é¢çš„è¿æ¥ ä¸‰æ­¥æ³•è¿æ¥ p.next = q.next q.next = p # å¼€å§‹é€’å½’ p.next = self.swapPairs(p.next) else: if head: return head else: return None return head å¤æ‚åº¦åˆ†æ O(N)]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>é€’å½’</tag>
        <tag>é“¾è¡¨</tag>
        <tag>äº¤æ¢</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[23é¢˜åˆå¹¶kä¸ªæœ‰åºçš„é“¾è¡¨]]></title>
    <url>%2F2019%2F03%2F01%2F23%E9%A2%98%E5%90%88%E5%B9%B6k%E4%B8%AA%E6%9C%89%E5%BA%8F%E7%9A%84%E9%93%BE%E8%A1%A8%2F</url>
    <content type="text"><![CDATA[åˆå¹¶Kä¸ªæœ‰åºçš„é“¾è¡¨ éš¾åº¦ï¼š hardæ¨¡å¼ æ€è·¯ï¼šä¼˜å…ˆçº§é˜Ÿåˆ— ä¸€ã€é¢˜ç›®æè¿°åˆå¹¶ k ä¸ªæ’åºé“¾è¡¨ï¼Œè¿”å›åˆå¹¶åçš„æ’åºé“¾è¡¨ã€‚è¯·åˆ†æå’Œæè¿°ç®—æ³•çš„å¤æ‚åº¦ã€‚ ç¤ºä¾‹: 1234567è¾“å…¥:[ 1-&gt;4-&gt;5, 1-&gt;3-&gt;4, 2-&gt;6]è¾“å‡º: 1-&gt;1-&gt;2-&gt;3-&gt;4-&gt;4-&gt;5-&gt;6 äºŒã€é—®é¢˜åˆ†æé¦–å…ˆæ˜¯hardæ¨¡å¼ï¼Œè¯´æ˜ä¸èƒ½è½»æ˜“çš„è§£å†³è¿™ä¸ªé—®é¢˜ã€‚è®¤çœŸæ€è€ƒäº†ä¸€ä¸ªå°æ—¶ï¼Œè§‰å¾—å·²ç»ç†æ¸…æ¥šæ€è·¯ï¼Œç„¶è€Œè‹¦äºä¸çŸ¥è¯¥å¦‚ä½•å®ç°è‡ªå·±çš„æ€è·¯ã€‚è¯•äº†å‡ ç§æ–¹æ³•ï¼Œåè€Œæ˜¯åŸåœ°æ‰“è½¬ï¼Œäºæ˜¯å†³å®šå‚è€ƒä¸€ä¸‹ç­”æ¡ˆã€‚ç­”æ¡ˆå®ç°äº†æˆ‘çš„æ€è·¯ï¼ŒåŸæ¥ä½¿ç”¨äº†ä¸€ç§ä¹‹å‰æ²¡æœ‰ç”¨è¿‡çš„æ•°æ®ç»“æ„ï¼Œä¼˜å…ˆçº§é˜Ÿåˆ—(PrivirotyQueue),è¿™ä¸€ç¯‡ä¸“æ ç®€å•ä»‹ç»äº†ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼Œå¯¹äºç†è§£è¿™é¢˜ï¼Œç®€ç›´æ˜¯æ­£ä¸­é¶å¿ƒã€‚ æ€è·¯å¦‚ä¸‹ï¼š ç”¨ä¸‰ä¸ªæŒ‡é’ˆæŒ‡å‘kä¸ªé“¾è¡¨çš„å¤´éƒ¨ï¼Œæ¯”è¾ƒæŒ‡é’ˆä¸­çš„å€¼ï¼Œå°†æœ€å°çš„å€¼åŠ å…¥åˆ°ç»“æœä¸­ï¼Œç„¶åæŒ‡é’ˆåç§»ï¼Œç›´åˆ°æ‰€æœ‰çš„æŒ‡é’ˆä¸ºç©ºã€‚ç”±äºæ˜¯åˆ—è¡¨ï¼Œæ— æ³•ç›´æ¥å¾—åˆ°æ‰€æœ‰é“¾è¡¨çš„å¤´éƒ¨ï¼Œæ‰€ä»¥åªèƒ½é€šè¿‡ä¼˜å…ˆçº§é˜Ÿåˆ—æ¥åšã€‚éå†åˆ—è¡¨ï¼Œå°†å¤´æŒ‡é’ˆå’Œå¤´æŒ‡é’ˆçš„valç»„æˆä¸€ä¸ªå…ƒç»„å…¥é˜Ÿåˆ—ï¼Œå‡ºé˜Ÿåˆ—æ—¶å¤´æŒ‡é’ˆçš„valä½œä¸ºè¯„åˆ¤å…¶ä¼˜å…ˆçº§çš„æ ‡å‡†ã€‚æ³¨æ„äº‹é¡¹ï¼Œå½“é˜Ÿåˆ—ä¸­çš„å…ƒç»„ä¼˜å…ˆçº§(å³å¤´æŒ‡é’ˆçš„val)ç›¸åŒæ—¶ï¼Œå°†ä¼šæŠŠæŒ‡é’ˆè¿™ä¸ªå¯¹è±¡ä½œä¸ºæ¯”è¾ƒä¼˜å…ˆçº§çš„è¯„åˆ¤æ ‡å‡†ï¼Œä½†æ˜¯å¯¹è±¡åœ¨pythonä¸­æ˜¯ä¸èƒ½ç›´æ¥æ¯”è¾ƒçš„ï¼Œä¼šå¼•èµ·ä»£ç å´©æºƒï¼Œå…ƒç»„ä¹‹é—´çš„å…ƒç´ ç”¨é€—å·éš”å¼€ï¼Œä¸èƒ½æœ‰ç©ºæ ¼ï¼Œå¦åˆ™ä»£ç ä¹Ÿä¼šå´©æºƒã€‚ ä¸‰ã€ä»£ç åˆ†æ123456789101112131415161718192021222324from queue import PriorityQueue as PQ# å¯¼å…¥ä¼˜å…ˆçº§é˜Ÿåˆ—çš„åŒ…class Solution: def mergeKLists(self, lists): head = point = ListNode(0) pq = PQ() index = 0 for l in lists: if l: # å½“åˆ—è¡¨çš„ä¼˜å…ˆçº§ç›¸åŒ(å³valç›¸ç­‰ï¼‰æ—¶ï¼Œç”±å…ƒç¥–ä¸­çš„ç¬¬äºŒä¸ªå…ƒç´ ç¡®å®šä¼˜å…ˆçº§ï¼Œ # è€Œé“¾è¡¨æ˜¯å¯¹è±¡ä¸èƒ½ç›´æ¥ç¡®å®šä¼˜å…ˆçº§ï¼Œæ‰€ä»¥åŠ å…¥ä¸€ä¸ªå˜åŒ–çš„ä¸‹æ ‡ä½œä¸ºä¼˜å…ˆçº§é¿å…ç¨‹åºå´©æºƒ pq.put((l.val,index,l)) index += 1 while not pq.empty(): val,index, node = pq.get() # ä¸èƒ½ç›´æ¥æ“ä½œpointï¼Œä¼šå¯¼è‡´é“¾è¡¨çš„æ–­è£‚ point.next = node point = point.next node = node.next if node != None: pq.put((node.val,index,node)) index += 1 return head.next å¤æ‚åº¦åˆ†æ O(N log k) :æ¯”è¾ƒå¤§å°çš„æ—¶é—´èŠ±è´¹å°†è¢«å‡å°‘åˆ°O(log k)ï¼Œå› ä¸ºä¼˜å…ˆçº§é˜Ÿåˆ—çš„å†…éƒ¨å®ç°æœºåˆ¶ç”¨åˆ°äº†å †ï¼Œä½†æ˜¯æ‰¾åˆ°æœ€å°å€¼çš„èŠ‚ç‚¹ä»…ä»…èŠ±è´¹ O(1)ï¼Œ åœ¨æœ€ç»ˆçš„é“¾è¡¨ä¸­æœ‰Kä¸ªèŠ‚ç‚¹ã€‚]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼Œé“¾è¡¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[21é¢˜æœ‰åºé“¾è¡¨çš„åˆå¹¶]]></title>
    <url>%2F2019%2F02%2F22%2F21%E9%A2%98%E5%90%88%E5%B9%B6%E4%B8%A4%E4%B8%AA%E6%9C%89%E5%BA%8F%E9%93%BE%E8%A1%A8%2F</url>
    <content type="text"><![CDATA[LeetCodeåˆ·é¢˜ä¹‹21é¢˜æœ‰åºé“¾è¡¨çš„åˆå¹¶ éš¾åº¦ï¼šeasy æ€è·¯ï¼šç¡¬ç®— ä¸€ã€é¢˜ç›®æè¿°å°†ä¸¤ä¸ªæœ‰åºé“¾è¡¨åˆå¹¶ä¸ºä¸€ä¸ªæ–°çš„æœ‰åºé“¾è¡¨å¹¶è¿”å›ã€‚æ–°é“¾è¡¨æ˜¯é€šè¿‡æ‹¼æ¥ç»™å®šçš„ä¸¤ä¸ªé“¾è¡¨çš„æ‰€æœ‰èŠ‚ç‚¹ç»„æˆçš„ã€‚ ç¤ºä¾‹ï¼š 12è¾“å…¥ï¼š1-&gt;2-&gt;4, 1-&gt;3-&gt;4è¾“å‡ºï¼š1-&gt;1-&gt;2-&gt;3-&gt;4-&gt;4 äºŒã€é—®é¢˜åˆ†ææœ‰åºé“¾è¡¨çš„åˆå¹¶æ˜¯å½’å¹¶æ’åºä¸­çš„ç»å…¸ç®—æ³•ï¼Œè¿™é¢˜é‡‡ç”¨å¸¸è§„æ€è·¯å³å¯è§£å†³é—®é¢˜ï¼Œå”¯ä¸€è¦æ³¨æ„çš„ç‚¹æ˜¯å½“æŒ‡é’ˆpã€qä¸­ä»»ä¸€æŒ‡é’ˆä¸ºç©ºæ—¶åç»­åº”è¯¥å¦‚ä½•æ“ä½œã€‚ ä¸‰ã€ä»£ç åˆ†æ1234567891011121314151617181920212223242526272829303132333435def mergeTwoLists(self, l1, l2,): p = l1 q = l2 head = None # p qå‡ä¸ä¸ºç©º while p != None and q != None: if p.val &lt;= q.val : if head == None: head = p n = p p = p.next else: n.next = p n = n.next p = p.next else : if head == None: head = q n = q q = q.next else: n.next = q n = n.next q = q.next # p qä¸­ä»»ä¸€ä¸ºç©º å°†pæŒ‡å®šä¸ºéç©º ç›´æ¥å°†påé¢çš„èŠ‚ç‚¹è¿åœ¨nçš„åé¢ if p == None and q !=None: p = q q = None if head == None: head = p n = p else: n.next = p return head æ—¶é—´å¤æ‚åº¦åˆ†æï¼š O(M+N) Mä¸ºl1é“¾è¡¨çš„é•¿åº¦ï¼ŒNä¸ºl2é“¾è¡¨çš„é•¿åº¦]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>é“¾è¡¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[LeetCodeåˆ·é¢˜ä¹‹20é¢˜æœ‰æ•ˆçš„æ‹¬å·]]></title>
    <url>%2F2019%2F02%2F22%2F20%E9%A2%98%E6%8B%AC%E5%8F%B7%E7%9A%84%E9%85%8D%E5%AF%B9%2F</url>
    <content type="text"><![CDATA[LeetCodeåˆ·é¢˜ä¹‹20é¢˜æœ‰æ•ˆçš„æ‹¬å· éš¾åº¦ï¼šç®€å• æ€è·¯ï¼šæ ˆ ä¸€ã€é¢˜ç›®æè¿°ç»™å®šä¸€ä¸ªåªåŒ…æ‹¬ &#39;(&#39;ï¼Œ&#39;)&#39;ï¼Œ&#39;{&#39;ï¼Œ&#39;}&#39;ï¼Œ&#39;[&#39;ï¼Œ&#39;]&#39; çš„å­—ç¬¦ä¸²ï¼Œåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æœ‰æ•ˆã€‚ æœ‰æ•ˆå­—ç¬¦ä¸²éœ€æ»¡è¶³ï¼š å·¦æ‹¬å·å¿…é¡»ç”¨ç›¸åŒç±»å‹çš„å³æ‹¬å·é—­åˆã€‚ å·¦æ‹¬å·å¿…é¡»ä»¥æ­£ç¡®çš„é¡ºåºé—­åˆã€‚ æ³¨æ„ç©ºå­—ç¬¦ä¸²å¯è¢«è®¤ä¸ºæ˜¯æœ‰æ•ˆå­—ç¬¦ä¸²ã€‚ ç¤ºä¾‹ï¼š 12è¾“å…¥: "&#123;[]&#125;"è¾“å‡º: true äºŒã€é—®é¢˜åˆ†æè¿™æ˜¯ä¸€é¢˜éš¾åº¦ä¸ºç®€å•çš„é¢˜ï¼Œä½†æˆ‘ä»æ—§å¾ˆä¹…æ²¡æœ‰æ€è·¯ï¼Œå°±æ˜¯æ²¡æœ‰æƒ³åˆ°åˆ©ç”¨æ ˆçš„ç‰¹æ€§ï¼Œæœ¬é¢˜æ˜¯ä¸€é“ç»å…¸çš„æ ˆçš„ç‰¹æ€§çš„é¢˜ç›®ï¼Œæƒ³åˆ°æ ˆï¼Œå°±æˆåŠŸäº†ä¸€å¤§åŠã€‚ ä¸‰ã€ ä»£ç åˆ†æ123456789101112131415161718192021222324def isValid(self, s): res = True stack = [] for element in s: if not stack: # æ ˆä¸ºç©º stack.append(element) # åˆ©ç”¨æ ˆçš„å…ˆè¿›åå‡ºçš„ç‰¹ç‚¹ï¼Œåˆ¤æ–­åˆ—è¡¨çš„å°¾éƒ¨å³æ ˆçš„å¤´éƒ¨çš„å…ƒç´ æƒ…å†µ elif stack[-1] == '(' and element == ')': stack.pop() # å‡ºæ ˆåœ¨æ ˆçš„å¤´éƒ¨ elif stack[-1] == '[' and element == ']': stack.pop() elif stack[-1] == '&#123;' and element == '&#125;': stack.pop() else: stack.append(element) # è¿›æ ˆä¹Ÿåœ¨æ ˆçš„å¤´éƒ¨ # åˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©ºï¼Œä¸ºç©ºåˆ™è¯´æ˜æ‹¬å·æ˜¯å¯¹ç§°æœ‰æ•ˆ if stack : res = False else : res = True return res å¤æ‚åº¦åˆ†æï¼š O(N) Nä¸ºå­—ç¬¦ä¸²çš„é•¿åº¦]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>æ ˆ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[19é¢˜åˆ é™¤é“¾è¡¨çš„æŒ‡å®šèŠ‚ç‚¹]]></title>
    <url>%2F2019%2F02%2F18%2F19%E9%A2%98%E5%88%A0%E9%99%A4%E9%93%BE%E8%A1%A8%E5%80%92%E6%95%B0N%E7%9A%84%E8%8A%82%E7%82%B9%2F</url>
    <content type="text"><![CDATA[åˆ é™¤é“¾è¡¨çš„æŒ‡å®šèŠ‚ç‚¹ éš¾åº¦ï¼šä¸­ç­‰ æ€è·¯ï¼šçª—å£æ³• ä¸€ã€é—®é¢˜æè¿°ç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œåˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬nä¸ªèŠ‚ç‚¹ï¼Œå¹¶ä¸”è¿”å›é“¾è¡¨çš„å¤´ç»“ç‚¹ã€‚ ç¤ºä¾‹ï¼š ç»™å®šä¸€ä¸ªé“¾è¡¨ï¼š1-&gt;2-&gt;3-&gt;4-&gt;5, å’Œ n = 2. å½“åˆ é™¤äº†å€’æ•°ç¬¬äºŒä¸ªèŠ‚ç‚¹åï¼Œé“¾è¡¨å˜ä¸º 1-&gt;2-&gt;3-&gt;5. è¯´æ˜ï¼šç»™å®šçš„nä¿è¯æ˜¯æœ‰æ•ˆçš„ã€‚ è¿›é˜¶ï¼šä½ èƒ½å°è¯•ä¸€è¶Ÿæ‰«æå®ç°å—ï¼Ÿ äºŒã€é—®é¢˜åˆ†æ2.1 é€»è¾‘æ¢³ç†æœ¬é¢˜å’Œé“¾è¡¨æœ‰å…³ï¼Œé“¾è¡¨æ˜¯æœ€åŸºæœ¬çš„æ•°æ®ç»“æ„ï¼Œé“¾è¡¨ä¸­çš„å…ƒç´ å¯å­˜å‚¨åœ¨å†…å­˜çš„ä»»ä½•åœ°æ–¹ï¼Œé“¾è¡¨çš„æ¯ä¸ªå…ƒç´ éƒ½å­˜å‚¨äº†ä¸‹ä¸€ä¸ªå…ƒç´ çš„åœ°å€ï¼Œä»è€Œä½¿ä¸€ç³»åˆ—éšæœºçš„å†…å­˜åœ°å€ä¸²åœ¨ä¸€èµ·ã€‚é“¾è¡¨çš„ä¼˜åŠ¿åœ¨äºæ’å…¥å’Œåˆ é™¤å…ƒç´ ï¼Œå¯ä»¥å¿«é€Ÿå®Œæˆè€Œä¸éœ€è¦ç§»åŠ¨å…¶ä»–å…ƒç´ ã€‚é“¾è¡¨ç”±ä¸€ä¸ªä¸ªèŠ‚ç‚¹ç»„æˆï¼ŒèŠ‚ç‚¹æœ‰ä¸¤éƒ¨åˆ†ï¼ŒèŠ‚ç‚¹çš„å€¼å’Œä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„åœ°å€ï¼Œå°¾èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„åœ°å€ä¸ºç©ºã€‚åœ¨Pythonä¸­å³Noneï¼Œæƒ³è¦é€šè¿‡ä¸€è¶Ÿæ‰«æåˆ é™¤å€’æ•°ç¬¬nä¸ªèŠ‚ç‚¹ï¼Œæœ€æœ‰æ•ˆçš„æ–¹æ³•å°±æ˜¯çª—å£æ³•ï¼ŒæŒ‡é’ˆpï¼Œqä¹‹é—´é—´éš”nä¸ªèŠ‚ç‚¹ï¼Œç„¶åæŒ‡é’ˆpã€qåŒæ­¥å¾€å°¾éƒ¨ç§»åŠ¨ï¼Œå½“qåˆ°è¾¾å°¾èŠ‚ç‚¹æ—¶ï¼Œpåçš„èŠ‚ç‚¹å³æˆ‘ä»¬éœ€è¦åˆ é™¤çš„ç›®æ ‡èŠ‚ç‚¹ã€‚å°†på†…èŠ‚ç‚¹çš„åœ°å€æŒ‡å‘ä¸‹ä¸‹ä¸ªèŠ‚ç‚¹ï¼Œåˆ é™¤ç›®æ ‡èŠ‚ç‚¹ï¼Œä»»åŠ¡å®Œæˆã€‚ 2.2 éš¾ç‚¹åˆ†æå‡½æ•°ä¼ è¿›æ¥çš„å‚æ•°å’Œä¼ å‡ºå»çš„å€¼éƒ½æ˜¯å¤´ç»“ç‚¹ï¼Œåœ¨åˆ é™¤èŠ‚ç‚¹æ—¶ï¼Œæœ‰ä¸€ä¸ªé—®é¢˜éœ€è¦è€ƒè™‘ï¼Œæ€ä¹ˆä¿è¯ä¸‹ä¸‹ä¸ªèŠ‚ç‚¹æ˜¯å­˜åœ¨çš„ï¼Œå¦‚æœæ°å¥½è¦åˆ é™¤çš„å°±æ˜¯å¤´èŠ‚ç‚¹ï¼Œæ˜¯å¦åœ¨ç¨‹åºä¸­è€ƒè™‘åˆ°äº†ï¼Ÿå…¶å®æˆ‘åˆšå¼€å§‹ä¹Ÿæ²¡è€ƒè™‘ï¼Œå°±æŠŠç¤ºä¾‹ä¼ è¿›å»æœ‰æ­£ç¡®ç»“æœè¿”å›é«˜å…´çš„å±é¢ å±é¢ ä»¥ä¸ºè‡ªå·±åšå®Œäº†ï¼Œä½†ä¸Šä¼ ä¸Šå»ä¹‹åè¢«ç‰¹æ®Šæƒ…å†µæå¾—æ™•å¤´è½¬å‘ï¼Œä»”ç»†åˆ†æäº†å¾ˆé•¿æ—¶é—´æ‰æŠŠheadã€pã€qä¹‹é—´çš„å…³ç³»ç†æ¸…æ¥šã€‚ ä¸‰ã€ä»£ç åˆ†æ12345678910111213141516171819def removeNthFromEnd(self, head, n): if head: p=head q=head # æ„å»ºçª—å£ï¼Œä¿è¯pã€qæŒ‡é’ˆä¹‹é—´é—´éš”nä¸ªèŠ‚ç‚¹ while n&gt;0 and q != None: #å½“å¾ªç¯ç»“æŸï¼Œå¦‚æœq=Noneï¼Œåˆ™è¯´æ˜éœ€è¦åˆ é™¤çš„æ˜¯å¤´ç»“ç‚¹ã€‚ q = q.next n -= 1 if q != None:#éœ€è¦åˆ é™¤çš„èŠ‚ç‚¹ä¸æ˜¯å¤´ç»“ç‚¹ï¼Œpã€qæ­£å¸¸å¾€é“¾è¡¨å°¾éƒ¨æ»‘åŠ¨ while q.next != None : p = p.next q = q.next if q == None : #è¦åˆ é™¤å¤´èŠ‚ç‚¹ head = p.next else: p.next = p.next.next #æ­£å¸¸æƒ…å†µ åˆ é™¤påé¢çš„èŠ‚ç‚¹ return head å¤æ‚åº¦åˆ†æï¼š O(N) Nä¸ºé“¾è¡¨çš„èŠ‚ç‚¹ä¸ªæ•°]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>é“¾è¡¨</tag>
        <tag>çª—å£æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[18é¢˜å››ä¸ªæ•°çš„æ±‚å’Œ]]></title>
    <url>%2F2019%2F02%2F18%2F18%E9%A2%98%E5%9B%9B%E4%B8%AA%E6%95%B0%E7%9A%84%E5%92%8C%2F</url>
    <content type="text"><![CDATA[å››ä¸ªæ•°çš„å’Œ éš¾åº¦ï¼šä¸­ç­‰ æ€è·¯ï¼šå¤´å°¾é€¼è¿‘æ³• ä¸€ã€é—®é¢˜æè¿°ç»™å®šä¸€ä¸ªåŒ…å«nä¸ªæ•´æ•°çš„æ•°ç»„numså’Œä¸€ä¸ªç›®æ ‡å€¼targetï¼Œåˆ¤æ–­numsä¸­æ˜¯å¦å­˜åœ¨å››ä¸ªå…ƒç´ aï¼Œbï¼Œcï¼Œå’Œdï¼Œä½¿å¾—a+b+c+dçš„å€¼ä¸targetç›¸ç­‰ï¼Ÿæ‰¾å‡ºæ‰€æœ‰æ»¡è¶³æ¡ä»¶ä¸”ä¸é‡å¤çš„å››å…ƒç»„ã€‚ æ³¨æ„ï¼šç­”æ¡ˆä¸­ä¸å¯ä»¥åŒ…å«é‡å¤çš„å››å…ƒç»„ã€‚ ç¤ºä¾‹ï¼š ç»™å®šæ•°ç»„nums=[1, 0, -1, 0, -2, 2], å’Œtarget=0ã€‚ æ»¡è¶³è¦æ±‚çš„å››å…ƒç»„é›†åˆä¸ºï¼š [[-1 ,0, 0, 1], [-2, -1, 1, 2], [-2 ,0, 0, 2]] äºŒã€é—®é¢˜åˆ†æåœ¨LeetCodeçš„é¢˜ç›®é¡ºåºæœ‰ä¸€ä¸ªç”±æµ…å…¥æ·±çš„è¿‡æ¸¡ï¼Œè¿™é¢˜çš„è§£å†³æ–¹æ³•å®Œå…¨å¯ä»¥å‚ç…§ä¸‰ä¸ªæ•°çš„æ±‚å’Œé—®é¢˜ã€‚è®©æˆ‘ä»¬æ¥å›é¡¾ä¸€ä¸ªä¸‰ä¸ªæ•°çš„æ±‚å’Œé—®é¢˜ï¼Œä¸‰ä¸ªæ•°çš„æ±‚å’Œä¸å››ä¸ªæ•°çš„æ±‚å’Œè¡¨é¢ä¸Šæ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼Œæ— éæ˜¯æŠŠä¸‰ä¸ªæ•°æ›¿æ¢ä¸ºå››ä¸ªæ•°ï¼Œæ‰€ä»¥åœ¨è§£å†³æ–¹å¼ä¸Šå†…æ ¸æœºåˆ¶ä¹Ÿæ˜¯ç›¸åŒçš„ã€‚ 2.1 æ’åºæ•°çš„æ±‚å’Œé—®é¢˜ï¼Œæœ€ç®€å•ç²—æš´çš„æ–¹æ³•å°±æ˜¯æŠŠç»™å®šçš„æ•°ç»„forå¾ªç¯éå†å‡ æ¬¡ï¼Œæ‰¾åˆ°æ‰€æœ‰ç¬¦åˆè¦æ±‚çš„æ•°ï¼Œä½†æ˜¯å› ä¸ºæ—¶é—´å¼€é”€è¿‡å¤§ï¼Œæäº¤çš„æ—¶å€™ä¸è¢«é€šè¿‡ï¼Œæ‰€ä»¥åªèƒ½æ‰¾å…¶ä»–çš„æ¸ é“ã€‚ç¬¬ä¸€æ­¥ï¼Œå°†æ‰€ç»™çš„æ•°æŒ‰ç…§ä»å°åˆ°å¤§æ’åºï¼ŒPythonæœ‰å†…ç½®çš„æ’åºå‡½æ•°ï¼Œè¿™é‡Œå°±ç›´æ¥è°ƒç”¨äº†ã€‚ 2.2 å¼€å§‹éå†åœ¨å¤šä¸ªæ•°æ±‚å’Œé—®é¢˜ä¸­ï¼Œä½¿ç”¨çš„æ–¹æ³•ä¸ºä¸¤å¤´æ³•ï¼Œå…·ä½“å®ç°æ–¹æ³•å¦‚ä¸‹ã€‚é¦–å…ˆå›ºå®šç¬¬ä¸€ä¸ªæ•°ï¼Œä»æ•°ç»„çš„å¤´éƒ¨å¼€å§‹ï¼Œæ±‚å‡ºç›®æ ‡æ•°targetä¸ç¬¬ä¸€ä¸ªæ•°çš„å·®å€¼diffï¼›ç„¶åå›ºå®šç¬¬äºŒä¸ªæ•°ï¼Œæ±‚å‡ºä¹‹å‰çš„å·®å€¼diffä¸å½“å‰æ•°çš„å·®å€¼ä½œä¸ºæ–°ç›®æ ‡goalï¼›ç„¶åä½¿ç”¨å¤´å°¾æ³•ï¼Œå¦‚æœå¤´å°¾çš„å’Œå°äºgoalï¼Œåˆ™å¤´å¾€åç§»ï¼Œå¦‚æœå¤´å°¾çš„å’Œå¤§äºgoalï¼Œåˆ™å°¾å¾€å‰ç§»ï¼ˆç»è¿‡æ’åºåï¼Œå°¾éƒ¨çš„æ•°å¤§å¤´éƒ¨çš„æ•°å°ï¼‰ï¼Œå¦‚æœå¤´å°¾çš„å’Œæ­£å¥½ç­‰äºgoalï¼Œé‚£ä¹ˆæˆ‘ä»¬æ‰¾åˆ°äº†ç›®æ ‡æ•°ï¼ŒæŠŠå››ä¸ªæ•°å­˜åˆ°ç»“æœä¸­ï¼ŒåŒæ—¶å¾€ä¸­é—´ç§»åŠ¨å¤´å°¾çš„åæ ‡ï¼Œå¤´å°¾ä½ç½®ä¸‹æ ‡ç›¸ç­‰æ—¶æ­¤æ¬¡éå†ç»“æŸï¼›ç„¶åä¾æ¬¡ç§»åŠ¨å‰ä¸¤ä¸ªå›ºå®šçš„æ•°ã€‚ 2.3 éš¾ç‚¹åˆ†æè¿™é¢˜ç¡®å®šäº†ç®—æ³•ï¼Œè¿˜æ˜¯æœ‰å¾ˆå¤šç»†èŠ‚éœ€è¦æ¨æ•²ï¼Œè€Œè¿™äº›ç»†èŠ‚æœ‰äº›æ—¶å€™æ¯”ç®—æ³•æœ¬èº«æ›´èŠ±æ—¶é—´ã€‚åœ¨é¢˜ç›®æè¿°ä¸­ï¼Œå®ƒç‰¹åœ°æå‡ºè®©æˆ‘ä»¬æ³¨æ„è§£å†³é‡å¤å…ƒç´ çš„é—®é¢˜ï¼Œè§£å†³é‡å¤é—®é¢˜æœ‰ä¸¤ä¸ªæ€è·¯ï¼šä¸€æ˜¯å¤„ç†è¿”å›çš„æ•°ç»„ï¼Œå°†å…¶ä¸­é‡å¤çš„å…ƒç´ å»æ‰ï¼›äºŒæ˜¯ä»æºå¤´ä¸Šè§£å†³é—®é¢˜ï¼Œåœ¨ç”Ÿæˆç»“æœæ•°ç»„æ—¶ï¼Œä¸€æ—¦å‘ç°é‡å¤å°±ä¸å†æ·»åŠ å…¥è¿”å›æ•°ç»„ã€‚è¿™é¢˜çœŸæ­£çš„éš¾ç‚¹å°±åœ¨è¿™é‡Œäº†ï¼Œæ€ä¹ˆæ ·æ‰èƒ½æœ€æœ‰æ•ˆçš„å»é™¤é‡å¤å…ƒç´ å‘¢ï¼Ÿè¿™é‡Œåªæä¾›ä¸€ä¸ªå·§å¦™çš„æ€è·¯ï¼Œé‡å¤çš„å…ƒç´ ä»ä½•è€Œæ¥ï¼Œå½’æ ¹ç»“åº•æ˜¯å› ä¸ºæ•°ç»„ä¸­æœ¬èº«å°±æœ‰é‡å¤çš„å…ƒç´ ï¼Œåœ¨æ±‚å’Œçš„æ—¶å€™ï¼Œå½“æˆ‘ä»¬ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå…ƒç´ çš„æ—¶å€™ï¼Œæ£€æµ‹å½“å‰å…ƒç´ ä¸ä¸Šä¸€ä¸ªå…ƒç´ æ˜¯å¦ç›¸ç­‰ï¼Œè¿™é‡Œä¸ºä»€ä¹ˆæ˜¯ä¸å‰ä¸€ä¸ªå…ƒç´ ä½œæ¯”è¾ƒè€Œä¸æ˜¯ä¸åä¸€ä¸ªå…ƒç´ ä½œæ¯”è¾ƒï¼Œè¿™æ˜¯æœ‰åŸå› çš„ï¼Œå¦‚æœä¸åä¸€ä¸ªå…ƒç´ ä½œæ¯”è¾ƒçš„è¯ï¼Œé‚£ä¹ˆå°±ä¼šæ¼æ‰ä¸€ç§æƒ…å†µï¼Œè¿™ä¸¤ä¸ªæ•°ç›¸ç­‰ä½†æ˜¯ä»–ä»¬çš„å’Œå°±æ˜¯æˆ‘ä»¬æƒ³æ‰¾çš„ï¼Œå¦‚æœä¸åä¸€ä¸ªå…ƒç´ ä½œæ¯”è¾ƒçš„è¯è¿™ä¸ªæ•°è¿˜æ²¡æœ‰å‚ä¸è®¡ç®—å°±ä¼šè¢«è·³è¿‡ã€‚ç»“æœä¼šé”™è¯¯ã€‚ï¼ˆæ³¨æ„ï¼Œå½“æˆ‘ä»¬è®¿é—®ä¸€ä¸ªå…ƒç´ çš„æ—¶å€™è¦ç¡®ä¿è¿™ä¸ªå…ƒç´ å­˜åœ¨å¦åˆ™å°±ä¼šæŠ¥é”™ï¼‰ï¼Œå¦‚æœç›¸ç­‰å°±è·³è¿‡æ­¤æ¬¡å¾ªç¯ã€‚ï¼ˆéœ€è¦ç¡®ä¿æ¯ä¸ªä¸é‡å¤å…ƒç´ éƒ½è¢«è®¿é—®åˆ°ï¼‰ 2.4 ç»†èŠ‚é¦–å…ˆè¦å¯¹è¾“å…¥çš„æ•°ç»„è¿›è¡Œé•¿åº¦åˆ¤æ–­ï¼Œé¿å…è¾“å…¥ç©ºæ•°ç»„æ—¶åç»­è¿›è¡Œä¸å­˜åœ¨ä½ç½®çš„çš„è®¿é—®å¯¼è‡´ç¨‹åºå´©æºƒï¼›å…¶æ¬¡æ˜¯é‡å¤å…ƒç´ çš„é—®é¢˜ï¼Œåœ¨å…ƒç´ ç§»åŠ¨è¿‡ç¨‹ä¸­ï¼Œä¸ºäº†ä¸äº§ç”Ÿé‡å¤çš„å››ä¸ªæ•°ç»„åˆï¼Œå›ºå®šçš„ç¬¬ä¸€ä¸ªæ•°å¾€åç§»åŠ¨æ—¶ï¼Œéœ€è¦è€ƒè™‘å½“å‰æ•°ä¸ä¸Šä¸€ä¸ªæ•°æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰ï¼Œåˆ™ä½¿ç”¨continueè¯­å¥è·³è¿‡æ­¤æ¬¡å¾ªç¯ã€‚å›ºå®šçš„ç¬¬ä¸€ä¸ªæ•°ä¹Ÿå­˜åœ¨ä¸€æ¨¡ä¸€æ ·çš„é—®é¢˜ã€‚å…¶æ¬¡æ˜¯é¦–å°¾ç§»åŠ¨æ—¶ï¼Œå½“æ£€æµ‹åˆ°é¦–å°¾ä¹‹å’Œç›¸ç­‰æ—¶ï¼Œå¤´éƒ¨å’Œå°¾éƒ¨çš„ä½ç½®éƒ½å¾€ä¸­é—´ç§»ï¼Œè¿™æ—¶å¤´å°¾åˆ†åˆ«ä¸åä¸€ä¸ªæ•°ä½œæ¯”è¾ƒï¼Œå¦‚æœç›¸ç­‰çš„è¯ï¼Œå¤´å°¾åæ ‡ç»§ç»­å¾€ä¸­é—´é ã€‚ï¼ˆè¿™é‡Œæ£€æµ‹åˆ°å¤´å°¾ä¹‹å’Œä¸ç›®æ ‡ç›¸ç­‰æ—¶ï¼Œä¸å­˜åœ¨ä¸€ä¸ªæ•°è¿˜æ²¡ç”¨åˆ°å°±è¢«ä¸¢å¼ƒï¼Œæ‰€ä»¥å¯ä»¥ä¸åä¸€ä¸ªæ•°ä½œæ¯”è¾ƒï¼‰ ä¸‰ã€ä»£ç åˆ†æ1234567891011121314151617181920212223242526272829303132def fourSum(self, nums, target): res=[] nums=sorted(nums) #æ’åº length=len(nums) if length &lt; 4: return res for i in range(0, length-3): diff=target-nums[i] if i &gt;0 and nums[i-1] == nums[i]: #é˜²æ­¢é‡å¤ continue for j in range(i+1, length-2): goal=diff-nums[j] front=j+1 back=length-1 if j &gt;i+1 and nums[j-1] == nums[j]:#é˜²æ­¢é‡å¤ continue while front&lt;back: the_sum=nums[front]+nums[back] if the_sum &lt; goal: front += 1 if the_sum &gt; goal: back -= 1 if the_sum == goal: res.append([nums[i], nums[j], nums[front],nums[back]]) while front &lt;back and nums[front] == nums[front+1]:#é˜²æ­¢é‡å¤ front+=1 while front &lt; back and nums[back]==nums[back-1]:#é˜²æ­¢é‡å¤ back -=1 front += 1 back -= 1 return res å¤æ‚åº¦åˆ†æï¼š è€—æ—¶è¿˜æ˜¯éå¸¸å¤šçš„ï¼Œæ’åº+O(N^3^)ã€‚]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>æ±‚å’Œ</tag>
        <tag>æ•°ç»„</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[17é¢˜ç”µè¯å·ç çš„å­—æ¯ç»„åˆ]]></title>
    <url>%2F2019%2F02%2F18%2F17%E9%A2%98%E7%94%B5%E8%AF%9D%E5%8F%B7%E7%A0%81%E7%9A%84%E5%AD%97%E6%AF%8D%E7%BB%84%E5%90%88%2F</url>
    <content type="text"><![CDATA[ç”µè¯å·ç çš„å­—æ¯ç»„åˆ éš¾åº¦ï¼šä¸­ç­‰ æ€è·¯ï¼šé€’å½’ ä¸€ã€é¢˜ç›®æè¿°ç»™å®šä¸€ä¸ªä»…åŒ…å«æ•°å­—2-9çš„å­—ç¬¦ä¸²ï¼Œè¿”å›æ‰€æœ‰å®ƒèƒ½è¡¨ç¤ºçš„å­—æ¯ç»„åˆã€‚ ç»™å‡ºæ•°å­—åˆ°å­—æ¯çš„æ˜ å°„å¦‚ä¸‹ï¼ˆä¸ç”µè¯æŒ‰é”®ç›¸åŒï¼‰ã€‚æ³¨æ„1ä¸å¯¹åº”ä»»ä½•å­—æ¯ã€‚ ç¤ºä¾‹ï¼š è¾“å…¥ï¼šâ€œ23â€ è¾“å‡ºï¼š[â€œadâ€, â€œaeâ€, â€œafâ€, â€œbdâ€, â€œbeâ€, â€œbfâ€, â€œcdâ€, â€œceâ€, â€œcfâ€] äºŒã€è§£é¢˜è¿‡ç¨‹æ‹¿åˆ°è¿™ä¸ªé¢˜ç›®ï¼Œåˆ†ææˆ‘ä»¬è¦è§£å†³çš„é—®é¢˜ï¼Œé¢˜ç›®ç»™å‡ºäº†æ•°å­—åˆ°å­—æ¯çš„æ˜ å°„ï¼Œæ•…é¦–å…ˆè¦æŠŠæ˜ å°„å…³ç³»ä¸€ä¸€å¯¹åº”å‡ºæ¥ï¼Œåœ¨Pythonä¸­å¾ˆå®¹æ˜“æƒ³åˆ°å­—å…¸ï¼ŒæŠŠæ˜ å°„å…³ç³»å…ˆå­˜èµ·æ¥ï¼Œå”¯ä¸€å€¼å¾—æ¨æ•²çš„æ˜¯è¿™é‡Œçš„å€¼çš„ç±»å‹æ˜¯å­˜æˆå­—ç¬¦ä¸²&quot;abc&quot;è¿˜æ˜¯æ•°ç»„[&#39;a&#39;,&#39;b&#39;,&#39;c&#39;]å‘¢ï¼Ÿçœ‹åˆ°ç”µè¯æŒ‰é”®æˆ‘ä»¬å¾ˆå®¹æ˜“æƒ³åˆ°å­—ç¬¦ä¸²ï¼Œä½†ç ”ç©¶æˆ‘ä»¬æœ€ç»ˆçš„è¾“å‡ºç»“æœç±»å‹ï¼Œå­˜ä¸ºæ•°ç»„ç±»å‹æ›´æ–¹ä¾¿åè¾¹çš„è®¡ç®—ï¼Œå¦‚ä¸‹ï¼š 1234dict_map = &#123;'2':['a','b','c'], '3':['d','e','f'], '4':['g','h','i'], '5':['j','k','l'], '6':['m','n','o'], '7':['p','q','r','s'], '8':['t','u','v'], '9':['w','x','y','z']&#125; ç¬¬äºŒæ­¥æ¥åˆ°äº†æ€ä¹ˆè§£å†³è¿™ä¸ªé¢˜ç›®ï¼Œè¿™ä¸ªé¢˜ç›®çœ‹èµ·æ¥å¾ˆç®€å•ï¼Œå®é™…ä¸Šä¹Ÿå¾ˆç®€å•ä½†å°±éœ€è¦é‚£ä¹ˆçµå…‰ä¸€ç°ï¼Œé¦–å…ˆæŠŠå®ƒçš„ç»“æ„å›¾ç”»å‡ºæ¥ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå…¨ç»„åˆé—®é¢˜ï¼Œé€šè¿‡forå¾ªç¯éå†ç»™å‡ºçš„æ•°å­—æ‰€å¯¹åº”çš„å­—æ¯ï¼Œç„¶åå†…éƒ¨åµŒå¥—forå¾ªç¯éå†ä¸‹ä¸€ä¸ªæ•°å­—å¯¹åº”çš„å­—æ¯ï¼Œå°±è¿™æ ·å±‚å±‚åµŒå¥—ï¼Œå”¯ä¸€çš„éš¾ç‚¹æ˜¯æˆ‘ä»¬æ— æ³•æå‰é¢„çŸ¥éœ€è¦åµŒå¥—å¤šå°‘å±‚forå¾ªç¯ã€‚ çµå…‰ä¹ç°äº†ï¼Œé€’å½’å‡½æ•°èƒ½å¤Ÿå¾ˆå¥½çš„è§£å†³è¿™ç§å¾ªç¯é—®é¢˜ã€‚é€šè¿‡è®¤çœŸåˆ†æï¼Œå‘ç°è¿™é¢˜ç”¨é€’å½’æ˜¯æœ€æ£’çš„æ–¹æ³•ã€‚é¦–å…ˆæ¥å¤ä¹ ä¸€ä¸‹é€’å½’ï¼š é€’å½’å°†é—®é¢˜åˆ†è§£ä¸ºè¶Šæ¥è¶Šå°çš„å­é—®é¢˜ï¼Œç›´åˆ°é—®é¢˜çš„è§„æ¨¡å°åˆ°å¯ä»¥è¢«ç›´æ¥è§£å†³ã€‚æ¯ä¸ªé€’å½’å‡½æ•°éƒ½æœ‰ä¸¤ä¸ªéƒ¨åˆ†ï¼šåŸºçº¿æ¡ä»¶å’Œé€’å½’æ¡ä»¶ ã€‚é€’å½’æ¡ä»¶æŒ‡çš„æ˜¯å‡½æ•°è°ƒç”¨è‡ªå·±ï¼Œè€ŒåŸºçº¿æ¡ä»¶æ˜¯æŒ‡å‡½æ•°ä¸å†è°ƒç”¨è‡ªå·±ï¼Œä»è€Œé¿å…æ— é™å¾ªç¯ã€‚ å¦‚æœä½ è¿˜å¯¹é€’å½’ç®—æ³•æœ‰ç–‘é—®çš„è¯ï¼Œè¯•ç€å†™ä¸€ä¸ªå…³äºæŸä¸ªæ•°é˜¶ä¹˜çš„é€’å½’ç®—æ³•ï¼Œfact(n) return n*(n-1)*(n-2)...è§„å®š0ï¼=1ï¼Œæœ€åˆé€‚çš„åŸºçº¿æ¡ä»¶ä»€ä¹ˆå‘¢ï¼Ÿ åˆ†ææ­¤é¢˜ï¼ŒåŸºçº¿æ¡ä»¶å¯ä»¥æ˜¯å¾…è®¿é—®çš„æ•°å­—ä¸ªæ•°ä¸º1æ—¶ï¼Œè¿”å›è¿™ä¸ªé”®çš„æ˜ å°„å€¼ï¼›é€’å½’æ¡ä»¶ä¸ºè®¿é—®å½“å‰è®¿é—®æ•°å­—çš„ç¬¬ä¸€ä¸ªæ•°å­—ï¼Œç„¶åforå¾ªç¯éå†è¿™ä¸ªæ•°å­—å¯¹åº”çš„å­—æ¯ï¼Œåœ¨forå¾ªç¯å†…éƒ¨ï¼Œå°†æ•°å­—çš„ç¬¬ä¸€ä½å»æ‰ç„¶åè°ƒç”¨å‡½æ•°æœ¬èº«ã€‚ç„¶åforå¾ªç¯éå†è¿”å›å€¼ã€‚ å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819class Solution: def letterCombinations(self, digits): dict_map = &#123;'2':['a','b','c'], '3':['d','e','f'], '4':['g','h','i'], '5':['j','k','l'], '6':['m','n','o'], '7':['p','q','r','s'], '8':['t','u','v'], '9':['w','x','y','z']&#125; res = [] if len(digits) : if len(digits) == 1: return dict_map[digits[0]] else: first = dict_map[digits[0]] for x in first: second = self.letterCombinations(digits[1:]) for y in second: t = x + y res.append(t) return res return res]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>é€’å½’</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ ‘è“æ´¾æ§åˆ¶çº¢å¤–é¥æ§]]></title>
    <url>%2F2019%2F01%2F23%2F%E6%A0%91%E8%8E%93%E6%B4%BE%E6%8E%A7%E5%88%B6%E7%BA%A2%E5%A4%96%E9%81%A5%E6%8E%A7%2F</url>
    <content type="text"><![CDATA[æ ‘è“æ´¾æ§åˆ¶çº¢å¤–é¥æ§ å†™åœ¨å‰é¢ï¼šå› é¡¹ç›®éœ€è¦ï¼Œæ•…åœ¨ç½‘ä¸Šæ·˜äº†ä¸€ä¸ªçº¢å¤–é¥æ§æ¨¡å—ï¼Œåœ¨æ ‘è“æ´¾ä¸Šå­¦ä¹ ä¸€ä¸‹çº¢å¤–é¥æ§ã€‚ ä¸€ã€çº¢å¤–é¥æ§åŠæ¥çº¿â€‹ 38Ké€šç”¨çº¢å¤–é¥æ§å™¨ï¼Œé‡‡ç”¨NECç¼–ç æ ¼å¼ï¼Œä¼ è¾“è·ç¦»å¤§äºå…«ç±³ï¼Œæ¯”è¾ƒé€‚åˆæ—¥å¸¸å¼€å‘ï¼Œä½¿ç”¨æ–¹ä¾¿ã€‚ â€‹ çº¢å¤–æ¥æ”¶æ¨¡å—å¼•è„šè¯´æ˜ï¼šSä¸ºOUTå¼•è„šï¼Œä¸­é—´ä¸ºVCCï¼Œ-ä¸ºGNDã€‚æ ¹æ®æ¨¡å—ä¸Šçš„æ ‡è¯†æ¥æ¥ã€‚ â€‹ æ’åˆ°æ ‘è“æ´¾ä¸Šï¼ŒSæ¥æ ‘è“æ´¾çš„12å¼•è„šï¼ˆç‰©ç†å¼•è„šç¼–ç ï¼‰ï¼Œå…¶BCMç¼–ç ä¸º18ï¼›VCCæ¥3.3Vï¼›GNDæ¥æ ‘è“æ´¾ä»»æ„GNDå¼•è„šå³å¯ã€‚æ¨¡å—å®æ‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š äºŒã€è½¯ä»¶é…ç½®2.1 å®‰è£…lircï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶â€‹ LIRCï¼ˆLinux Infrared remote controlï¼‰æ˜¯ä¸€ä¸ªLinuxç³»ç»Ÿä¸‹å¼€æºçš„è½¯ä»¶åŒ…ï¼Œç”¨æ¥ä»è¿œç¨‹é€šç”¨çº¢å¤–è®¾å¤‡ä¸Šæ¥æ”¶å’Œå‘é€çº¢å¤–ä¿¡å·ã€‚å¯ä»¥è§£ç å’Œå‘é€çº¢å¤–ä¿¡å·ã€‚ â€‹ é€šè¿‡SSHè¿æ¥æ ‘è“æ´¾ï¼Œå®‰è£…lircï¼š 1sudo apt-get install lirc â€‹ å› ä¸ºlircç‰ˆæœ¬æ›´æ–°çš„åŸå› ï¼Œä¸åŒçš„ç‰ˆæœ¬ä¿®æ”¹çš„é…ç½®æ–‡ä»¶ä¸åŒï¼Œè¾“å…¥lircd -væŸ¥çœ‹lircçš„ç‰ˆæœ¬ï¼Œæˆ‘æ˜¯0.9.4.cï¼Œä¿®æ”¹/etc/lirc/lirc_options.confæ–‡ä»¶ï¼Œç”¨viè¿›å…¥ä¿®æ”¹ï¼š 123[lircd]# driver = devinputdriver = default 2.2 ä¿®æ”¹/boot/config.txtâ€‹ ç”¨viè¿›å…¥æ–‡ä»¶å†…éƒ¨ï¼Œæ‰¾åˆ°dtoverlayå¹¶ä¿®æ”¹å¦‚ä¸‹ï¼š 1dtoverlay=lirc-rpi,gpio_in_pin = 18 â€‹ è¿™é‡Œ18å¯¹åº”æ ‘è“æ´¾BCMç¼–ç çš„gpioæ¥å£ã€‚ 2.3 é‡æ–°å¼€å¯lirc12sudo /etc/init.d/lircd restartsudo modprobe lirc_rpi è‡³æ­¤ï¼Œlircè½¯ä»¶é…ç½®å®Œæˆ ä¸‰ã€æµ‹è¯•çº¢å¤–æ¥æ”¶3.1å…³é—­çº¢å¤–æ¥æ”¶åŠŸèƒ½å‘½ä»¤è¡Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œå…³é—­lircï¼š 1sudo kill $(pidof lircd) 3.4 æµ‹è¯•çº¢å¤–æ¥æ”¶1mode2 -d/dev/lirc0 ç”¨çº¢å¤–é¥æ§å™¨ï¼Œå¯¹ç€æ¥æ”¶å™¨æŒ‰ä¸‹ä»»æ„æŒ‰é”®ï¼Œå±å¹•ä¼šæ‰“å°ç±»ä¼¼ä¸‹é¢çš„å†…å®¹ï¼Œè¯´æ˜çº¢å¤–æ¥æ”¶åŠŸèƒ½æ­£å¸¸ã€‚ 1234space 562pulse 579space 1672pulse 577 åœ¨è¿™é‡Œæˆ‘å¡å£³äº†ï¼Œæ¥æ”¶ä¸åˆ°ä»»ä½•å†…å®¹ï¼Œåå¤æ£€æŸ¥äº†å‰é¢çš„æ­¥éª¤ï¼Œç¡®å®šæ— è¯¯åç»§ç»­è°·æ­Œï¼Œæ‰¾åˆ°äº†è¿™ç¯‡åšå®¢^1ï¼Œä¹‹å‰è¾“å‡ºéšæ„æ‰¾äº†ä¸€ä¸ªIOå£ï¼Œä½†æ˜¯éƒ½æ²¡æœ‰ç”¨ï¼ŒæŠŠOUTè¿æ¥åˆ°GPIO pin12ä¸Šï¼Œç„¶åæ‰§è¡Œ 1sudo dmesg | grep -i lirc å‘ç°æœ‰å†…å®¹äº†ï¼Œæ€€ç–‘æ˜¯çº¢å¤–é¥æ§çš„è¾“å‡ºå¼•è„šæœ‰æŒ‡å®šã€‚ 3.5 çº¢å¤–ç¼–ç å½•åˆ¶é¦–å…ˆæŸ¥çœ‹æœ‰å“ªäº›æŒ‰é”®åå¹¶è®°å½•ï¼Œè¾“å…¥ï¼š 1sudo irrecord --list-namaspace æˆ‘ç”¨çš„å‡ ä¸ªé”®åæ˜¯ï¼š æŒ‰é”® æŒ‰é”®å 1 KEY_1 2 KEY_2 3 KEY_3 4 KEY_4 5 KEY_5 6 KEY_6 7 KEY_7 8 KEY_8 9 KEY_9 0 KEY_0 * KEY_STAR # KEY_PUND â†‘ KEY_UP â†“ KEY_DOWN â† KEY_LEFT â†’ KEY_RIGHT OK KEY_OK æ‰§è¡Œçº¢å¤–çº¿ç¼–ç å½•åˆ¶å‘½ä»¤ï¼š 1sudo irrecord -d /dev/lirc0 ~/lircd.conf åˆšå¼€å§‹éœ€è¦è¾“å…¥æ–‡ä»¶åç§°ï¼Œæœ€ç»ˆä¼šæ ¹æ®æ­¤åç§°ä¿å­˜å¯¹åº”çš„æ–‡ä»¶åï¼Œæˆ‘çš„æ–‡ä»¶åä¸ºpi-keyï¼Œç„¶åä¼šæœ‰ä¸€å †è‹±æ–‡æç¤ºå‡ºæ¥ï¼Œç»§ç»­å›è½¦ï¼Œä¼šè®©ä½ æŒ‰æŒ‰é”®ï¼Œæ¯ä¸ªæŒ‰é”®ä¿è¯å±å¹•ä¸Šè¾“å‡ºä¸€ä¸ª.,ä¸€ç›´æŒ‰ä¿è¯æ‰€æœ‰çš„æŒ‰é”®éƒ½è¢«æŒ‰åˆ°ï¼Œå…¨éƒ¨æŒ‰è¿‡ä¸€éä¹‹åå°±ä¸åœçš„æŒ‰æœ€åæŒ‰çš„é‚£ä¸ªæŒ‰é”® ç„¶åå°±ä¼šå¼¹å‡ºç¬¬äºŒè½®æŒ‰é”®å½•å…¥ï¼Œè¿™æ—¶ä¹Ÿæ˜¯ä¸åœæŒ‰ï¼Œè¦æœ‰è€å¿ƒï¼Œå¾ªç¯æŒ‰ï¼Œä½¿åŠ²æŒ‰ï¼Œç›´åˆ°å¼¹å‡ºéœ€è¦ä½ è¾“å…¥ä¸‹ä¸€ä¸ªæŒ‰é”®çš„åå­—ä¸ºæ­¢ã€‚å¦‚ä¸‹ï¼š è¿™æ—¶ä¾æ¬¡å½•å…¥æŒ‰é”®åå­—ï¼Œç„¶åæŒ‰ä¸‹å¯¹åº”çš„æŒ‰é”®ï¼Œè¾“å…¥æŒ‰é”®åå­—ä¸èƒ½è¾“åˆ é™¤ï¼Œå¦‚æœè¾“é”™äº†ä¹Ÿä¸è¦ç´§ï¼ŒæŒ‰å›è½¦é‡æ–°è¾“å…¥å³å¯ã€‚å°†æ‰€æœ‰çš„æŒ‰é”®éƒ½å½•å…¥ï¼Œè¿™ä¸€æ­¥å°±ç»“æŸäº†ã€‚æˆåŠŸä¹‹åä¼šåœ¨~/ç›®å½•ä¸‹ç”Ÿæˆpi.lircd.confè¿™ä¸ªæ–‡ä»¶ï¼ŒæŠŠè¿™ä¸ªæ–‡ä»¶æ”¾åˆ°/etc/lirc/lircd/lircd.conf.d/è¿™ä¸ªç›®å½•é‡Œå³å¯ï¼Œå‘½ä»¤è¡Œè¾“å…¥ï¼š 1sudo cp ~/pi.lircd.conf /etc/lirc/lircd.conf.d/ å®Œæˆåé‡å¯æ ‘è“æ´¾ã€‚ å››ã€è¿è¡ŒPythonä»£ç è¿è¡Œç¼–å†™çš„Pythonä»£ç ï¼Œç»ˆç«¯ä¼šæ˜¾ç¤ºæŒ‰é”®çš„é”®å€¼ã€‚ Pythonä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586#!/usr/bin/python#-*-coding:utf-8-*-import RPi.GPIO as GPIOimport timefrom Constants import KeysPIN = 18delay_time = 0.00006GPIO.setmode(GPIO.BCM)GPIO.setup(PIN, GPIO.IN, GPIO.PUD_UP)print("irm test start...")def exec_cmd(key_val): if(key_val==Keys.KEY_1): print("Button KEY_1") elif(key_val==Keys.KEY_2): print("Button KEY_2") elif(key_val==Keys.KEY_3): print("Button KEY_3") elif(key_val==Keys.KEY_4): print("Button KEY_4") elif(key_val==Keys.KEY_5): print("Button KEY_5") elif(key_val==Keys.KEY_6): print("Button KEY_6") elif(key_val==Keys.KEY_7): print("Button KEY_7") elif(key_val==Keys.KEY_8): print("Button KEY_8") elif(key_val==Keys.KEY_9): print("Button KEY_9") elif(key_val==Keys.KEY_0): print("Button 0") elif(key_val==Keys.KEY_STAR): print("Button KEY_STAR") elif(key_val==Keys.KEY_POUND): print("Button KEY_POUND") elif(key_val==Keys.KEY_UP): print("Button KEY_UP") elif(key_val==Keys.KEY_LEFT): print("Button KEY_LEFT") elif(key_val==Keys.KEY_OK): print("Button KEY_OK") elif(key_val==Keys.KEY_RIGHT): print("Button KEY_RIGHT") elif(key_val==Keys.KEY_DOWN): print("Button KEY_DOWN") try: while True: if GPIO.input(PIN) == 0: count = 0 while GPIO.input(PIN) ==0 and count &lt;200: count +=1 time.sleep(delay_time) while GPIO.input(PIN) == 1 and count &lt; 80: count += 1 time.sleep(delay_time) idx = 0 cnt = 0 data = [0, 0, 0, 0] for i in range(0, 32): count = 0 while GPIO.input(PIN) ==1 and count &lt; 15: count += 1 time.sleeep(delay_time) count = 0 while GPIO.input(PIN) == 1 and count &lt; 40: count += 1 time.sleep(delay_time) if count &gt; 8: data[idx] |= 1&lt;&lt;cnt if cnt == 7: cnt = 0; idx +=1; else: cnt += 1 if data[0]+data[1] == 0xFF and data[2]+data[3] == 0xFF : print("Get the key: 0x%02x"%data[2]) exec_cmd(data[2])except KeyboardInterrupt: GPIO.cleanup(); æŒ‰ä¸‹é¥æ§æŒ‰é”®ï¼Œç»ˆç«¯ä¼šæ˜¾ç¤ºæ¥æ”¶åˆ°çš„æŒ‰é”®çš„é”®å€¼ï¼š äº”ã€å‚è€ƒèµ„æ–™1ã€ç½‘å€ï¼šhttps://iaiai.iteye.com/blog/2411532 2ã€äº§å“è¯´æ˜ä¹¦ï¼šhttps://pan.baidu.com/s/1E3tnY1Kzo_Sdkju7QzQylQ 3ã€ç½‘å€ï¼šhttp://www.eeboard.com/bbs/thread-6940-1-1.html]]></content>
      <categories>
        <category>æ ‘è“æ´¾</category>
      </categories>
      <tags>
        <tag>æ ‘è“æ´¾</tag>
        <tag>çº¢å¤–é¥æ§</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hexoä¹‹NexTåšå®¢ç¾åŒ–]]></title>
    <url>%2F2019%2F01%2F20%2FHexo%E4%B9%8BNexT%E5%8D%9A%E5%AE%A2%E7%BE%8E%E5%8C%96%2F</url>
    <content type="text"><![CDATA[Hexoä¹‹NexTåšå®¢ç¾åŒ– å†™åœ¨å‰é¢ï¼šé»˜è®¤çš„hexoç•Œé¢çœ‹èµ·æ¥è¿˜æ˜¯å¤ªç®€é™‹äº†ï¼Œå¯ä»¥ç»™Hexoæ¢ä¸€ä¸ªä¸»é¢˜ï¼Œè¿™é‡Œæ¨èNexTï¼Œè¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒæˆç†Ÿçš„ä¸»é¢˜ï¼Œä½¿ç”¨çš„äººä¹Ÿæ˜¯æœ€å¤šçš„ï¼Œä¼˜åŒ–ï¼Œé…ç½®æ‰©å±•éƒ½é›†æˆäº†ï¼Œä½¿ç”¨èµ·æ¥æ¯”è¾ƒç®€å•ã€‚ç„¶åå†å¯¹åŠŸèƒ½ç•Œé¢åšä¸€äº›æ‰©å±•ï¼Œåšå®¢é‡è´¨é‡ï¼Œç•Œé¢åšçš„å¹²å‡€ã€æ¸…çˆ½å°±è¡Œã€‚æœ¬æ–‡è¯¦ç»†ä»‹ç»äº†åšå®¢ç¾åŒ–çš„æ­¥éª¤ã€‚ ä¸€ã€å®‰è£…NexTä¸»é¢˜åœ¨å‘½ä»¤è¡Œè¾“å…¥ 1git clone https://github.com/theme-next/hexo-theme-next themes/next ä¸‹è½½ä¸»é¢˜ã€‚æ‰“å¼€æ ¹ç›®å½•ä¸‹çš„_config.ymlä¸ºåšå®¢çš„ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œä¸»é¢˜é…ç½®æ–‡ä»¶åœ¨./themes/_config.ymlã€‚æœ¬æ–‡çš„æ•´ä¸ªé…ç½®åŸºæœ¬æ˜¯åœ¨ä¿®æ”¹è¿™ä¸¤ä¸ªé…ç½®æ–‡ä»¶ï¼Œæ‰€ä»¥ä½ éœ€è¦åŒºåˆ†æ¸…æ¥šã€‚åœ¨ç«™ç‚¹é…ç½®æ–‡ä»¶./config.ymlæŸ¥æ‰¾themeå¹¶ä¿®æ”¹ï¼š 12## Themes: https://hexo.io/themes/theme: next è¿™æ ·å°±å¯ç”¨äº†ä¸»é¢˜nextï¼Œå¯ä»¥è¾“å…¥hexo sæŸ¥çœ‹æ•ˆæœã€‚æ³¨æ„ï¼Œæœ‰æ—¶å€™é€šè¿‡hexo sé¢„è§ˆæ—¶ï¼Œä½ ä¼šå‘ç°è‡ªå·±æ‰€åšçš„ä¿®æ”¹å¹¶æ²¡æœ‰ç”Ÿæ•ˆï¼Œè¿™æ—¶ä¸è¦ç€æ€¥ï¼Œå‘½ä»¤è¡Œè¾“å…¥hexo cleanæ¸…ç†ä¸‹databaseæ–‡ä»¶å¤¹å’Œpublicæ–‡ä»¶å¤¹å³å¯ã€‚ äºŒã€åšå®¢è®¾ç½®éœ€è¦å…ˆå¯¹åšå®¢åŸºæœ¬ä¿¡æ¯åšä¸€äº›è®¾ç½®ï¼Œæ³¨æ„ï¼Œè®¾ç½®æ—¶å†’å·åé¢éƒ½è¦æœ‰ä¸€ä¸ªç©ºæ ¼ï¼Œè¿™æ˜¯ymlè¯­æ³•æ ¼å¼ã€‚å¦åˆ™ä¼šæŠ¥é”™æˆ–ä¿®æ”¹ä¸ç”Ÿæ•ˆã€‚ 2.1ã€è®¾ç½®è¯­è¨€åœ¨ç«™ç‚¹é…ç½®æ–‡ä»¶./_config.ymlä¸­ï¼Œå°†languageè®¾ç½®æˆæ‰€éœ€è¦çš„è¯­è¨€ã€‚ä¾‹å¦‚ç®€ä½“ä¸­æ–‡ï¼Œé…ç½®å¦‚ä¸‹ï¼š 1language: zh-CN 2.2ã€åŸºæœ¬ä¿¡æ¯é…ç½®åœ¨ç«™ç‚¹é…ç½®æ–‡ä»¶./_config.ymlçš„å¼€å¤´ï¼Œå¡«ä¸Šè‡ªå·±åšå®¢çš„ç›¸åº”ä¿¡æ¯ï¼š 12345title: #æ ‡é¢˜subtitle: #å­ä¸»é¡µæ ‡é¢˜ description: #æè¿°keywords: #å…³é”®å­—author: #ä½œè€…zhen 2.3ã€è®¾ç½®ä¸»é¢˜çš„SchemeNextè‡ªå¸¦äº†å‡ ç§å¤–è§‚ï¼Œåœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶./themes/next/_config.ymlé‡Œæ‰¾åˆ°schemesï¼Œå¯ä»¥è‡ªè¡Œé€‰æ‹©å¸ƒå±€ï¼Œæ ¹æ®ä¸ªäººå–œå¥½ï¼ŒæŠŠå‰é¢çš„æ³¨é‡Šç¬¦#å»æ‰å³å¯ï¼š 12345# Schemes# scheme: Musescheme: Mist#scheme: Pisces#scheme: Gemini 2.4ã€èœå•æ è®¾ç½®åœ¨ç½‘ç«™é¦–é¡µæœ‰å½’æ¡£ç­‰èœå•ï¼Œåœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶./themes/next/_config.ymlé‡Œæ‰¾åˆ°menuï¼ŒæŠŠéœ€è¦çš„èœå•å–æ¶ˆæ³¨é‡Šã€‚å¦å¤–ä¹Ÿå¯ä»¥è‡ªå·±æ·»åŠ èœå•æ ï¼Œ||åé¢æ˜¯font awesomeå›¾æ ‡æ ï¼Œå¦‚ä¸‹ï¼š 123456789menu: home: / || home archives: /archives/ || archive categories: /categories/ || th tags: /tags/ || tags about: /about/ || user #schedule: /schedule/ || calendar #sitemap: /sitemap.xml || sitemap #commonweal: /404/ || heartbeat 2.5ã€åˆ›å»ºé¡µé¢è®¾ç½®å®Œèœå•ä½†æ˜¯æ²¡æœ‰ç›¸å…³é¡µé¢çš„è¯ç‚¹å‡»è¿›å»å°±ä¼šæ˜¾ç¤ºé”™è¯¯ã€‚åœ¨å‘½ä»¤è¡Œè¾“å…¥ 123hexo new page tagshexo new page categorieshexo new page about ç„¶ååœ¨./source/_postsæ–‡ä»¶å¤¹ä¸‹é¢ä¼šç”Ÿæˆå¯¹åº”çš„æ–‡ä»¶å¤¹ï¼Œæ‰“å¼€å°†é¡µé¢çš„typeè®¾ç½®ä¸ºç›¸åº”çš„å†…å®¹ã€‚ä¾‹ï¼š 123456---title: è¿™é‡Œæ˜¯æ‰€æœ‰åˆ†ç±»çš„æ±‡æ€»categories: åˆ†ç±»å type: "categories"date: 2019-01-17 15:29:31--- 2.6ã€æ–‡ç« æ˜¾ç¤ºè®¾ç½®é»˜è®¤é¦–é¡µçš„æ–‡ç« ä¼šæ˜¾ç¤ºå…¨æ–‡ï¼Œåœ¨å‘è¡¨æ–‡ç« çš„å†…å®¹ä¸­åŠ ä¸Š&lt;!--more--&gt; è¿™æ ·é¦–é¡µä¸­æ–‡ç« ä¼šæ˜¾ç¤ºåˆ°ä½ æ’å…¥è¿™å¥è¯çš„å‰é¢ï¼Œç‚¹å‡»é˜…è¯»å…¨æ–‡æ‰ä¼šæ˜¾ç¤ºæ•´ç¯‡æ–‡ç« ã€‚ 2.7ã€ä½¿ç”¨RSSåœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥: 1npm install --save hexo-generator-feed å®‰è£…æ’ä»¶ï¼Œç„¶ååœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶./themes/next/_config.ymlä¸­æ‰¾åˆ°rsså¹¶ä¿®æ”¹ï¼š 1rss: /atom.xml 2.8ã€è®¾ç½®åšå®¢faviconå›¾æ ‡åœ¨./themes/next/source/imagesç›®å½•ä¸‹æ”¾ç½®å›¾æ ‡ï¼Œå’Œé»˜è®¤çš„å›¾æ ‡ç±»ä¼¼ï¼Œç„¶ååœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶./themes/next/_config.ymlæ‰¾åˆ°faviconå¹¶ä¿®æ”¹ï¼š 1234567favicon: small: /images/favicon-16x16-next.ico medium: /images/favicon-32x32-next.ico apple_touch_icon: /images/apple-touch-icon-next.png safari_pinned_tab: /images/logo.svg #android_manifest: /images/manifest.json #ms_browserconfig: /images/browserconfig.xml 2.9ã€ä¾§è¾¹æ ç¤¾äº¤é“¾æ¥åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶./themes/next/_config.ymlæ‰¾åˆ°socialæŠŠéœ€è¦çš„å†…å®¹å–æ¶ˆæ³¨é‡Šï¼Œå¡«å¥½ä½ çš„é“¾æ¥å°±å¯ä»¥ã€‚||åé¢çš„æ˜¯å›¾æ ‡åç§°ï¼Œå’Œèœå•ä¸€æ ·ï¼Œä¹Ÿæ˜¯ä½¿ç”¨çš„Font Awesome`å›¾æ ‡ã€‚ 123456789101112social: GitHub: https://github.com/zhengirl || github #E-Mail: mailto:yourname@gmail.com || envelope #Weibo: https://weibo.com/yourname || weibo #Google: https://plus.google.com/yourname || google #Twitter: https://twitter.com/yourname || twitter #FB Page: https://www.facebook.com/yourname || facebook #VK Group: https://vk.com/yourname || vk #StackOverflow: https://stackoverflow.com/yourname || stack-overflow #YouTube: https://youtube.com/yourname || youtube #Instagram: https://instagram.com/yourname || instagram #Skype: skype:yourname?call|chat || skype 2.10ã€è®¾ç½®èƒŒæ™¯åŠ¨ç”»åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­ï¼Œæ‰¾åˆ°canvas_nestï¼Œæ”¹ä¸ºtrueï¼š 1234567canvas_nest: enable: true onmobile: true # display on mobile or not color: '0,0,255' # RGB values, use ',' to separate opacity: 0.5 # the opacity of line: 0~1 zIndex: -1 # z-index property of the background count: 99 # the number of lines 2.11ã€ä¿®æ”¹æ–‡ç« åº•éƒ¨çš„#å·æ ‡ç­¾æ‰“å¼€./themes/next/layout/_macro/post.swigæ–‡ä»¶ä¸­ï¼Œæœç´¢rel=&quot;tag&quot;&gt;#,å°†#æ›¿æ¢ä¸ºFont Awesomeå›¾æ ‡ï¼š 1rel="tag"&gt;&lt;i class="fa fa-tag"&gt;&lt;/i&gt; 2.12ã€æœç´¢æœåŠ¡åœ¨å‘½ä»¤è¡Œè¾“å…¥ï¼š 1npm install hexo-generator-searchdb --save å®‰è£…hexo-generator-searchdbæ’ä»¶ï¼Œç„¶ååœ¨ç«™ç‚¹é…ç½®æ–‡ä»¶./_config.ymlæ·»åŠ ä»¥ä¸‹ä»£ç ï¼š 123456# searchsearch: path: search.xml field: post format: html limit: 10000 ç„¶ååœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶./themes/next/_config.ymlä¸­æ‰¾åˆ°local_searchæ”¹ä¸ºtrueå³å¯ï¼š 12local_search: enable: true 2.13ã€ä»£ç é«˜äº®åœ¨ç«™ç‚¹é…ç½®æ–‡ä»¶./_config.ymlå†…æ‰¾åˆ°highlightï¼Œå¹¶è®¾ç½®å¦‚ä¸‹ï¼š 123456highlight: enable: true line_number: true #ä»£ç è‡ªåŠ¨é«˜äº® auto_detect: true tab_replace: ç„¶ååœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶./themes/next/_config.ymlä¸­æ‰¾åˆ°highlight_themeï¼Œè®¾ç½®æˆä½ å–œæ¬¢çš„ä»£ç é«˜äº®ä¸»é¢˜ï¼š 1234# Code Highlight theme# Available values: normal | night | night eighties | night blue | night bright# https://github.com/chriskempson/tomorrow-themehighlight_theme: night 2.14ã€å¤´åƒåœ†å½¢å’Œæ—‹è½¬å°†å¤´åƒæ˜¾ç¤ºæˆåœ†å½¢ï¼Œé¼ æ ‡æ”¾ä¸Šå»æœ‰æ—‹è½¬æ•ˆæœï¼Œåœ¨.\themes\next\source\css\_common\components\sidebar\sidebar-author.stylæ–‡ä»¶å°†é‡Œé¢çš„å†…å®¹æ›¿æ¢ä¸ºï¼š 12345678910111213141516171819202122232425262728293031323334.site-author-image &#123; margin: 0 auto; padding: $site-author-image-padding; max-width: $site-author-image-width; height: $site-author-image-height; border: $site-author-image-border-width solid $site-author-image-border-color; border-radius: 50%; -webkit-border-radius: 50%; -moz-border-radius: 50%; transition: 1.4s all;&#125;.site-author-image:hover &#123; background-color: #e6be93; -webkit-transform: rotate(360deg); -moz-transform: rotate(360deg); -ms-transform: rotate(360deg); -transform: rotate(360deg);&#125;.site-author-name &#123; margin: $site-author-name-margin; text-align: $site-author-name-align; color: $site-author-name-color; font-weight: $site-author-name-weight;&#125;.site-description &#123; margin-top: $site-description-margin-top; text-align: $site-description-align; font-size: $site-description-font-size; color: $site-description-color;&#125; 2.15ã€æ·»åŠ æ–‡ç« å­—æ•°å’Œé˜…è¯»æ—¶é•¿ç»Ÿè®¡åŠŸèƒ½é¦–å…ˆéœ€è¦åœ¨å‘½ä»¤è¡Œè¾“å…¥ï¼š 1npm install hexo-symbols-count-time --save å®‰è£…ç»Ÿè®¡æ’ä»¶ï¼Œç„¶ååœ¨ç«™ç‚¹é…ç½®æ–‡ä»¶./_config.ymlæœ«å°¾æ·»åŠ å¦‚ä¸‹ä½¿èƒ½ç»Ÿè®¡åŠŸèƒ½çš„ä»£ç ï¼š 123456# reading timesymbols_count_time: symbols: true time: true total_symbols: true total_time: true 2.16ã€ä¿ç•™æ–‡ç« æœ¬èº«çš„ç¼–å·æˆ‘ä»¬åœ¨å†™åšå®¢çš„æ—¶å€™ï¼Œä¼šè‡ªå·±ç»™æ–‡ç« ç¼–å·ï¼Œä½†nextä¸»é¢˜é»˜è®¤çš„ä¹Ÿæœ‰ç¼–å·ï¼Œè¿™æ ·å¤šä¸ªç¼–å·å°±æ¯”è¾ƒå¥‡æ€ªï¼Œæ‰€ä»¥æŠŠé»˜è®¤çš„ç¼–å·å–æ¶ˆï¼Œåœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶æŸ¥æ‰¾tocï¼Œä¿®æ”¹å¦‚ä¸‹ï¼š 1234toc: enable: true # Automatically add list number to toc. number: false 2.17ã€è‡ªå®šä¹‰åšå®¢Nextä¸­ç•™å‡ºç»™ä½¿ç”¨è€…è‡ªæˆ‘è®¾è®¡çš„ç©ºé—´ï¼Œåœ¨/themes/next/source/css/_custom/cutom.stylæ–‡ä»¶ä¸­å¯ä»¥è‡ªè¡Œæ·»åŠ ä¸€äº›å°æ ·å¼è®©åšå®¢æœ‰æ‰€ä¸åŒï¼š 123456789//æ–‡ç« é˜´å½±ä¸è¾¹ç¼˜å¼ºåŒ–.post &#123; margin-top: 0px; margin-bottom: 0px; border-radius: 16px; padding: 25px; -webkit-box-shadow: 0 0 5px rgba(0, 0, 0, 0.70); -moz-box-shadow: 0 0 5px rgba(0, 0, 0, 0.70);&#125; ä¸‰ã€åœ¨æ–‡ç« ä¸­æ˜¾ç¤ºå›¾ç‰‡é¦–å…ˆåœ¨ç«™ç‚¹é…ç½®æ–‡ä»¶ä¸­å°†post_asset_folderåé¢ä¿®æ”¹ä¸ºtrueï¼Œåœ¨å»ºç«‹ä¸€ç¯‡æ–°çš„åšå®¢æ—¶ï¼ŒHexoä¼šè‡ªåŠ¨å»ºç«‹ä¸€ä¸ªä¸æ–‡ç« åŒåçš„æ–‡ä»¶å¤¹ï¼Œè¿™æ ·ä¸€æ¥ï¼Œå°±å¯ä»¥æŠŠå›¾ç‰‡å­˜å‚¨åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­æ–¹ä¾¿è°ƒç”¨ã€‚ å…¶æ¬¡æœ¬äººä¹ æƒ¯äºåœ¨typoraä¸­å°†markdownæ–‡ä»¶ç¼–è¾‘å¥½ä¹‹åç›´æ¥å¤åˆ¶åˆ°hexoä¸­ï¼Œæ‰€ä»¥éœ€è¦å¯¹typoraçš„è®¾ç½®åšä¸€äº›æ›´æ”¹ï¼Œæ‰“å¼€åå¥½è®¾ç½®ï¼Œé€‰æ‹©å°†å›¾ç‰‡å¤åˆ¶åˆ°æŒ‡å®šæ–‡ä»¶å¤¹ä¸­ï¼Œè¿™æ ·åœ¨typoraä¸­ä¹Ÿæœ‰æŒ‡å®šçš„ä¸æ–‡ç« åŒåçš„æ–‡ä»¶å¤¹ï¼Œæ‰€ä»¥å°†æ–‡ç« å’Œæ–‡ä»¶å¤¹éƒ½å¤åˆ¶åˆ°Hexoä¸­å³å¯ã€‚ åœ¨å‘½ä»¤è¡Œè¾“å…¥ 1npm install https://github.com/CodeFalling/hexo-asset-image --save å®‰è£…æ’ä»¶ï¼Œç­‰å¾…ä¸€æ®µæ—¶é—´ã€‚è¾“å…¥hexo såœ¨æœ¬åœ°é¢„è§ˆç½‘ç«™å›¾ç‰‡å°±å¯ä»¥æ˜¾ç¤ºå•¦ï¼ å››ã€è‡´è°¢åœ¨æ­å»ºåšå®¢çš„è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°äº†ä¸€äº›é—®é¢˜ï¼Œå‚è€ƒäº†å¾ˆå¤šå¤§ä½¬çš„è§£å†³æ–¹æ¡ˆï¼Œæ„Ÿè°¢ä»–ä»¬çš„åˆ†äº«ã€‚æœ¬æ–‡åªæ˜¯å°†è‡ªå·±æ­å»ºåšå®¢çš„è¿‡ç¨‹å¤è¿°äº†ä¸€éï¼Œå¸Œæœ›å¯¹åæ¥è€…æœ‰æ‰€å¸®åŠ©ã€‚ æ¨èåœ¨é…ç½®çš„æ—¶çœ‹å®˜æ–¹æ–‡æ¡£ï¼šhttp://theme-next.iissnan.com/third-party-services.html]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>next</tag>
        <tag>ç¾åŒ–è®¾ç½®</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hexo+GitHubæ­å»ºä¸ªäººåšå®¢]]></title>
    <url>%2F2019%2F01%2F20%2FHexo%2BGitHub%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%85%A5%E9%97%A8%2F</url>
    <content type="text"><![CDATA[Hexo+GitHubæ­å»ºä¸ªäººåšå®¢authorï¼šåˆ˜çœŸçœŸ å†™åœ¨å‰é¢ï¼šå»å¹´ä¸‰æœˆä»½æ—¶å€™é˜¿é‡Œäº‘åšæ´»åŠ¨å°±ç”³è¯·äº†ä¸€ä¸ªåŸŸåï¼Œä½†æ˜¯ä¸€ç›´è§‰å¾—æ­å»ºç½‘ç«™æ˜¯ä¸€ä¸ªæ¯”è¾ƒéº»çƒ¦çš„æ—¶å€™ï¼Œå°±æç½®äº†å¾ˆä¹…ï¼Œåœ¨ç”·æœ‹å‹çš„é¼“åŠ±ä¸‹ï¼Œé‚å†³å®šå¥½å¥½æ¯é¥¬ä¸€ä¸‹è‡ªå·±çš„ç½‘ç«™æ‹¿æ¥å†™åšå®¢ï¼Œå¼€å§‹ä¸€ç›´æ‹…å¿ƒè‡ªå·±åšä¸å‡ºæ¯”è¾ƒå¥½çš„æ•ˆæœï¼Œåé¢æ¸æ¸å°†è¿™ç§æƒ³æ³•æç½®ï¼Œç½‘ä¸Šæœ‰éå¸¸å¤šhexoçš„çˆ±å¥½è€…å°†è‡ªå·±çš„è¿‡ç¨‹åˆ†äº«å‡ºæ¥ï¼ŒåŸºæœ¬ä¸Šè¸©å¾—å‘éƒ½æ˜¯å‰äººé‡åˆ°çš„ï¼Œå‰äººæ ½æ ‘åäººä¹˜å‡‰ï¼Œæˆ‘ä¹Ÿå°†æ­å»ºåšå®¢ä¸­ä¸€äº›å…³é”®æ€§çš„æ­¥éª¤æ€»ç»“ä¸€ä¸‹ï¼Œä»¥é˜²åäººè·³å‘ã€‚æœ¬äººæ²¡æœ‰æ¥è§¦è¿‡å‰ç«¯çŸ¥è¯†ï¼Œå…¨å‡­è°·æ­Œå’Œç™¾åº¦ï¼Œæ‰€ä»¥æœ‰æ­å»ºä¸ªäººç½‘ç«™æƒ³æ³•çš„åŒå­¦å°½ç®¡å»åšï¼Œå¼€å§‹äº†ç¬¬ä¸€æ­¥ï¼Œåé¢çš„å°±ä¸æ˜¯é—®é¢˜äº†ã€‚ ä¸€ã€å‰æœŸå‡†å¤‡1.1ã€å®‰è£…Node.jsåœ¨Node.jså®˜ç½‘ä¸‹è½½å¯¹åº”å¹³å°çš„å®‰è£…ç¨‹åºã€‚åœ¨Windowsä¸Šå®‰è£…æ—¶éœ€é€‰æ‹©å…¨éƒ¨ç»„å»ºï¼Œå‹¾é€‰Add to Path,æ‰“å¼€å‘½ä»¤è¡Œå®‰è£…æˆåŠŸå¯ä»¥çœ‹åˆ° 1.2ã€å®‰è£…gitåœ¨Gitå®˜ç½‘ä¸Šä¸‹è½½Windowsçš„å®‰è£…ç¨‹åºã€‚å®‰è£…å®Œæˆåï¼Œåœ¨å¼€å§‹èœå•é‡Œæ‰¾åˆ°â€Git bsah Hereâ€,å¼¹å‡ºä¸€ä¸ªç±»ä¼¼å‘½ä»¤è¡Œçš„çª—å£ï¼Œè¯´æ˜Gitå®‰è£…æˆåŠŸï¼ åŒæ—¶é…ç½®ç”µè„‘çš„ç¯å¢ƒå˜é‡ï¼Œæˆ–è€…åœ¨å®‰è£…çš„æ—¶å€™é€‰æ‹©use Git from the Windows Command Prompt,å³å¯åœ¨å‘½ä»¤è¡Œä¸­è°ƒç”¨gitã€‚ 1.3ã€Githubè´¦æˆ·æ³¨å†Œå’Œæ–°å»ºé¡¹ç›®é¡¹ç›®å¿…é¡»è¦éµå®ˆæ ¼å¼ï¼šè´¦æˆ·å.github.ioï¼Œä»¥å…åé¢äº§ç”Ÿä¸å¿…è¦çš„éº»çƒ¦ã€‚ 1.4ã€å®‰è£…hexoåœ¨ç”µè„‘çš„ä»»ä½•ä½ç½®å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œæˆ‘åœ¨Eç›˜å»ºäº†ä¸€ä¸ªä¸å·¥ç¨‹åŒåçš„zhengirl.github.ioæ–‡ä»¶å¤¹ï¼Œç„¶åé€šè¿‡å‘½ä»¤è¡Œè¿›å…¥è¯¥æ–‡ä»¶å¤¹ï¼š è¾“å…¥npm install hexo -g,å¼€å§‹å®‰è£…hexoï¼Œè¾“å…¥hexo -v,æ£€æŸ¥hexoæ˜¯å¦å®‰è£…æˆåŠŸã€‚ è¾“å…¥hexo init,åˆå§‹åŒ–æ–‡ä»¶å¤¹ã€‚ç»è¿‡æ¼«é•¿çš„ç­‰å¾…ï¼Œå¯ä»¥çœ‹åˆ°Start blogging with Hexoï¼ã€‚ è¾“å…¥npm installï¼Œå®‰è£…æ‰€éœ€è¦çš„ç»„ä»¶ã€‚ äºŒã€æœ¬åœ°ç½‘é¡µçš„æ­å»º2.1ã€ä½“éªŒhexoåœ¨å®‰è£…å¥½å‰é¢éœ€è¦çš„ä¸€ç³»åˆ—åŒ…åï¼Œè¾“å…¥hexo gï¼Œé¦–æ¬¡ä½“éªŒHexoã€‚ è¾“å…¥hexo sï¼Œå¼€å¯æœåŠ¡å™¨ï¼Œè®¿é—®è¯¥ç½‘å€ï¼Œæ­£å¼ä½“éªŒHexoã€‚ 2.2ã€å°†Hexoä¸github pageè”ç³»èµ·æ¥é¦–å…ˆéœ€è¦è®¾ç½®Gitçš„user nameå’Œemailï¼ˆå¦‚æœæ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨çš„è¯ï¼‰ã€‚æ‰“å¼€å‘½ä»¤è¡Œ 12$ git config --golbal user.name. &quot;author&quot; #å°†ç”¨æˆ·åè®¾ä¸ºauthor$ git config --global user.email &quot;author@corpmail.com&quot; #å°†ç”¨æˆ·é‚®ç®±è®¾ä¸ºauthor@corpmail.com æ·»åŠ SSHï¼Œè¯¦æƒ…è§è¿™ç¯‡åšå®¢,è¾“å…¥ssh -T gi@github.com,æµ‹è¯•æ·»åŠ sshæ˜¯å¦æˆåŠŸã€‚å¦‚æœçœ‹åˆ°Hiåé¢æ˜¯ä½ çš„ç”¨æˆ·åï¼Œå°±è¯´æ˜æˆåŠŸäº†ã€‚ 2.3ã€é…ç½®Deploymentç”¨VScodeæ‰“å¼€zhengirl.git.com.io,å³æ•´ä¸ªå·¥ç¨‹ï¼Œæ‰¾åˆ°ç«™ç‚¹é…ç½®æ–‡ä»¶_config.ymlï¼ŒæŸ¥æ‰¾repoå¹¶ä¿®æ”¹ï¼Œåœ¨æ–‡ä»¶æœ«å°¾ï¼š 1234deploy: type: git repository: git@github.com:zhengirl/zhengirl.github.io.git branch: master 2.4ã€æ–°å»ºåšå®¢åœ¨å‘½ä»¤è¡Œæ‰§è¡Œå‘½ä»¤ï¼šhexo new post â€œåšå®¢åâ€ æ­¤æ—¶åœ¨/source/_postsä¸‹å¯ä»¥çœ‹åˆ°å·²ç»åˆ›å»ºçš„æ–‡ä»¶ ä½†è¿™é‡Œåˆ™å¤šç”Ÿæˆäº†ä¸€ä¸ªåšå®¢åçš„æ–‡ä»¶å¤¹ï¼Œè‡³äºä¸ºä»€ä¹ˆä¼šç”Ÿæˆè¿™ä¸ªæ–‡ä»¶å¤¹ä»¥åŠå®ƒçš„ç”¨é€”ï¼Œæˆ‘ä»¬åœ¨ä¸‹ç¯‡æ–‡ç« è¯¦è§£ã€‚ 2.5ã€éƒ¨ç½²æ–‡ç« åœ¨ç”Ÿæˆä»¥åŠéƒ¨ç½²æ–‡ç« ä¹‹å‰éœ€è¦å®‰è£…ä¸€ä¸ªæ‰©å±•ï¼Œnpm install hexo-develoyer-git --saveï¼Œç¼–è¾‘å¥½æ–‡ç« åè¾“å…¥hexo d -gï¼Œç”Ÿæˆå’Œéƒ¨ç½²ç½‘ç«™ã€‚ éƒ¨ç½²æˆåŠŸåè®¿é—®ç½‘å€ï¼šhttp://ç”¨æˆ·å.github.io,å°†çœ‹åˆ°éƒ¨ç½²æˆåŠŸçš„æ•´ä¸ªç½‘ç«™ã€‚ è‡³æ­¤ä¸ºæ­¢ï¼Œæœ€åŸºæœ¬çš„hexo+githubæ­å»ºä¸ªäººåšå®¢åŸºæœ¬å®Œæˆï¼Œä½†æ˜¯æˆ‘ä»¬çš„åšå®¢è¿˜æ˜¯å¤ªç®€é™‹äº†ä¸€äº›ï¼Œæ¥ä¸‹æ¥éœ€è¦å¯¹åšå®¢è¿›è¡Œä¸€äº›é›•ç¢ã€‚]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>github</tag>
        <tag>å…¥é—¨åšå®¢</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ ‘è“æ´¾å…¥é—¨]]></title>
    <url>%2F2019%2F01%2F18%2F%E6%A0%91%E8%8E%93%E6%B4%BE%E5%85%A5%E9%97%A8%2F</url>
    <content type="text"><![CDATA[æ ‘è“æ´¾å…¥é—¨ï¼ˆæ§åˆ¶LEDç¯ï¼‰authorï¼š åˆ˜çœŸçœŸ å†™åœ¨å‰é¢ï¼šæ ‘è“æ´¾æ˜¯åŸºäºLinuxçš„è¿·ä½ ä¸»æœºï¼Œä½†åŠŸèƒ½å®Œå–„ï¼Œä¸”é¢„ç•™äº†å¾ˆå¤šIOå£ç»™å¼€å‘è€…æ‰©å±•ï¼Œæ¯”å•ç‰‡æœºçš„åŠŸèƒ½å¼ºå¤§ä¸å°‘ï¼Œå¯ä»¥å°†Pythonç¨‹åºç§»æ¤åˆ°æ ‘è“æ´¾ä¸Šã€‚æœ¬æ–‡ç®€å•ä»‹ç»äº†æ–°æ‰‹å¦‚ä½•ä½¿ç”¨æ ‘è“æ´¾å’Œåˆ©ç”¨æ ‘è“æ´¾ç‚¹äº®ä¸€ä¸ªLEDç¯ã€‚ ä¸€ã€æ¿è½½èµ„æº+é…ä»¶æ ‘è“æ´¾æ˜¯è¿·ä½ ä¸»æœºï¼Œé›†æˆåœ¨ä¸€å—ç”µè·¯æ¿ä¸Šã€‚å…¶å‹å·ä¸ºRsspberry Pi ä¸‰ä»£Bå‹ã€‚ ç”µæº ï¼šMicro USB æ¥å£çš„æ‰‹æœºå……ç”µå™¨ï¼Œè¾“å‡º5V2A Micro SDå¡ ï¼šå……å½“ç¡¬ç›˜åŠŸèƒ½ï¼Œå¤§å°æœ€å¥½åœ¨8Gä»¥ä¸Šã€‚ æ˜¾ç¤ºå™¨ï¼šHDMIæ¥å£çš„æ˜¾ç¤ºå™¨ï¼Œéœ€è¦å±å¹•åˆ™æ¥ é”®ç›˜ï¼šæ ‘è“æ´¾å†…ç½®è“ç‰™ï¼ŒUSBæˆ–è“ç‰™çš„æ— çº¿é”®ç›˜éƒ½å¯ä»¥ç”¨ã€‚éœ€è¦æ—¶åˆ™é…ã€‚ äºŒã€ç”µå­å…ƒä»¶1ã€é¢åŒ…æ¿ 2ã€ä¸€æ®µå…¬å¤´ä¸€ç«¯æ¯å¤´çš„æœé‚¦çº¿ 3ã€LEDäºŒæç®¡ 4ã€1Kçš„ç”µé˜» ä¸‰ã€å®‰è£…ç³»ç»Ÿ1ã€ä¸‹è½½æ ‘è“æ´¾ç³»ç»Ÿ ç½‘å€: https://www.raspberrypi.org/downloads/ é€‰æ‹©éœ€è¦çš„ç³»ç»Ÿå³å¯ã€‚è¿™é‡Œæˆ‘ä»¬é€‰æ‹©æ ‘è“æ´¾å®˜æ–¹çš„ç³»ç»Ÿï¼Œé¢„è£…äº†æ¡Œé¢å’Œéƒ¨åˆ†è½¯ä»¶ï¼Œå¦‚ä¸‹å›¾ç®­å¤´æ‰€æŒ‡ã€‚å¦‚æœæœ‰ä¸€å®šçš„å¼€æºç³»ç»Ÿä½¿ç”¨ç»éªŒï¼Œå¯ä»¥é€‰æ‹©æœ€ä¸ºè½»é‡çš„åªæœ‰æ“ä½œç³»ç»Ÿçš„è£¸æœºã€‚ 2ã€å°†SDå¡æ ¼å¼åŒ– â€‹ ç›´æ¥åœ¨æ–‡ä»¶èµ„æºç®¡ç†å™¨ä¸­å°†SDå¡æ ¼å¼åŒ–å³å¯ 3ã€ä¸‹è½½å°†ç³»ç»Ÿå¯¼å…¥å†…å­˜å¡çš„å·¥å…·etcher å®‰è£…æˆåŠŸåæ‰“å¼€ï¼Œé¦–å…ˆé€‰æ‹©ä¸‹è½½å¥½çš„ç³»ç»Ÿé•œåƒæ–‡ä»¶ï¼Œç„¶åé€‰æ‹©æ ‘è“æ´¾å†…å­˜å¡ï¼Œç‚¹å‡»Flashã€‚ æ³¨æ„ï¼šåœ¨æ­¤è¿‡ç¨‹ä¸­å¦‚æœæç¤ºä¸å¯è¯†åˆ«æ–‡ä»¶ç³»ç»Ÿæˆ–è€…è¦æ ¼å¼åŒ–ï¼Œç›´æ¥ç‚¹Xå…³é—­å³å¯ã€‚ flashå®Œæˆåï¼Œå°†å†…å­˜å¡å–ä¸‹æ’å…¥æ ‘è“æ´¾ï¼Œå¼€æœºå³å¯æŸ¥çœ‹æ–°ç³»ç»Ÿï¼ å››ã€SSHç™»å½•å®‰è£…ç³»ç»Ÿä¹‹åï¼Œé€‰æ‹©æ ‘è“æ´¾è”ç½‘æ–¹å¼ï¼Œæ ‘è“æ´¾æœ‰ç½‘çº¿æ¥å£å’ŒWiFièŠ¯ç‰‡ï¼Œç”¨WiFiä¸Šç½‘æ›´åŠ æ–¹ä¾¿ã€‚åœ¨æ‰“å¼€æ–°ç³»ç»Ÿæ—¶ï¼Œæœç´¢å±€åŸŸç½‘è¾“å…¥å¯†ç å³å¯ã€‚ç”¨SSHå°†ç”µè„‘å’Œæ ‘è“æ´¾ç³»ç»Ÿè¿é€šï¼Œé¦–å…ˆæ‰“å¼€æ ‘è“æ´¾çš„SSHåŠŸèƒ½ï¼Œåœ¨å‘½ä»¤è¡Œè¾“å…¥ï¼š 1sudo raspi-config å¾—åˆ°å¦‚ä¸‹çš„è®¾ç½® è¿›å…¥ç¬¬äº”é¡¹Interfacing Optionsï¼Œç„¶åé€‰æ‹©SSHï¼š ä½¿èƒ½SSHå³å¯ã€‚ç”µè„‘å’Œæ ‘è“æ´¾è¿æ¥åŒä¸€ä¸ªè·¯ç”±å™¨ï¼Œåœ¨æµè§ˆå™¨è®¿é—®è·¯ç”±å™¨çš„IPï¼ˆ192.168.1.1ï¼‰ï¼ŒæŸ¥çœ‹æ ‘è“æ´¾çš„IPåœ°å€ä¸º192.168.1.101ã€‚åœ¨å®¢æˆ·ç«¯è¾“å…¥æ ‘è“æ´¾çš„ç”¨æˆ·å pi å’Œå¯†ç  123456ï¼š 1ssh pi@192.168.1.101 ä¸æ ‘è“æ´¾å»ºç«‹è¿æ¥ã€‚ äº”ã€è¿œç¨‹æ¡Œé¢ä¸ºäº†æ›´åŠ æ–¹ä¾¿åœ°æ“ä½œæ ‘è“æ´¾ï¼Œå®‰è£…è¿œç¨‹æ¡Œé¢ã€‚æ‰“å¼€æ ‘è“æ´¾ç»ˆç«¯ï¼Œè¾“å…¥ 1sudo apt-get install xrdp ç­‰å¾…å®‰è£…å®Œæˆã€‚ æ‰“å¼€ç”µè„‘çš„è¿œç¨‹æ¡Œé¢ è¾“å…¥æ ‘è“æ´¾çš„IPåœ°å€ï¼Œè¿œç¨‹æ¡Œé¢æ“ä½œï¼Œç”¨æˆ·åpiï¼Œ å¯†ç 123456ï¼Œè¿æ¥æˆåŠŸï¼š å…­ã€ç‚¹ äº® LEDæ ‘è“æ´¾æä¾›äº†ä¸€ç»„é€šç”¨IOå£ï¼Œç§°ä¸ºGPIOã€‚40ä¸ªå¼•è„šçš„å®šä¹‰ä¸æ¿ä¸Šå¼•è„šèµ„æºå¯¹åº”å¦‚ä¸‹ å°†æ ‘è“æ´¾å’Œç”µå­å…ƒå™¨ä»¶è¿èµ·æ¥ã€‚æ³¨æ„äºŒçº§ç®¡çš„æ­£è´Ÿæã€‚æ­£ææ¥3.3Vï¼Œè´Ÿæé€šè¿‡ç”µé˜»æ¥åœ°ï¼Œå¯ä»¥çœ‹åˆ°äºŒæç®¡äº®äº†ã€‚ä¸‹é¢ä½¿ç”¨Nodeè„šæœ¬æ§åˆ¶LEDã€‚ é¦–å…ˆï¼Œå°†æ¥åœ°çš„å¯¼çº¿ä»GNDé’ˆè„šæ‹”å‡ºï¼Œæ¥åˆ°GPIO0.0å³11å·å¼•è„šã€‚æ³¨æ„ï¼Œ3.3Vçš„é’ˆè„šæ˜¯æ˜¯æœ‰æ ‡è¯†çš„ä¸ºæ–¹çš„ï¼Œå…¶ä»–é’ˆè„šéƒ½æ˜¯åœ†çš„ã€‚ä»£ç å¦‚ä¸‹ï¼š 1234567891011var rpio = require('rpio')rpio.open(11, rpio.OUTPUT)function blink()&#123; rpio.write(11, rpio.HIGH); setTimeout(function ledoff()&#123; rpio.write(11, rpio.LOW); &#125;,50);&#125;setInterval(blink, 100); ç”¨node.jsç¨ä½œå°è¯•ï¼Œæ¥ä¸‹æ¥è½®åˆ°ä¸»è§’pythonå‡ºåœºäº†ï¼ŒLinuxç³»ç»Ÿä¸­å¾ˆå¤šåŠŸèƒ½æ˜¯é€šè¿‡pythonå®ç°çš„ï¼Œä¸”å†…åµŒäº†pythonï¼Œæ— éœ€å®‰è£…ï¼Œä¸pythonçš„å…¼å®¹æ€§æå¥½ï¼Œæ‰€ä»¥å°è¯•ç”¨Pythonä½¿LEDé—ªçƒã€‚ ä»£ç å¦‚ä¸‹ 1234567891011121314151617#!/usr/bin/python#author:lzzimport RPi.GPIO as GPIOimport timeGPIO.setwarnings(False)GPIO.setmode(GPIO.BOARD)#BCMå’ŒBOARDä¸¤ç§å‘½åæ¨¡å¼GPIO.setup(11, GPIO.OUT)while True: GPIO.output(11, GPIO.HIGH) time.sleep(0.05) GPIO.output(11, GPIO.LOW) time.sleep(0.05)GPIO.cleanup() ç¨‹åºé€»è¾‘ï¼š 1ã€å¯¼å…¥GPIOçš„åŒ… 2ã€å¯¼å…¥ä¸æ—¶é—´åŒ… 3ã€è®¾ç½®GPIOé’ˆçš„å‘½åæ–¹å¼ï¼Œå¯ç”¨çš„æœ‰GPIO.BCMå’ŒGPIO.BOARDï¼Œåˆ†åˆ«ä»£è¡¨boardcomå‘½åç³»ç»Ÿå’Œæ ‘è“æ´¾æ¿å­ä¸Šçš„å‘½åç³»ç»Ÿã€‚ 4ã€å°†å¼•è„š11è®¾ç½®ä¸ºè¾“å‡º 5ã€æ§åˆ¶å¼•è„š11çš„ç”µå¹³é«˜ä½å˜æ¢ 6ã€æ¸…é™¤æ‰ä¹‹å‰RPi.GPIO.setup()è®¾ç½®çš„çŠ¶æ€ã€‚é€€å‡ºç¨‹åºå‰ä¸€å®šè¦è°ƒç”¨ï¼Œå¦åˆ™ä¸‹æ¬¡è°ƒç”¨ä¼šå‡ºé”™ã€‚]]></content>
      <categories>
        <category>æ ‘è“æ´¾</category>
      </categories>
      <tags>
        <tag>æ ‘è“æ´¾</tag>
        <tag>å…¥é—¨</tag>
        <tag>LED</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hello,Hexo!]]></title>
    <url>%2F2019%2F01%2F17%2FHello-Hexo%2F</url>
    <content type="text"><![CDATA[ä½¿ç”¨hexoï¼Œæ˜¯ä¸€ä»¶éå¸¸ç®€å•çš„äº‹æƒ…ã€‚æµ‹è¯•æ–‡æœ¬ã€‚]]></content>
  </entry>
</search>
